/**
 * SEO Part 63: Enrich preschool grade for garden, household, jobs, music, numbers
 * Adds 6 grade-level enrichment fields to gradeContent.preschool for each theme.
 * Fields: uniqueGradeAngle, developmentalMilestones, differentiationNotes,
 *         parentTakeaway, classroomIntegration, assessmentRubric
 */
const fs = require('fs');
const path = require('path');

const BASE = path.join(__dirname, '..', 'frontend', 'content', 'themes');

// Escape single quotes for TS single-quoted strings
function esc(s) {
  return s.replace(/'/g, "\\'");
}

function buildInjection(data, nl) {
  const lines = [];
  lines.push(`      uniqueGradeAngle: '${esc(data.uniqueGradeAngle)}',`);
  lines.push(`      developmentalMilestones: [`);
  for (const m of data.developmentalMilestones) {
    lines.push(`        { milestone: '${esc(m.milestone)}', howWeAddress: '${esc(m.howWeAddress)}' },`);
  }
  lines.push(`      ],`);
  lines.push(`      differentiationNotes: '${esc(data.differentiationNotes)}',`);
  lines.push(`      parentTakeaway: '${esc(data.parentTakeaway)}',`);
  lines.push(`      classroomIntegration: '${esc(data.classroomIntegration)}',`);
  lines.push(`      assessmentRubric: [`);
  for (const r of data.assessmentRubric) {
    lines.push(`        { skill: '${esc(r.skill)}', emerging: '${esc(r.emerging)}', proficient: '${esc(r.proficient)}', advanced: '${esc(r.advanced)}' },`);
  }
  lines.push(`      ],`);
  return lines.join(nl);
}

// ── Theme content ────────────────────────────────────────────────────────

const themes = [
  // ── Garden ────────────────────────────────────────────────────────────
  {
    name: 'garden',
    uniqueGradeAngle: 'Preschool is the most hands-in-the-dirt stage for garden worksheets because three- and four-year-olds are in the peak period of sensory-motor exploration \u2014 they crave digging, pouring water, picking up worms, and squishing mud between their fingers, and garden worksheets channel this irresistible tactile drive into structured learning about seeds, soil, sunlight, and growth. Garden worksheets are uniquely powerful at the preschool level because they connect abstract academic concepts like counting, sequencing, and vocabulary to a living, changing, outdoor process that children can observe with their own eyes \u2014 a planted seed that sprouts into a seedling and eventually produces a flower or vegetable provides the most tangible, slow-motion science experiment available to young learners. The nurturing dimension of gardening aligns perfectly with preschool social-emotional development because watering a plant, watching it grow, and celebrating its bloom teaches responsibility, patience, and care for living things in a way that no static theme can replicate.',
    developmentalMilestones: [
      { milestone: 'Seed-to-plant life cycle understanding through sequential observation (preschoolers are beginning to comprehend that living things change over time in predictable ways)', howWeAddress: 'garden worksheets that illustrate the sequence from seed to sprout to plant to flower or fruit build temporal reasoning and scientific thinking, and pairing these worksheets with a real classroom planting activity makes the sequence personally observable and unforgettable' },
      { milestone: 'Garden vocabulary and tool identification (preschoolers are rapidly expanding their vocabulary and learn words fastest when they connect to hands-on experience)', howWeAddress: 'garden worksheets that name and illustrate seeds, soil, roots, stems, leaves, watering cans, shovels, rakes, and pots introduce science and tool vocabulary through the most sensory-rich context available, where every word can be paired with a real object children can hold' },
      { milestone: 'Counting and sorting with garden items (preschoolers are developing one-to-one correspondence and classification skills)', howWeAddress: 'garden counting worksheets where children count seeds, flowers, vegetables, and garden tools, and sorting worksheets where children classify items by type (tools versus plants) or color (red tomatoes versus green cucumbers) build math foundations through naturally appealing, colorful garden contexts' },
    ],
    differentiationNotes: 'For struggling preschoolers, focus on three immediately recognizable garden elements (seed, flower, watering can) and pair every worksheet with real objects \u2014 let children hold actual seeds, touch soil, and pour water while learning vocabulary; reduce counting to sets of three or fewer and simplify life cycle sequencing to two steps (seed and flower) before introducing sprout and fruit stages. For advanced preschoolers, introduce the full four-stage life cycle (seed, sprout, plant, flower/fruit) as a sequencing activity, challenge children to compare different plants by size, color, and growth speed, extend counting to ten or more items in a garden scene, and encourage garden journaling where children draw and describe their classroom plant at different growth stages using descriptive vocabulary.',
    parentTakeaway: 'Garden worksheets give preschool parents the most literally growable learning tool because planting a single seed with your child transforms every garden worksheet from a flat paper exercise into a living, evolving science project that your child checks on every morning with genuine excitement. The key strategy is impossibly simple: plant something together. A bean seed in a paper cup on a windowsill costs nothing, takes five minutes to set up, and gives your child weeks of observation, vocabulary practice, and counting opportunities as they measure growth, count leaves, and describe changes. When your child can sequence the stages from seed to plant, name the parts of a plant, and explain that plants need water, soil, and sunlight to grow, they have mastered foundational science concepts that many children do not encounter formally until first grade. Let your child help with any gardening you do \u2014 pulling weeds, watering flowers, picking vegetables \u2014 because every garden task is a vocabulary and science lesson disguised as outdoor play.',
    classroomIntegration: 'Garden worksheets anchor the most authentically living thematic unit in preschool because a classroom garden \u2014 even a few pots on a windowsill \u2014 transforms every worksheet concept into an observable, measurable, real-time experiment. Create a garden station with planted seeds, a daily watering schedule, and a growth observation chart where children draw what they see each day. Use garden coloring pages as morning arrival activities, incorporate counting worksheets into a small-group math rotation where children count real seeds, leaves, and flower petals, and connect life cycle sequencing worksheets to the classroom plants so children can match illustrated stages to what they observe growing in their own pots. A garden sensory table with soil, seeds, small tools, and magnifying glasses provides tactile exploration alongside vocabulary development. A classroom harvest celebration where children pick, count, and share vegetables or herbs from the classroom garden provides the most rewarding culminating activity of any preschool theme. The garden theme naturally spans weeks or months, providing the longest sustained observation project available in early childhood education.',
    assessmentRubric: [
      { skill: 'Garden vocabulary and identification', emerging: 'names one or two garden items like flower and seed from illustrations with teacher prompting', proficient: 'independently names six or more garden items including tools and plant parts, and describes what each is used for or where it is found', advanced: 'names 10+ garden items, categorizes them as tools versus plants versus soil elements, and describes the gardening process using connected sentences like first you dig a hole, then you put in the seed, then you cover it with soil and water it' },
      { skill: 'Garden life cycle sequencing', emerging: 'identifies a seed and a flower as different stages with teacher support', proficient: 'orders three life cycle stages correctly \u2014 seed, sprout, plant \u2014 and describes what happens at each stage', advanced: 'orders four or more stages including flower and fruit, explains what plants need to grow using specific vocabulary like sunlight, water, and nutrients, and connects stages to classroom garden observations' },
      { skill: 'Counting and sorting garden items', emerging: 'counts to 3 garden items with one-to-one correspondence using physical pointing', proficient: 'counts to 7 garden items reliably, sorts items into two categories like tools and plants, and compares groups using more and fewer', advanced: 'counts to 10+, sorts by multiple attributes like color and type simultaneously, and uses garden contexts in simple addition like four carrots and three tomatoes is seven vegetables' },
    ],
  },

  // ── Household ─────────────────────────────────────────────────────────
  {
    name: 'household',
    uniqueGradeAngle: 'Preschool is the most domestically immersive stage for household worksheets because three- and four-year-olds are in the critical period of understanding their home environment \u2014 they are transitioning from passively existing within household spaces to actively noticing, naming, and participating in the routines, objects, and organization of the rooms they inhabit every day. Household worksheets are uniquely powerful at the preschool level because they teach through the most universally familiar context available \u2014 every child has a bed, a table, dishes, and towels, meaning every household vocabulary word connects instantly to personal experience without any abstraction gap. The daily routine dimension adds a temporal learning layer that few other themes can match \u2014 morning routines, mealtime sequences, and bedtime rituals give preschoolers their earliest framework for understanding sequential order, time management, and personal responsibility, all taught through activities they already perform every single day.',
    developmentalMilestones: [
      { milestone: 'Household object identification and room classification (preschoolers are developing the ability to name common objects and sort them by location and function)', howWeAddress: 'household worksheets where children identify cups, plates, beds, lamps, towels, and brooms and sort them into kitchen, bedroom, bathroom, and living room categories build classification skills through the most experientially familiar objects available, reinforcing that every object has a place and a purpose' },
      { milestone: 'Daily routine sequencing and temporal reasoning (preschoolers are developing the ability to understand that events happen in a predictable order)', howWeAddress: 'household routine worksheets where children sequence morning activities like wake up, get dressed, eat breakfast, brush teeth build the procedural thinking and temporal awareness that support all later learning about order, planning, and time management' },
      { milestone: 'Spatial vocabulary through room navigation (preschoolers are developing positional language using objects they physically interact with daily)', howWeAddress: 'household worksheets that show objects on shelves, under tables, next to beds, and behind doors teach spatial prepositions through contexts that children can immediately verify by looking at the real furniture in their own homes and classrooms' },
    ],
    differentiationNotes: 'For struggling preschoolers, focus on five immediately recognizable household items (bed, chair, cup, spoon, towel) and use real classroom or play items alongside worksheets so children can hold each object while learning its name; reduce routine sequencing to two steps (wake up, eat breakfast) before introducing longer chains, and simplify room sorting to two categories (kitchen things and bedroom things). For advanced preschoolers, introduce multi-room sorting with four or more categories, challenge children to sequence five-step daily routines and explain why order matters (you get dressed before you go outside because you need warm clothes), extend counting to household scenes with ten or more objects, and encourage descriptive language where children describe household items using multiple attributes like the big blue cup on the top shelf.',
    parentTakeaway: 'Household worksheets give preschool parents the most effortlessly integrated learning tool because your home is the worksheet \u2014 every object your child uses, every room they walk through, and every routine they follow is a vocabulary, classification, and sequencing lesson that requires zero extra materials or preparation. The key strategy is to narrate daily routines: say first we wake up, then we get dressed, then we eat breakfast, then we brush our teeth as you move through the morning, turning your existing routine into a sequencing lesson that directly mirrors worksheet activities. Ask your child to help set the table and count the plates, sort laundry by color, or put toys back on the correct shelf \u2014 these are classification and counting exercises disguised as household chores. When your child can name the rooms in your home, describe which objects belong in each room, and sequence their daily routine from morning to bedtime, they have mastered spatial awareness, classification, and temporal reasoning through the most personally authentic context possible.',
    classroomIntegration: 'Household worksheets anchor the most universally relatable thematic unit in preschool because every child comes from a home, and the classroom itself functions as a shared household where children eat snacks, clean up, organize materials, and follow daily routines. Connect household worksheets to the classroom daily schedule by naming and sequencing classroom routines alongside home routine worksheets. Create a dramatic play house area with play kitchen items, dolls, beds, and cleaning tools that children use to practice household vocabulary and routines from worksheets. Use household coloring pages as morning arrival activities, incorporate sorting worksheets into a small-group classification rotation where children sort real classroom objects by area (art supplies here, books here, blocks here), and connect counting worksheets to snack time where children count plates, cups, and napkins. A classroom helper chart where children are assigned daily household-style tasks (table setter, plant waterer, shelf organizer) reinforces the responsibility and routine concepts from worksheets through authentic daily practice. The clean-up routine at the end of each activity period is the most organic household worksheet extension \u2014 children practice sorting, spatial vocabulary, and sequential procedures every single day.',
    assessmentRubric: [
      { skill: 'Household object identification and vocabulary', emerging: 'names two or three common household items like cup and bed from illustrations with teacher prompting', proficient: 'independently names eight or more household items, describes what each is used for, and identifies which room each belongs in', advanced: 'names 12+ household items, categorizes them by room and function, and describes items using multiple attributes like the tall wooden bookshelf in the living room holds all our picture books' },
      { skill: 'Daily routine sequencing', emerging: 'identifies the first step in a two-step routine with picture support like first we wake up', proficient: 'orders a four-step daily routine correctly and uses the words first, then, next, and last to describe the sequence', advanced: 'sequences five or more routine steps, explains why order matters for specific steps, and describes both morning and bedtime routines using complete sentences with temporal vocabulary' },
      { skill: 'Household room classification', emerging: 'sorts household items into two room categories with teacher modeling', proficient: 'independently sorts items into three or more room categories with consistent accuracy and explains why each item belongs in its room', advanced: 'sorts by room and by function, identifies items that could belong in multiple rooms and explains why, and describes room contents using spatial vocabulary like the towels go on the rack next to the sink in the bathroom' },
    ],
  },

  // ── Jobs ──────────────────────────────────────────────────────────────
  {
    name: 'jobs',
    uniqueGradeAngle: 'Preschool is the most role-play-driven stage for jobs worksheets because three- and four-year-olds are in the golden age of pretend play \u2014 they naturally adopt roles like doctor, firefighter, teacher, and chef during free play, and jobs worksheets provide the vocabulary, tools knowledge, and scenario understanding that make this spontaneous dramatic play richer, more accurate, and more linguistically complex. Jobs worksheets are uniquely powerful at the preschool level because they introduce the foundational concept that people in a community have different roles with different tools, uniforms, and responsibilities \u2014 a concept that builds social awareness, vocabulary, and the earliest understanding of interdependence and cooperation. The uniform and tool dimension provides the most visually distinctive classification framework for preschoolers because each job comes with immediately recognizable visual markers \u2014 a firefighter has a helmet and hose, a doctor has a stethoscope, a chef has a tall hat and apron \u2014 making job identification and matching activities feel like a game of visual detective work.',
    developmentalMilestones: [
      { milestone: 'Community helper identification through visual cues (preschoolers are developing the ability to recognize and name people by their roles, uniforms, and tools)', howWeAddress: 'jobs worksheets where children identify firefighters, doctors, teachers, police officers, mail carriers, and farmers by their distinctive uniforms and tools build visual discrimination and vocabulary simultaneously, teaching children that appearance provides information about what people do' },
      { milestone: 'Tool-to-job matching and functional reasoning (preschoolers are developing the ability to connect objects to their purposes and users)', howWeAddress: 'jobs worksheets where children match stethoscopes to doctors, hoses to firefighters, and spatulas to chefs build the functional reasoning that supports all later understanding of cause-and-effect relationships and purposeful design' },
      { milestone: 'Community awareness and social understanding (preschoolers are developing awareness that the world extends beyond their family and that many people contribute to daily life)', howWeAddress: 'jobs worksheets that show community helpers working together introduce the concept of interdependence \u2014 the farmer grows food, the truck driver delivers it, the store worker sells it \u2014 building the social comprehension that supports cooperative behavior and gratitude' },
    ],
    differentiationNotes: 'For struggling preschoolers, focus on four immediately recognizable community helpers (firefighter, doctor, teacher, police officer) and use real props like a toy stethoscope, fire hat, or badge alongside worksheets so children can physically try on the role while learning; simplify matching to one tool per job and use large, bold illustrations with minimal background detail. For advanced preschoolers, introduce eight or more community helpers including less visible roles like librarian, mechanic, and veterinarian, challenge children to explain what each helper does using complete sentences, extend tool matching to multiple tools per job, and encourage community mapping activities where children identify which helpers they might encounter on a trip to the grocery store, the hospital, or the fire station.',
    parentTakeaway: 'Jobs worksheets give preschool parents the most naturally observable real-world learning tool because community helpers are everywhere \u2014 every time you visit a doctor, see a mail carrier, pass a fire truck, or interact with a store clerk, your child is witnessing worksheet vocabulary in action. The key strategy is to narrate community encounters: when you see a mail carrier, say look, that is a mail carrier \u2014 they bring letters and packages to every house, just like we learned on our worksheet. When your child pretends to be a doctor with a toy stethoscope or builds a fire station with blocks, they are reinforcing the job vocabulary and role understanding from worksheets through the most developmentally powerful learning mode available \u2014 dramatic play. Ask your child what do you want to be when you grow up and why \u2014 this question builds expressive language, reasoning, and self-concept simultaneously. The magic of jobs worksheets at this age is that every outing becomes a community helper scavenger hunt where your child spots and names the workers who keep the world running.',
    classroomIntegration: 'Jobs worksheets anchor the most dramatically playable thematic unit in preschool because every job introduced on a worksheet can be immediately acted out in a dramatic play area stocked with role-appropriate props. Create a rotating community helper station with costumes and tools \u2014 one week a doctor\u2019s office with lab coats and toy stethoscopes, the next week a post office with envelopes, stamps, and a mailbag, the following week a restaurant with aprons, menus, and play food. Use jobs coloring pages as morning arrival activities, incorporate matching worksheets into a small-group cognitive rotation where children pair tools to workers, and connect classification worksheets to a community helpers wall where children add illustrations of each helper they learn about. A community helper visit where a real firefighter, nurse, or police officer comes to the classroom and brings their actual tools provides the most powerful worksheet-to-reality connection available. A weekly helper of the week focus lets children dive deep into one role, learning vocabulary, tools, and responsibilities before moving to the next.',
    assessmentRubric: [
      { skill: 'Community helper identification', emerging: 'names one or two community helpers like doctor and firefighter from illustrations with teacher prompting', proficient: 'independently names six or more community helpers, identifies their uniforms, and describes what each does using simple sentences', advanced: 'names 10+ community helpers including less common roles, explains how different helpers work together in a community, and describes a helper\u2019s daily work using multiple connected sentences' },
      { skill: 'Tool-to-job matching', emerging: 'matches one tool to one helper with teacher support like the hose goes with the firefighter', proficient: 'independently matches tools to four or more helpers and explains why each tool is needed', advanced: 'matches multiple tools per job, identifies tools that multiple helpers share, and explains the function of each tool using sentences like the stethoscope helps the doctor listen to your heart to check if it is healthy' },
      { skill: 'Jobs vocabulary and role-play language', emerging: 'uses one job title during pretend play with teacher modeling', proficient: 'uses four or more job titles correctly, incorporates tool names into play, and acts out basic job scenarios with appropriate vocabulary', advanced: 'creates extended dramatic play scenarios using job vocabulary, assigns roles to peers, and narrates community helper interactions using complete sentences and sequential actions' },
    ],
  },

  // ── Music ─────────────────────────────────────────────────────────────
  {
    name: 'music',
    uniqueGradeAngle: 'Preschool is the most rhythmically uninhibited stage for music worksheets because three- and four-year-olds respond to music with their entire bodies \u2014 they cannot hear a beat without moving to it, cannot hear a song without singing along, and cannot see an instrument without wanting to play it \u2014 making music worksheets the most kinesthetically engaging theme available because every illustration of a drum invites air-drumming and every picture of a maraca triggers shaking motions. Music worksheets are uniquely powerful at the preschool level because they combine pattern recognition (repeating rhythm sequences are the earliest form of algebraic thinking), counting (how many drums, how many notes), vocabulary expansion (instrument names are novel, exciting words that children love to learn), and fine motor development (coloring detailed instrument shapes builds precision) into one auditorily rich context. The emotional dimension of music at the preschool level is uniquely powerful \u2014 music is how preschoolers process joy, excitement, and comfort, and connecting this deep emotional experience to structured worksheets creates learning moments that are felt rather than merely completed.',
    developmentalMilestones: [
      { milestone: 'Instrument identification and naming (preschoolers are rapidly expanding their vocabulary and are fascinated by objects that produce interesting sounds)', howWeAddress: 'music worksheets that illustrate and name drums, tambourines, xylophones, bells, maracas, triangles, and guitars introduce a vocabulary set that is both novel and intrinsically exciting, and pairing worksheets with real or toy instruments means every word can be immediately heard and experienced' },
      { milestone: 'Rhythm pattern recognition as pre-algebraic thinking (preschoolers are beginning to identify and extend simple repeating sequences)', howWeAddress: 'music pattern worksheets where children continue sequences like drum-bell-drum-bell introduce the AB pattern concept that is the foundation of all algebraic reasoning, taught through the most naturally rhythmic and engaging medium available' },
      { milestone: 'Sound classification and auditory discrimination (preschoolers are developing the ability to distinguish and categorize different types of sounds)', howWeAddress: 'music worksheets where children sort instruments by loud versus quiet, high versus low, or shaking versus hitting build the auditory discrimination skills that support phonemic awareness and reading readiness, connecting music learning directly to literacy foundations' },
    ],
    differentiationNotes: 'For struggling preschoolers, focus on three immediately recognizable instruments (drum, bell, maraca) and provide real or toy versions of each instrument so children can hear and feel what they see on worksheets; reduce pattern activities to simple two-element AB patterns and use physical clapping or tapping alongside worksheet patterns so children experience rhythm kinesthetically before representing it visually. For advanced preschoolers, introduce six or more instruments including guitar, piano, and flute, challenge children with three-element ABC patterns, extend counting to groups of ten or more instruments, and encourage instrument family sorting where children group instruments by how they produce sound (hit, shake, blow, strum).',
    parentTakeaway: 'Music worksheets give preschool parents the most joyfully effortless learning tool because your child already loves music \u2014 every song you sing together, every pot-and-spoon drum session, and every dance party in the living room is a rhythm, pattern, and vocabulary lesson that feels like pure fun. The key strategy is to make music visible: after a worksheet about drums, find a drum to play together (or flip over a pot and use a wooden spoon). Name the instruments you hear in songs, count the beats in a clapping pattern, and ask your child to continue a rhythm you start. The pattern recognition that music worksheets develop \u2014 understanding that drum-bell-drum-bell repeats and predicting what comes next \u2014 is the exact same cognitive skill that underlies reading patterns, number patterns, and eventually algebra. When your child can name five instruments, clap back a simple rhythm pattern, and sort instruments by the type of sound they make, they have developed auditory discrimination, pattern thinking, and vocabulary through the most universally beloved context possible. Music is the only theme where learning and dancing are the same thing.',
    classroomIntegration: 'Music worksheets anchor the most auditorily immersive and physically engaging thematic unit in preschool because every worksheet concept can be immediately demonstrated with real sound \u2014 a picture of a drum becomes a real drumbeat, a pattern on paper becomes a clapped rhythm, and an instrument name becomes a sound that fills the classroom. Create a music exploration station with child-safe instruments (tambourines, maracas, bells, xylophones, rhythm sticks) that children play during free choice time to reinforce vocabulary from worksheets. Use music coloring pages as morning arrival activities, incorporate pattern worksheets into a small-group math rotation where children build instrument patterns using real instruments or picture cards, and connect counting worksheets to a classroom orchestra activity where children count how many of each instrument the class has. A daily rhythm circle where children clap, tap, and stomp patterns builds the pattern recognition from worksheets through full-body engagement. A listening station with headphones and recordings of different instruments extends auditory discrimination beyond the classroom instrument collection. Music and movement transitions between activities \u2014 marching to the drums, tiptoeing to the triangle \u2014 integrate music vocabulary into every part of the school day.',
    assessmentRubric: [
      { skill: 'Instrument identification and vocabulary', emerging: 'names one or two instruments like drum and bell from illustrations with teacher prompting', proficient: 'independently names five or more instruments, describes the sound each makes, and identifies instruments by sound alone', advanced: 'names eight or more instruments, categorizes them by how they produce sound (hit, shake, blow, strum), and describes instruments using multiple attributes like the xylophone has colorful bars and you hit them with little hammers to make different notes' },
      { skill: 'Music pattern recognition', emerging: 'identifies that a two-element sequence repeats with teacher pointing like drum, bell, drum, bell', proficient: 'independently continues a two-element AB pattern using instrument cards or illustrations and names the repeating unit', advanced: 'continues AB and ABC patterns, creates original patterns, and describes the pattern rule using words like it goes drum, bell, maraca, then it starts over again' },
      { skill: 'Rhythm and auditory discrimination', emerging: 'claps along to a steady beat with teacher modeling', proficient: 'claps back a three-beat rhythm pattern and distinguishes loud from quiet and fast from slow instruments', advanced: 'reproduces four-beat rhythm patterns, identifies instruments by sound alone, and creates original rhythm patterns for classmates to repeat' },
    ],
  },

  // ── Numbers ───────────────────────────────────────────────────────────
  {
    name: 'numbers',
    uniqueGradeAngle: 'Preschool is the most numerically foundational stage for number worksheets because three- and four-year-olds are building the cognitive infrastructure that makes all later mathematics possible \u2014 they are learning that numbers are not just words to recite in order but represent actual quantities of real things, and this conceptual breakthrough from rote counting to genuine number sense is the single most important mathematical development of the entire early childhood period. Number worksheets are uniquely powerful at the preschool level because they make the abstract concept of quantity visible and touchable \u2014 when a child counts three stars on a page and then writes the numeral 3, they are building the symbolic bridge between physical objects and mathematical notation that every future math operation depends upon. The developmental timing is critical because preschoolers are in the optimal window for establishing one-to-one correspondence, the understanding that each object gets counted exactly once, which is the prerequisite skill without which addition, subtraction, and all subsequent math concepts cannot develop.',
    developmentalMilestones: [
      { milestone: 'One-to-one correspondence and meaningful counting (preschoolers are transitioning from rote number recitation to understanding that each number word corresponds to exactly one object)', howWeAddress: 'number worksheets where children point to and count objects one at a time, then circle or color the matching numeral, build the foundational counting skill that every mathematical operation depends upon, transforming memorized number sequences into genuine quantitative understanding' },
      { milestone: 'Numeral recognition and symbol-quantity connection (preschoolers are learning to recognize written numerals and connect them to the quantities they represent)', howWeAddress: 'number worksheets that pair the numeral 5 with five illustrated objects, or ask children to draw three circles next to the numeral 3, build the symbolic literacy that allows children to understand written mathematics rather than relying solely on verbal counting' },
      { milestone: 'Quantity comparison and early number sense (preschoolers are developing the ability to determine which group has more, fewer, or the same number of items)', howWeAddress: 'number comparison worksheets where children look at two groups of objects and identify which has more or fewer build the comparative reasoning and number sense that directly support later understanding of greater than, less than, addition, and subtraction' },
    ],
    differentiationNotes: 'For struggling preschoolers, focus on numbers one through five before introducing six through ten, use physical manipulatives (blocks, buttons, bears) alongside every worksheet so children can build each quantity before counting it on paper, and provide large numeral tracing guides with directional arrows showing where to start and which way to move the crayon. For advanced preschoolers, extend the number range to fifteen or twenty, introduce simple number-after and number-before activities (what comes after seven?), challenge children with basic addition within five using picture-supported problems (three birds plus two birds), and encourage number writing fluency where children write numerals from memory rather than tracing.',
    parentTakeaway: 'Number worksheets give preschool parents the most fundamentally important academic tool because number sense developed between ages three and five is the single strongest predictor of later math achievement \u2014 stronger than any other early learning variable including letter knowledge or general intelligence. The key insight is that counting things matters far more than counting out loud: a child who can recite numbers to twenty but cannot hand you exactly four crackers when asked has memorized a sequence without understanding quantity. After every number worksheet, practice counting real things: count the stairs as you climb them, count the grapes on the plate, count the books before bedtime. Ask your child to give you a specific number of items \u2014 can you bring me three blocks? \u2014 because this task requires them to count out a quantity and stop, which is dramatically harder than simply counting upward. When your child can count objects to ten with one-to-one correspondence, recognize written numerals, and compare two groups to determine which has more, they have built the mathematical foundation that all elementary math depends upon.',
    classroomIntegration: 'Number worksheets anchor the most mathematically essential thematic unit in preschool because number sense is not just one skill among many \u2014 it is the prerequisite for every mathematical concept children will encounter for the rest of their education. Integrate number practice into every classroom transition: count children at circle time, count snack items at each place, count steps from the carpet to the door, and count books during clean-up. Use number coloring pages as morning arrival activities, incorporate counting worksheets into a daily small-group math rotation with manipulatives (bears, cubes, buttons) that children count and match to printed quantities, and connect numeral recognition to a classroom number wall where each numeral is displayed with its matching quantity of objects. A daily counting collection where children bring a small item from home and the class counts the growing collection builds genuine excitement around quantities. Calendar time where children count the days, identify the date numeral, and compare yesterday\u2019s number to today\u2019s provides daily authentic numeral recognition practice. Number hunts where children find and name numerals around the classroom connect symbolic recognition to environmental print.',
    assessmentRubric: [
      { skill: 'Counting with one-to-one correspondence', emerging: 'counts to 3 objects with physical pointing and occasional skipping or double-counting', proficient: 'counts to 7 objects reliably with consistent one-to-one correspondence and stops at the target number', advanced: 'counts to 10+ objects without errors, counts out a specific requested quantity from a larger group, and counts objects in different arrangements including scattered layouts' },
      { skill: 'Numeral recognition and writing', emerging: 'recognizes numerals 1, 2, and 3 with teacher support and traces them with hand-over-hand assistance', proficient: 'independently recognizes numerals 1 through 7, matches each to its quantity, and traces all numerals with correct formation', advanced: 'recognizes numerals 1 through 10 or beyond, writes most numerals from memory without tracing, and identifies numerals in environmental contexts like page numbers and clocks' },
      { skill: 'Quantity comparison', emerging: 'identifies which of two very different groups has more with teacher prompting like this pile is bigger', proficient: 'compares two groups of up to 7 objects and correctly uses the words more, fewer, and same', advanced: 'compares groups up to 10, explains reasoning using counting like this group has 6 and this group has 4 so this one has more, and identifies how many more one group has than the other' },
    ],
  },
];

// ── Injection ────────────────────────────────────────────────────────────

let successCount = 0;

for (const theme of themes) {
  const filePath = path.join(BASE, theme.name, 'en.ts');
  let content = fs.readFileSync(filePath, 'utf8');

  // Detect line endings
  const nl = content.includes('\r\n') ? '\r\n' : '\n';

  // Build injection block
  const injection = buildInjection(theme, nl);

  // Pattern: end of faq array ], then close preschool }, then 'kindergarten':
  // Uses a regex that handles both \n and \r\n
  const pattern = /(      \],)\r?\n(    \},)\r?\n(    'kindergarten':)/;

  if (!pattern.test(content)) {
    console.error(`ERROR: Injection pattern not found in ${theme.name}/en.ts`);
    process.exit(1);
  }

  // Check if already injected
  if (content.includes("uniqueGradeAngle: '") && content.indexOf("uniqueGradeAngle: '") < content.indexOf("'kindergarten':")) {
    console.log(`SKIP: ${theme.name}/en.ts already has uniqueGradeAngle in preschool section`);
    continue;
  }

  content = content.replace(pattern, `$1${nl}${injection}${nl}$2${nl}$3`);

  fs.writeFileSync(filePath, content, 'utf8');
  successCount++;
  console.log(`OK: Injected 6 preschool fields into ${theme.name}/en.ts`);
}

console.log(`\nDone! ${successCount} of ${themes.length} themes enriched.`);
