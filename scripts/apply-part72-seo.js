/**
 * SEO Part 72: Enrich kindergarten grade for ocean, pets, pirates, robots, school
 * Adds 6 grade-level enrichment fields to gradeContent.kindergarten for each theme.
 * Fields: uniqueGradeAngle, developmentalMilestones, differentiationNotes,
 *         parentTakeaway, classroomIntegration, assessmentRubric
 */
const fs = require('fs');
const path = require('path');

const BASE = path.join(__dirname, '..', 'frontend', 'content', 'themes');

// Escape single quotes for TS single-quoted strings
function esc(s) {
  return s.replace(/'/g, "\\'");
}

function buildInjection(data, nl) {
  const lines = [];
  lines.push(`      uniqueGradeAngle: '${esc(data.uniqueGradeAngle)}',`);
  lines.push(`      developmentalMilestones: [`);
  for (const m of data.developmentalMilestones) {
    lines.push(`        { milestone: '${esc(m.milestone)}', howWeAddress: '${esc(m.howWeAddress)}' },`);
  }
  lines.push(`      ],`);
  lines.push(`      differentiationNotes: '${esc(data.differentiationNotes)}',`);
  lines.push(`      parentTakeaway: '${esc(data.parentTakeaway)}',`);
  lines.push(`      classroomIntegration: '${esc(data.classroomIntegration)}',`);
  lines.push(`      assessmentRubric: [`);
  for (const r of data.assessmentRubric) {
    lines.push(`        { skill: '${esc(r.skill)}', emerging: '${esc(r.emerging)}', proficient: '${esc(r.proficient)}', advanced: '${esc(r.advanced)}' },`);
  }
  lines.push(`      ],`);
  return lines.join(nl);
}

// ── Theme content ────────────────────────────────────────────────────────

const themes = [
  // ── Ocean ──────────────────────────────────────────────────────────
  {
    name: 'ocean',
    uniqueGradeAngle: 'Kindergarten is the most oceanographically wondrous stage for ocean worksheets because five- and six-year-olds are developing the classification skills, spatial reasoning, and scientific vocabulary to explore the ocean as an organized ecosystem with distinct zones, diverse creatures, and interconnected food webs \u2014 they can sort marine animals by type (fish, mammals, invertebrates), understand that the ocean has different depth zones where different creatures live, and grasp that ocean food chains connect tiny plankton to enormous whales through a sequence of who eats whom. Ocean worksheets are uniquely powerful at the kindergarten level because children can now engage with marine animal classification by physical features and habitat (sorting creatures by whether they have fins, shells, tentacles, or flippers and matching them to ocean zones like coral reef, deep sea, tide pool, and open ocean), ocean food chains and ecosystem interdependence (sequencing marine food chains from algae to small fish to larger predators and understanding that removing one link affects the entire chain), ocean geography and depth zone science (learning that the ocean has layers from the sunny surface to the dark deep sea and that different creatures are adapted to different zones), and conservation awareness about ocean health (understanding that pollution, overfishing, and climate change threaten marine ecosystems and that everyone can help protect the ocean). The scale dimension is especially significant at the kindergarten level because the ocean is the largest ecosystem on Earth \u2014 covering more than seventy percent of the planet \u2014 and ocean worksheets introduce kindergarteners to the concept that Earth has systems far larger than anything they can see, building the sense of wonder and environmental responsibility that supports lifelong scientific curiosity.',
    developmentalMilestones: [
      { milestone: 'Marine animal classification and ocean zone understanding (kindergarteners are developing the categorical reasoning to sort ocean creatures by features and match them to habitats)', howWeAddress: 'ocean worksheets where children classify marine animals by type (fish have gills and scales, mammals breathe air and nurse young, invertebrates have no backbone), match creatures to ocean zones (clownfish in coral reefs, anglerfish in the deep sea, crabs in tide pools), and compare animals by size, diet, and adaptations build the classification thinking and habitat science that connect creature features to their environments' },
      { milestone: 'Ocean food chains and ecosystem connections (kindergarteners are developing the sequential and causal reasoning to understand marine interdependence)', howWeAddress: 'ocean worksheets where children build ocean food chains from phytoplankton to zooplankton to small fish to larger predators, predict what happens when one link is removed, and identify herbivores, carnivores, and omnivores in the ocean build the systems thinking and ecological reasoning that form the foundation of marine science' },
      { milestone: 'Ocean conservation and environmental awareness (kindergarteners are developing the empathy and understanding to recognize that human actions affect ocean health)', howWeAddress: 'ocean worksheets where children identify threats to ocean ecosystems like plastic pollution, oil spills, and overfishing, discuss how these threats affect marine animals, and brainstorm ways to help protect the ocean build the environmental literacy and conservation ethic that empower children to see themselves as ocean stewards' },
    ],
    differentiationNotes: 'For struggling kindergarteners, focus on eight familiar ocean animals (dolphin, shark, octopus, sea turtle, clownfish, whale, crab, jellyfish) with clear photographs, simplify classification to two groups (fish versus not-fish), reduce food chains to two links (small fish eats algae, big fish eats small fish), and use ocean animal figurines with a blue fabric ocean for hands-on sorting alongside worksheets. For advanced kindergarteners, introduce fifteen or more marine creatures across all animal groups including less familiar species like nautilus, sea cucumber, and manta ray, challenge children to classify using multiple features simultaneously (backbone versus no backbone AND breathing method), build food chains with four or more links across different ocean zones, introduce the concept of ocean currents and how they move nutrients and creatures, and encourage an ocean research project where children investigate one marine animal in depth and create an informational poster with habitat, diet, adaptations, and conservation status.',
    parentTakeaway: 'Ocean worksheets give kindergarten parents the most awe-inspiringly educational science learning tool because the ocean combines everything children love \u2014 amazing creatures, hidden worlds, and the thrill of discovery \u2014 with rigorous science concepts like classification, food chains, habitats, and conservation. The key strategy is to bring the ocean into everyday learning even if you live far from the coast: watch age-appropriate ocean documentaries together and pause to identify creatures and discuss their features, visit aquariums and practice classification (point out which animals are fish, which are mammals, and which are invertebrates), read ocean books and build food chains with the creatures you learn about, and discuss ocean conservation by connecting everyday actions like reducing plastic use to protecting marine life. When your child can name fifteen marine animals and classify them by type, build an ocean food chain with three or more links, describe two or more ocean zones and which creatures live there, and explain one way humans can help protect the ocean, they have built the classification, ecological reasoning, and conservation awareness that ocean worksheets teach through the most magnificently vast ecosystem on Earth.',
    classroomIntegration: 'Ocean worksheets anchor the most immersively engaging science unit in kindergarten because the ocean provides endless opportunities for teaching classification, food chains, habitats, geography, and conservation within a theme that naturally captivates children\u2019s imaginations. Create a classroom ocean zone display with three sections (sunny zone, twilight zone, dark zone) where children place animal cards in the correct zone as they learn about each creature. Use classification worksheets during science centers with ocean animal figurines that children sort by features, incorporate food chain worksheets into a hands-on activity where children build chains with picture cards and discuss what happens when links are removed. Connect ocean geography worksheets to a world map showing where different ocean habitats exist. An ocean vocabulary wall with terms like marine, coral reef, predator, plankton, and conservation builds science language. An ocean creature of the week where children learn about a new animal each week with an observation worksheet builds sustained marine knowledge. A class ocean encyclopedia where each child contributes a page about a different marine animal with illustrations, habitat information, and food chain connections creates a collaborative science reference. An ocean conservation pledge wall where children add specific actions they will take to protect the ocean connects learning to personal responsibility.',
    assessmentRubric: [
      { skill: 'Marine animal classification and ocean zones', emerging: 'names four or five ocean animals and identifies them as living in the sea with teacher prompting', proficient: 'names fifteen or more marine animals, classifies them by type such as fish, mammal, and invertebrate using observable features, and matches creatures to the correct ocean zone', advanced: 'classifies marine animals using multiple features simultaneously, explains how creature adaptations suit their specific ocean zone, and compares marine habitats by the types of organisms found there' },
      { skill: 'Ocean food chains and ecological reasoning', emerging: 'identifies one ocean animal that eats another with teacher guidance', proficient: 'builds ocean food chains with three or more links, identifies what each animal eats, and predicts what happens when one link is removed from the chain', advanced: 'constructs multiple ocean food chains showing interconnections, explains the role of producers like phytoplankton in sustaining all ocean life, and describes how energy flows through a marine ecosystem' },
      { skill: 'Ocean conservation and environmental awareness', emerging: 'names one thing that can hurt ocean animals like trash with teacher support', proficient: 'identifies three or more threats to ocean health such as pollution, overfishing, and habitat destruction, explains how each threat affects marine animals, and names two or more actions people can take to help', advanced: 'connects everyday human behaviors to ocean health consequences, designs a conservation plan with specific actions and explains why each matters, and writes persuasive sentences about why protecting the ocean is important' },
    ],
  },

  // ── Pets ───────────────────────────────────────────────────────────
  {
    name: 'pets',
    uniqueGradeAngle: 'Kindergarten is the most responsibly empathetic stage for pet worksheets because five- and six-year-olds are developing the caregiving awareness, classification skills, and emotional understanding to engage with pets not just as cuddly companions but as living creatures with specific needs, behaviors, and care requirements that depend on their species and characteristics. Pet worksheets are uniquely powerful at the kindergarten level because children can now engage with pet classification by species and care needs (sorting animals by type \u2014 mammals, birds, fish, reptiles \u2014 and matching each to its specific food, shelter, and exercise requirements), responsibility and daily care routines (understanding that pets need feeding, grooming, exercise, and veterinary care on a consistent schedule), pet behavior and communication (learning that animals communicate through body language, sounds, and behaviors rather than words, and that understanding these signals is part of responsible ownership), and comparative reasoning about pet suitability (discussing why different families choose different pets based on space, time, allergies, and lifestyle). The empathy dimension is especially significant at the kindergarten level because caring for a pet teaches children that other living beings have needs and feelings that may differ from their own \u2014 and learning to recognize and respond to an animal\u2019s needs builds the perspective-taking and responsibility skills that support all social-emotional development.',
    developmentalMilestones: [
      { milestone: 'Pet classification and species-specific knowledge (kindergarteners are developing the categorical reasoning to understand that different types of pets have fundamentally different needs)', howWeAddress: 'pet worksheets where children sort pets by animal type (mammals like dogs and cats, birds like parakeets, fish, reptiles like turtles), match each pet to its habitat needs (tank, cage, bed, terrarium), and identify what each type needs to eat and how to care for it build the classification thinking and life science knowledge that connect animal features to care requirements' },
      { milestone: 'Pet care routines and responsibility (kindergarteners are developing the sequential thinking and personal responsibility to understand that caring for a living creature requires consistent daily effort)', howWeAddress: 'pet worksheets where children sequence daily pet care routines (feed, water, clean, exercise, groom), identify age-appropriate care tasks they could do themselves, and explain why each care activity matters for the pet\u2019s health and happiness build the executive functioning, sequencing, and responsibility skills that transfer to all areas of life' },
      { milestone: 'Pet behavior, communication, and empathy (kindergarteners are developing the social-emotional awareness to recognize that animals have feelings and communicate differently than humans)', howWeAddress: 'pet worksheets where children identify pet emotions from body language (a wagging tail means happy, flattened ears mean scared), match behaviors to needs (barking at the door means wants to go outside), and discuss how to be gentle and respectful with animals build the empathy, observation, and perspective-taking skills that support both animal welfare understanding and social-emotional growth' },
    ],
    differentiationNotes: 'For struggling kindergarteners, focus on four common pets (dog, cat, fish, hamster) with clear photographs and simple care charts, simplify classification to pets that live in water versus on land, reduce care routines to three steps (feed, water, love), and use stuffed animal pets alongside worksheets for concrete caregiving practice. For advanced kindergarteners, introduce ten or more pet types including exotic pets like hermit crabs, guinea pigs, and leopard geckos with detailed care requirements, challenge children to compare care needs across species and explain why different pets need different things, extend writing to creating a complete pet care guide for a chosen animal, introduce the concept of pet adoption and responsible pet ownership including the commitment of time and resources, and encourage a pet research project where children investigate a pet they would like to have and present the care requirements, costs, and responsibilities to the class.',
    parentTakeaway: 'Pet worksheets give kindergarten parents the most emotionally engaging responsibility-building learning tool because whether your family has a pet, is considering one, or simply encounters animals in daily life, your kindergartener is at the perfect age to build genuine caregiving skills, empathy, and scientific understanding through pet-themed learning. The key strategy is to connect pet worksheets to real animal experiences: if you have a pet, involve your child in age-appropriate care tasks and discuss what the pet needs and why (we feed the dog every morning because animals need food to be healthy and strong), if you do not have a pet, visit pet stores, shelters, or friends with pets and practice observation skills (what is the cat doing and what does that body language tell us), read books about different types of pets and compare their needs, and discuss responsible pet ownership including the commitment involved. When your child can name eight or more pet types and describe what each needs, sequence a daily care routine for a specific pet, identify pet emotions from body language, and explain why pets depend on their owners for care, they have built the classification, responsibility, empathy, and life science skills that pet worksheets teach through the most emotionally resonant living creatures in a child\u2019s world.',
    classroomIntegration: 'Pet worksheets anchor the most emotionally engaging life science and social-emotional unit in kindergarten because pets connect directly to children\u2019s home lives and provide rich context for teaching classification, responsibility, empathy, and caregiving skills. If possible, maintain a classroom pet (fish are the most manageable option) that children help care for on a rotating schedule, connecting daily care tasks to responsibility worksheets. Use pet classification worksheets during science centers with animal figurines that children sort by type and match to habitat cards, incorporate care routine worksheets into dramatic play centers where children care for stuffed animal pets following the steps they learned. Connect pet behavior worksheets to a discussion about how we treat animals and each other with kindness and respect. A pet vocabulary wall with types of pets, care tools, and body language terms builds content-area language. A pet of the week presentation where children share about their family pet or a pet they researched builds speaking and listening skills. A class pet care manual where each child contributes a page about a different pet type with care instructions and illustrations creates a collaborative life science reference. A veterinarian dramatic play center where children examine stuffed animals and discuss their needs integrates science and social-emotional learning.',
    assessmentRubric: [
      { skill: 'Pet classification and species knowledge', emerging: 'names three or four pets and identifies one need like food with teacher prompting', proficient: 'names eight or more pet types, classifies them by animal group such as mammal, bird, fish, and reptile, and matches each to its specific habitat and diet requirements', advanced: 'compares care needs across multiple pet species, explains why different animals need different habitats and diets based on their biology, and evaluates which pets might be suitable for different family situations' },
      { skill: 'Pet care routines and responsibility', emerging: 'names one or two care tasks like feeding with teacher support', proficient: 'sequences a complete daily care routine for a specific pet including feeding, watering, cleaning, and exercise, identifies age-appropriate tasks they could do, and explains why consistent care matters', advanced: 'creates detailed care schedules for multiple pet types, compares care complexity across species, and explains the long-term commitment of pet ownership including veterinary care and emotional responsibility' },
      { skill: 'Pet behavior and empathy', emerging: 'identifies one pet emotion like happy from a picture with teacher guidance', proficient: 'identifies three or more pet emotions from body language, matches behaviors to needs, and explains how to be gentle and respectful with animals', advanced: 'interprets complex pet body language across species, explains why understanding pet communication prevents problems, and writes about how caring for animals builds empathy and responsibility' },
    ],
  },

  // ── Pirates ────────────────────────────────────────────────────────
  {
    name: 'pirates',
    uniqueGradeAngle: 'Kindergarten is the most imaginatively adventurous stage for pirate worksheets because five- and six-year-olds are developing the narrative thinking, spatial reasoning, and problem-solving skills to engage with pirate themes as both creative storytelling and genuine academic challenge \u2014 they can follow multi-step treasure map directions using spatial vocabulary, create original pirate stories with characters, settings, and plot sequences, and solve pirate-themed math problems involving counting treasure, sharing loot equally, and measuring distances on maps. Pirate worksheets are uniquely powerful at the kindergarten level because children can now engage with map reading and spatial reasoning (following directional instructions like three steps north and two steps east, creating simple maps with landmarks and routes, and understanding that maps represent real spaces from above), treasure counting and sharing math (counting coins and gems by groups, dividing treasure equally among pirates, solving addition and subtraction problems in treasure scenarios), creative storytelling and vocabulary building (inventing pirate adventures with beginning, middle, and end, learning vocabulary like compass, horizon, anchor, plank, and voyage), and problem-solving through pirate challenges (decoding simple messages, solving puzzles to find hidden treasure, following multi-step instructions in sequence). The adventure dimension is especially significant at the kindergarten level because the pirate theme gives children intrinsic motivation to practice skills they might otherwise find tedious \u2014 counting becomes treasure sorting, following directions becomes navigating to hidden treasure, and writing becomes creating their own adventure stories.',
    developmentalMilestones: [
      { milestone: 'Map reading and spatial reasoning (kindergarteners are developing the directional vocabulary and spatial awareness to understand that maps represent physical spaces and that directions can be followed systematically)', howWeAddress: 'pirate worksheets where children follow treasure map directions using terms like north, south, east, and west, create simple maps with landmarks and paths, and navigate grid-based maps by counting squares in each direction build the spatial reasoning and directional vocabulary that form the foundation of geography and mathematical coordinate thinking' },
      { milestone: 'Treasure math and equal sharing (kindergarteners are developing the counting, grouping, and fair-sharing skills that pirate treasure scenarios make irresistibly engaging)', howWeAddress: 'pirate worksheets where children count treasure by ones, twos, fives, and tens, divide treasure equally among crew members discovering early division concepts, and solve addition and subtraction story problems involving treasure found and treasure spent build the mathematical fluency and problem-solving skills that turn abstract arithmetic into exciting adventures' },
      { milestone: 'Pirate storytelling and adventure vocabulary (kindergarteners are developing the narrative skills and descriptive vocabulary to create original multi-part stories)', howWeAddress: 'pirate worksheets where children invent pirate characters with names, descriptions, and special abilities, sequence adventure stories with a problem and solution, and use vocabulary like compass, voyage, anchor, horizon, and treasure map in context build the narrative thinking, descriptive writing, and creative confidence that support all literacy development' },
    ],
    differentiationNotes: 'For struggling kindergarteners, focus on simple left-right-up-down directions on picture maps rather than cardinal directions, simplify treasure counting to within ten using plastic coins, reduce story work to sequencing three pre-made picture cards into order, and use a physical treasure hunt in the classroom where children follow picture-based clues alongside map worksheets. For advanced kindergarteners, introduce grid coordinate maps where children use number-letter pairs to locate treasure, extend treasure math to two-digit counting, grouping by tens, and multi-step word problems, challenge children to write original pirate adventure stories with dialogue and descriptive details, introduce the concept of real historical exploration and navigation (compasses, stars, maps), and encourage a pirate map design project where children create a detailed treasure island map with a legend, compass rose, landmarks, and a written set of directions for finding the treasure.',
    parentTakeaway: 'Pirate worksheets give kindergarten parents the most thrillingly motivating learning tool because the adventure theme turns every academic skill into a game your child cannot wait to play \u2014 and your kindergartener is at the perfect age to channel their love of imaginative play into genuine math, reading, writing, and spatial reasoning growth. The key strategy is to extend the adventure beyond worksheets: create a treasure hunt at home where your child follows written directions to find a small prize (practicing reading and spatial reasoning), count and sort loose change as pirate treasure (practicing math), draw a map of your home or yard with landmarks and a treasure location (practicing spatial reasoning and map skills), and co-create a pirate story where you take turns adding sentences (practicing narrative thinking). When your child can follow multi-step map directions using spatial vocabulary, count and divide treasure using addition and subtraction, create an original pirate story with a beginning, middle, and end, and use five or more adventure vocabulary words correctly, they have built the spatial reasoning, mathematical fluency, narrative skills, and vocabulary that pirate worksheets develop through the most irresistibly adventurous learning theme imaginable.',
    classroomIntegration: 'Pirate worksheets anchor the most motivationally powerful cross-curricular theme in kindergarten because pirate adventures naturally integrate math (counting treasure, equal sharing, measurement), literacy (storytelling, vocabulary, following written directions), social studies (maps, navigation, exploration), and problem-solving (puzzles, codes, multi-step challenges). Transform the classroom with a pirate ship dramatic play area complete with a ship\u2019s wheel, telescope, and treasure chest, where children use map worksheets to navigate and treasure math worksheets to count their finds. Use treasure counting worksheets during math centers with plastic coins and gems for concrete manipulation, incorporate map worksheets into a weekly classroom treasure hunt where children follow written clues to find a hidden object. Connect storytelling worksheets to a pirate journal where children write and illustrate ongoing adventure stories. A pirate vocabulary wall with illustrated adventure terms builds content-area language. A map skills center where children create and trade treasure maps teaches both spatial reasoning and communication. A class pirate adventure book where each child contributes a chapter creates a collaborative literacy project that children are genuinely excited to complete.',
    assessmentRubric: [
      { skill: 'Map reading and spatial reasoning', emerging: 'follows one-step directions like go to the table using picture clues with teacher guidance', proficient: 'follows multi-step treasure map directions using left, right, up, down, and basic cardinal directions, creates simple maps with three or more landmarks, and navigates grid maps by counting squares', advanced: 'uses grid coordinates to locate specific points, creates detailed maps with compass roses and legends, and writes multi-step directional instructions that another child can follow successfully' },
      { skill: 'Treasure math and equal sharing', emerging: 'counts treasure items to ten with one-to-one correspondence and teacher support', proficient: 'counts treasure by ones, twos, fives, and tens to fifty or more, divides treasure equally among two to four pirates, and solves addition and subtraction story problems in treasure contexts', advanced: 'solves multi-step treasure math problems involving counting, addition, subtraction, and equal sharing, works with two-digit numbers in treasure scenarios, and creates original treasure math problems for classmates to solve' },
      { skill: 'Pirate storytelling and adventure vocabulary', emerging: 'names a pirate character and tells one thing that happens with teacher prompting', proficient: 'creates an original pirate story with a character, problem, and solution, sequences events in logical order, and uses five or more adventure vocabulary words correctly', advanced: 'writes detailed pirate adventures with dialogue, descriptive language, and multiple plot events, uses ten or more vocabulary words in context, and creates stories that other children want to hear and respond to' },
    ],
  },

  // ── Robots ─────────────────────────────────────────────────────────
  {
    name: 'robots',
    uniqueGradeAngle: 'Kindergarten is the most computationally foundational stage for robot worksheets because five- and six-year-olds are developing the sequential thinking, logical reasoning, and precise instruction-giving skills that are the core of computational thinking \u2014 they can understand that robots follow exact instructions in exact order, that a missing or incorrect step causes a robot to fail, and that solving problems systematically by breaking them into smaller steps is how both robots and humans accomplish complex tasks. Robot worksheets are uniquely powerful at the kindergarten level because children can now engage with sequential instruction and algorithm thinking (writing step-by-step directions that a robot would follow exactly, understanding that order matters and that robots cannot guess what you mean), pattern recognition and coding concepts (identifying repeating patterns, understanding that programs are sequences of instructions, and beginning to use if-then reasoning at a basic level), robot design and engineering thinking (designing robots for specific purposes, identifying what features a robot needs to accomplish a task, and understanding that robots are built to solve specific problems), and human-robot comparison and technology awareness (understanding what robots can and cannot do, how robots help humans, and why robots need human programmers to function). The precision dimension is especially significant at the kindergarten level because robots demand exact, unambiguous instructions \u2014 and the process of writing directions precise enough for a robot to follow teaches kindergarteners the clear communication and logical sequencing that support all academic thinking.',
    developmentalMilestones: [
      { milestone: 'Sequential instruction and algorithmic thinking (kindergarteners are developing the ability to break tasks into ordered steps and understand that sequence matters)', howWeAddress: 'robot worksheets where children write step-by-step instructions for a robot to complete a task (walk to the door: step forward, turn left, step forward three times, stop), identify what goes wrong when steps are out of order or missing, and debug incorrect instruction sequences build the computational thinking and sequential reasoning that are foundational to both programming and everyday problem-solving' },
      { milestone: 'Pattern recognition and basic coding concepts (kindergarteners are developing the pattern-spotting and logical thinking that connect directly to programming fundamentals)', howWeAddress: 'robot worksheets where children identify and extend patterns in robot movement sequences, understand that robots repeat patterns exactly, and begin to use basic if-then reasoning (if the robot sees a wall, then turn right) build the pattern recognition and conditional logic that are the building blocks of all computer science' },
      { milestone: 'Robot design and engineering problem-solving (kindergarteners are developing the creative and analytical thinking to design solutions for specific problems)', howWeAddress: 'robot worksheets where children design robots for specific tasks (a robot that cleans, a robot that delivers mail, a robot that helps in the garden), identify what features each robot needs (wheels for moving, arms for grabbing, sensors for seeing), and explain their design choices build the engineering thinking and purposeful design skills that connect creativity to practical problem-solving' },
    ],
    differentiationNotes: 'For struggling kindergarteners, focus on three-step instruction sequences using picture-based direction cards (arrow up means step forward, curved arrow means turn), simplify pattern work to AB patterns with robot movement symbols, reduce robot design to adding features to a pre-drawn robot outline by circling needed parts, and use a classroom robot toy or a child acting as a robot alongside worksheets for concrete instruction practice. For advanced kindergarteners, extend instruction sequences to eight or more steps with conditional elements (if blocked, go around), challenge children to debug complex sequences by identifying and correcting multiple errors, introduce the concept of loops (repeat these three steps four times), extend robot design to detailed blueprints with labeled parts and written explanations of each feature\u2019s purpose, and encourage a class robot programming project where children create instruction cards that guide a classmate (acting as the robot) through an obstacle course.',
    parentTakeaway: 'Robot worksheets give kindergarten parents the most future-ready learning tool because computational thinking \u2014 the ability to break problems into steps, identify patterns, give precise instructions, and debug errors \u2014 is rapidly becoming as fundamental as reading and math, and your kindergartener is at the perfect age to build these thinking skills through playful robot-themed activities rather than screen-based coding. The key strategy is to practice robot thinking in everyday life: play the robot game where your child gives you exact step-by-step instructions to complete a task (make a sandwich, walk to the mailbox) and you follow them literally, including any mistakes (if they forget to say open the bread bag, you just stare at the closed bag \u2014 this teaches precision), build with construction toys and discuss what features their creation needs to work, identify patterns everywhere (tiles on the floor, songs on the radio, steps in a recipe), and discuss robots you encounter in daily life (automatic doors, self-checkout machines, robot vacuums). When your child can write a five-step instruction sequence that works correctly, identify and fix errors in a sequence, design a robot with features matched to a specific purpose, and explain how robots help humans, they have built the computational thinking, logical reasoning, and engineering skills that robot worksheets develop through the most futuristically exciting theme in education.',
    classroomIntegration: 'Robot worksheets anchor the most forward-looking STEM unit in kindergarten because computational thinking connects to math (sequencing, patterns, logic), literacy (precise instruction writing, following directions), and science (engineering design, technology understanding). Create a classroom coding center where children write instruction cards and test them by having a partner act as the robot following directions exactly, revealing any errors in the sequence. Use sequencing worksheets during math centers connected to pattern block activities where children create and extend robot movement patterns, incorporate robot design worksheets into an engineering center where children build robots from recyclable materials based on their designs. Connect debugging worksheets to a class game where the teacher gives deliberately wrong instructions and children identify and correct the errors. A robot vocabulary wall with terms like algorithm, sequence, debug, loop, and sensor builds technology literacy. A simple programmable robot toy (like Bee-Bot or similar) that children program alongside their worksheet instructions makes abstract concepts concrete. A class robot invention fair where children present their designed robots with explanations of features and purposes creates a culminating engineering project.',
    assessmentRubric: [
      { skill: 'Sequential instruction and algorithmic thinking', emerging: 'gives two or three steps in order for a simple task with teacher prompting', proficient: 'writes five or more step-by-step instructions in correct order for a robot to complete a task, identifies when a step is missing or out of order, and debugs a simple incorrect sequence by finding and fixing the error', advanced: 'writes eight or more step instructions with conditional elements, debugs complex sequences with multiple errors, and explains why precision and order matter in instruction-giving' },
      { skill: 'Pattern recognition and coding concepts', emerging: 'identifies a simple AB movement pattern and continues it for one repetition with teacher support', proficient: 'identifies, extends, and creates movement patterns with three or more elements, understands that robots repeat patterns exactly, and uses basic if-then reasoning to describe robot behavior', advanced: 'creates complex patterns with multiple elements and variations, explains the concept of loops as repeated instruction sets, and designs multi-step programs combining sequences, patterns, and simple conditionals' },
      { skill: 'Robot design and engineering thinking', emerging: 'names one feature a robot could have like wheels with teacher guidance', proficient: 'designs a robot for a specific task with three or more labeled features, explains why each feature is needed for the task, and describes how the robot would help humans', advanced: 'designs detailed robots with multiple systems working together, compares design choices and explains trade-offs, and evaluates existing robots by identifying their features and purposes' },
    ],
  },

  // ── School ─────────────────────────────────────────────────────────
  {
    name: 'school',
    uniqueGradeAngle: 'Kindergarten is the most school-aware stage for school worksheets because five- and six-year-olds are experiencing their first full year of formal education and are actively building the routines, social skills, spatial understanding, and metacognitive awareness to navigate school as both a physical environment and a learning community \u2014 they are learning where everything is and why (the library is for reading, the gym is for exercise, the nurse\u2019s office is for when you feel sick), how school rules create a safe learning environment for everyone, and that being a student means taking responsibility for their own learning behaviors. School worksheets are uniquely powerful at the kindergarten level because children can now engage with school environment mapping and spatial awareness (identifying school areas by function, navigating from classroom to library to cafeteria, and understanding that schools are organized purposefully), school rules and social expectations (understanding why rules like raise your hand, walk in the hallway, and take turns exist and how they help everyone learn and stay safe), school roles and community (identifying the different adults in school and what each does \u2014 teacher, principal, librarian, custodian, nurse, cafeteria worker \u2014 and understanding that a school community works because everyone contributes), and learning routines and self-regulation (understanding daily schedules, transitioning between activities, managing materials, and developing the habits of a successful student). The metacognitive dimension is especially significant at the kindergarten level because school worksheets help children think about what it means to be a learner \u2014 developing awareness of their own behavior, choices, and growth that supports all academic and social success.',
    developmentalMilestones: [
      { milestone: 'School environment and spatial navigation (kindergarteners are developing the spatial awareness and functional reasoning to understand their school as an organized system of purposeful spaces)', howWeAddress: 'school worksheets where children identify school areas and their functions (classroom for learning, library for books, cafeteria for eating, playground for exercise), create simple school maps, and explain why different activities happen in different places build the spatial reasoning and organizational thinking that help children feel confident and oriented in their school environment' },
      { milestone: 'School rules, safety, and social expectations (kindergarteners are developing the social reasoning to understand that rules exist to protect everyone and create a fair learning environment)', howWeAddress: 'school worksheets where children identify school rules, explain why each rule matters (we raise our hand so everyone gets a turn to speak, we walk in hallways so no one gets hurt), and distinguish between safe and unsafe school behaviors build the social awareness and self-regulation skills that create a positive learning community' },
      { milestone: 'School roles and learning routines (kindergarteners are developing the community awareness and self-management skills to understand how a school functions and how to be a successful student)', howWeAddress: 'school worksheets where children identify school helpers and their roles, sequence daily school routines (morning arrival, circle time, centers, lunch, recess, read-aloud, dismissal), and discuss what good learners do (listen, try their best, ask for help, be kind) build the community understanding and metacognitive awareness that support both academic achievement and social belonging' },
    ],
    differentiationNotes: 'For struggling kindergarteners, focus on five core school areas (classroom, library, cafeteria, playground, office) with photographs from their actual school when possible, simplify rules to three picture-based reminders (be safe, be kind, be a learner), reduce routine sequencing to three parts of the day (morning, middle, afternoon) with visual schedule cards, and use school building tour activities alongside worksheets so children physically experience the spaces they learn about. For advanced kindergarteners, introduce all school areas including specialized rooms like the computer lab, art room, and music room with detailed function descriptions, challenge children to create comprehensive school maps with labels and a legend, extend rule understanding to explaining consequences and creating fair rules for new situations, introduce the concept of school improvement (what would make our school even better), and encourage a school helper appreciation project where children interview school staff members and create thank-you cards that describe each person\u2019s role and contribution to the school community.',
    parentTakeaway: 'School worksheets give kindergarten parents the most practically essential transition learning tool because kindergarten is the year your child forms their foundational understanding of what school is, how it works, and who they are as a learner \u2014 and these initial impressions shape their academic identity and school attitude for years to come. The key strategy is to reinforce school concepts at home with positive framing: ask your child to describe their school day in sequence (what happened first, then what, then what \u2014 building narrative and sequencing skills), discuss school rules and connect them to family rules (we have rules at home too because they keep everyone safe and happy), talk about the different people at school and what each does (building community appreciation and social awareness), and most importantly, celebrate the learning behaviors rather than just the results (I am proud that you asked for help when the math was hard \u2014 that is what great learners do). When your child can describe five school areas and what each is for, explain three school rules and why they matter, name the adults in school and describe each role, and talk about their daily routine in sequence, they have built the spatial awareness, social understanding, community knowledge, and self-regulation skills that school worksheets develop through the most immediately relevant institution in their young lives.',
    classroomIntegration: 'School worksheets integrate seamlessly into the beginning-of-year kindergarten curriculum because understanding the school environment, rules, roles, and routines is the essential foundation for all subsequent learning. Use school mapping worksheets during the first weeks of school alongside actual building tours where children visit each area and discuss its purpose, incorporate school rules worksheets into the classroom community-building process where children help create and illustrate class agreements. Connect school roles worksheets to a school helpers unit where children learn about and thank each adult in the building, and use routine sequencing worksheets alongside the visual daily schedule that structures every kindergarten day. A school area photograph wall where children match labels to pictures of real school spaces builds environmental literacy. A class rules book where children illustrate and explain each rule in their own words creates shared ownership of expectations. A school helpers bulletin board where children display what they learned from interviewing staff builds community connections. A daily schedule review where children sequence picture cards of the day\u2019s activities builds temporal reasoning and self-management. These worksheets are especially effective in the first month of school but remain valuable for review after breaks and for supporting new students throughout the year.',
    assessmentRubric: [
      { skill: 'School environment and spatial awareness', emerging: 'names two or three school areas and identifies one thing that happens in each with teacher prompting', proficient: 'identifies five or more school areas, explains the purpose of each, creates a simple school map with labeled locations, and navigates common routes like classroom to library', advanced: 'creates detailed school maps with a legend and multiple landmarks, explains how school layout is designed purposefully, and compares their school to other types of buildings by function and organization' },
      { skill: 'School rules and social expectations', emerging: 'names one or two school rules from memory with teacher support', proficient: 'explains five or more school rules, describes why each rule matters for safety and fairness, and identifies safe versus unsafe school behaviors with reasoning', advanced: 'creates fair rules for new situations using the principles behind existing rules, explains how rules help everyone learn and feel included, and mediates simple peer disagreements by referencing shared expectations' },
      { skill: 'School roles and learning routines', emerging: 'names the teacher and one other school helper with teacher guidance', proficient: 'identifies five or more school adults by role, explains what each person does to help the school community, sequences the daily school routine correctly, and describes two or more habits of successful learners', advanced: 'explains how all school roles work together as a system, compares daily routines across different parts of the school year, creates detailed daily schedules from memory, and reflects on their own learning behaviors using metacognitive vocabulary' },
    ],
  },
];

// ── Injection ────────────────────────────────────────────────────────────

let successCount = 0;

for (const theme of themes) {
  const filePath = path.join(BASE, theme.name, 'en.ts');
  let content = fs.readFileSync(filePath, 'utf8');

  // Detect line endings
  const nl = content.includes('\r\n') ? '\r\n' : '\n';

  // Build injection block
  const injection = buildInjection(theme, nl);

  // Pattern: end of faq array ], then close kindergarten }, then 'first-grade':
  const pattern = /(      \],)\r?\n(    \},)\r?\n(    'first-grade':)/;

  if (!pattern.test(content)) {
    console.error(`ERROR: Injection pattern not found in ${theme.name}/en.ts`);
    process.exit(1);
  }

  // Check if already injected - look for uniqueGradeAngle between 'kindergarten': and 'first-grade':
  const kIdx = content.indexOf("'kindergarten':");
  const fgIdx = content.indexOf("'first-grade':");
  if (kIdx !== -1 && fgIdx !== -1) {
    const kindergartenSection = content.substring(kIdx, fgIdx);
    if (kindergartenSection.includes("uniqueGradeAngle:")) {
      console.log(`SKIP: ${theme.name}/en.ts already has uniqueGradeAngle in kindergarten section`);
      continue;
    }
  }

  content = content.replace(pattern, `$1${nl}${injection}${nl}$2${nl}$3`);

  fs.writeFileSync(filePath, content, 'utf8');
  successCount++;
  console.log(`OK: Injected 6 kindergarten fields into ${theme.name}/en.ts`);
}

console.log(`\nDone! ${successCount} of ${themes.length} themes enriched.`);
