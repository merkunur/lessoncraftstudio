<!DOCTYPE html>
<html>
<head>
    <title>Minimal Border Test</title>
</head>
<body>
    <h1>Minimal Border Test</h1>

    <h2>Border Theme Select:</h2>
    <select id="borderThemeSelect">
        <option value="none">None</option>
    </select>

    <h2>Background Theme Select:</h2>
    <select id="backgroundThemeSelect">
        <option value="none">None</option>
    </select>

    <h2>Console Output:</h2>
    <pre id="output" style="background: #f0f0f0; padding: 10px; font-family: monospace;"></pre>

    <script>
        const output = document.getElementById('output');
        function log(msg) {
            console.log(msg);
            output.textContent += msg + '\n';
        }

        log('Script started');

        // Test 1: Direct API call
        log('\n=== TEST 1: Direct API call to /api/borders/themes ===');
        fetch('/api/borders/themes')
            .then(response => {
                log(`Response status: ${response.status}`);
                return response.json();
            })
            .then(data => {
                log(`Data received: ${JSON.stringify(data)}`);
                const borderSelect = document.getElementById('borderThemeSelect');
                log(`Border select found: ${!!borderSelect}`);

                if (borderSelect && data) {
                    log(`Adding ${data.length} themes to border select`);
                    data.forEach(theme => {
                        const option = document.createElement('option');
                        option.value = theme.value || theme;
                        option.textContent = theme.displayName || theme;
                        borderSelect.appendChild(option);
                        log(`Added option: ${option.value} - ${option.textContent}`);
                    });
                    log(`Border select now has ${borderSelect.options.length} options`);
                }
            })
            .catch(error => {
                log(`ERROR: ${error.message}`);
            });

        // Test 2: Background themes
        log('\n=== TEST 2: Direct API call to /api/backgrounds/themes ===');
        fetch('/api/backgrounds/themes')
            .then(response => {
                log(`Response status: ${response.status}`);
                return response.json();
            })
            .then(data => {
                log(`Data received: ${JSON.stringify(data)}`);
                const bgSelect = document.getElementById('backgroundThemeSelect');
                log(`Background select found: ${!!bgSelect}`);

                if (bgSelect && data) {
                    log(`Adding ${data.length} themes to background select`);
                    data.forEach(theme => {
                        const option = document.createElement('option');
                        option.value = theme.value || theme;
                        option.textContent = theme.displayName || theme;
                        bgSelect.appendChild(option);
                        log(`Added option: ${option.value} - ${option.textContent}`);
                    });
                    log(`Background select now has ${bgSelect.options.length} options`);
                }
            })
            .catch(error => {
                log(`ERROR: ${error.message}`);
            });

        // Test 3: Check if selects are populated after a delay
        setTimeout(() => {
            log('\n=== TEST 3: Final check after 2 seconds ===');
            const borderSelect = document.getElementById('borderThemeSelect');
            const bgSelect = document.getElementById('backgroundThemeSelect');
            log(`Border select options: ${borderSelect.options.length}`);
            log(`Background select options: ${bgSelect.options.length}`);

            if (borderSelect.options.length > 1) {
                log('✅ BORDER THEMES LOADED SUCCESSFULLY');
            } else {
                log('❌ BORDER THEMES FAILED TO LOAD');
            }

            if (bgSelect.options.length > 1) {
                log('✅ BACKGROUND THEMES LOADED SUCCESSFULLY');
            } else {
                log('❌ BACKGROUND THEMES FAILED TO LOAD');
            }
        }, 2000);
    </script>
</body>
</html>