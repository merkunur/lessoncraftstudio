<!DOCTYPE html>
<html>
<head>
    <title>Test Alphabet Pattern</title>
</head>
<body>
    <h1>Test Using Alphabet Train Pattern</h1>
    
    <select id="borderThemeSelect">
        <option value="none">None</option>
    </select>
    
    <select id="backgroundThemeSelect">
        <option value="none">None</option>
    </select>
    
    <div id="status"></div>

    <script>
    // EXACTLY LIKE ALPHABET TRAIN
    
    // Get locale first
    let currentLocale = 'en';
    const urlParams = new URLSearchParams(window.location.search);
    if (urlParams.get('locale')) {
        currentLocale = urlParams.get('locale');
    }
    
    // Get elements
    const borderThemeSelect = document.getElementById('borderThemeSelect');
    const backgroundThemeSelect = document.getElementById('backgroundThemeSelect');
    
    function log(msg) {
        console.log(msg);
        document.getElementById('status').innerHTML += '<div>' + msg + '</div>';
    }
    
    // Load border themes - EXACTLY LIKE ALPHABET TRAIN
    async function loadBorderThemes() {
        try {
            log('loadBorderThemes called');
            log('borderThemeSelect exists: ' + !!borderThemeSelect);
            
            borderThemeSelect.innerHTML = '<option value="none">None</option>';
            
            const response = await fetch('/api/borders/themes?locale=' + currentLocale);
            if (!response.ok) {
                log('Failed to load border themes');
                return;
            }
            
            const themes = await response.json();
            themes.forEach(theme => {
                const value = typeof theme === 'string' ? theme : theme.value;
                const displayName = typeof theme === 'string'
                    ? theme.charAt(0).toUpperCase() + theme.slice(1)
                    : theme.displayName;
                borderThemeSelect.innerHTML += '<option value="' + value + '">' + displayName + '</option>';
            });
            
            log('Border themes loaded: ' + borderThemeSelect.options.length + ' options');
        } catch (error) {
            log('Error: ' + error.message);
        }
    }
    
    // Initialize - EXACTLY LIKE ALPHABET TRAIN
    async function initializeApp() {
        log('initializeApp called');
        await loadBorderThemes();
        log('Done!');
    }
    
    // Start - EXACTLY LIKE ALPHABET TRAIN
    initializeApp();
    </script>
</body>
</html>
