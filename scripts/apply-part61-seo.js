/**
 * SEO Part 61: Enrich preschool grade for clothing, colors, construction, cooking, emotions
 * Adds 6 grade-level enrichment fields to gradeContent.preschool for each theme.
 * Fields: uniqueGradeAngle, developmentalMilestones, differentiationNotes,
 *         parentTakeaway, classroomIntegration, assessmentRubric
 */
const fs = require('fs');
const path = require('path');

const BASE = path.join(__dirname, '..', 'frontend', 'content', 'themes');

// Escape single quotes for TS single-quoted strings
function esc(s) {
  return s.replace(/'/g, "\\'");
}

function buildInjection(data, nl) {
  const lines = [];
  lines.push(`      uniqueGradeAngle: '${esc(data.uniqueGradeAngle)}',`);
  lines.push(`      developmentalMilestones: [`);
  for (const m of data.developmentalMilestones) {
    lines.push(`        { milestone: '${esc(m.milestone)}', howWeAddress: '${esc(m.howWeAddress)}' },`);
  }
  lines.push(`      ],`);
  lines.push(`      differentiationNotes: '${esc(data.differentiationNotes)}',`);
  lines.push(`      parentTakeaway: '${esc(data.parentTakeaway)}',`);
  lines.push(`      classroomIntegration: '${esc(data.classroomIntegration)}',`);
  lines.push(`      assessmentRubric: [`);
  for (const r of data.assessmentRubric) {
    lines.push(`        { skill: '${esc(r.skill)}', emerging: '${esc(r.emerging)}', proficient: '${esc(r.proficient)}', advanced: '${esc(r.advanced)}' },`);
  }
  lines.push(`      ],`);
  return lines.join(nl);
}

// ── Theme content ────────────────────────────────────────────────────────

const themes = [
  // ── Clothing ─────────────────────────────────────────────────────────
  {
    name: 'clothing',
    uniqueGradeAngle: 'Preschool is the most functionally transformative stage for clothing worksheets because three- and four-year-olds are in the critical period of dressing independence \u2014 they are transitioning from being fully dressed by adults to choosing, identifying, and putting on their own clothing, making clothing vocabulary not just academic knowledge but the literal key to daily self-sufficiency. Clothing worksheets are uniquely powerful at the preschool level because they combine three developmental priorities that converge nowhere else: fine motor skills through buttons, zippers, and snaps practice, categorization through sorting by season, weather, and occasion, and self-care independence through learning the names and functions of every garment they encounter daily. The personal relevance is unmatched because every preschooler interacts with clothing at least twice every single day \u2014 getting dressed in the morning and changing for bed at night \u2014 meaning clothing worksheet vocabulary is reinforced through authentic, unavoidable daily practice more than any other theme.',
    developmentalMilestones: [
      { milestone: 'Dressing independence and garment identification (preschoolers are transitioning from adult-assisted to self-directed dressing)', howWeAddress: 'clothing worksheets that name and illustrate every common garment build the vocabulary children need to follow dressing instructions, make choices about what to wear, and communicate about clothing needs to adults' },
      { milestone: 'Weather-appropriate clothing selection and categorical reasoning (preschoolers are developing the ability to match items to contexts)', howWeAddress: 'clothing sorting worksheets where children match garments to weather conditions build the categorical thinking that underlies all classification skills while teaching the practical life skill of dressing appropriately for the day' },
      { milestone: 'Fine motor development through fastener practice and clothing manipulation (preschoolers are developing the hand strength and coordination needed for buttons, zippers, and snaps)', howWeAddress: 'clothing worksheets that illustrate fastening sequences and pair with real practice on dressing frames build the specific fine motor pathways that enable independent dressing' },
    ],
    differentiationNotes: 'For struggling preschoolers, focus on five basic garment types (shirt, pants, shoes, coat, hat) before introducing specialized items like scarves, mittens, or boots; use real clothing items alongside every worksheet so children can touch, hold, and try on garments while learning their names, and simplify sorting activities to two categories (warm weather versus cold weather) before introducing three-way sorts. For advanced preschoolers, introduce clothing vocabulary for specific occasions (pajamas for sleeping, swimsuit for swimming, raincoat for rain), challenge children to plan complete outfits for different weather scenarios and explain their choices, and extend sorting to multi-attribute classification where children organize clothing by both type and season simultaneously.',
    parentTakeaway: 'Clothing worksheets give preschool parents the most immediately practical learning tool because every clothing word your child learns on a worksheet directly accelerates their dressing independence at home. The key strategy is to narrate the getting-dressed routine every morning: name each garment as your child puts it on, ask them to choose between two weather-appropriate options, and celebrate every fastener they manage independently. When your child can name shirt, pants, socks, shoes, and coat without prompting, they can follow multi-step dressing instructions, make appropriate clothing choices, and communicate about comfort issues like my shoes feel too tight or I need a warmer coat. This is not just vocabulary \u2014 it is the language of daily self-care that reduces morning battles and builds confidence. Use weekend mornings as unhurried practice time where your child selects their own outfit and explains why they chose each piece.',
    classroomIntegration: 'Clothing worksheets anchor the most immediately applicable thematic unit in preschool because every classroom day begins and ends with clothing interactions \u2014 hanging up coats, putting on smocks for art, changing shoes for outdoor play, and bundling up for recess. Create a dramatic play dress-up station with clothing items organized by category that children can sort, name, and try on while reinforcing worksheet vocabulary. Use clothing coloring pages as morning arrival activities, incorporate sorting worksheets into a small-group classification rotation where children match real garments to weather pictures, and connect sequencing worksheets to the actual classroom routine of putting on outdoor gear in the correct order. A classroom weather-and-clothing chart where children select the appropriate outfit illustration each morning provides daily authentic practice. Laundry sorting activities where children organize clean doll clothes by type or color extend classification skills into purposeful play.',
    assessmentRubric: [
      { skill: 'Clothing identification and vocabulary', emerging: 'names 3 or fewer basic garments like shirt and shoes with teacher prompting', proficient: 'independently names 8 or more clothing items including seasonal garments and describes when each is worn', advanced: 'names 12+ items, categorizes by season and occasion, and explains clothing choices using weather and activity reasoning' },
      { skill: 'Weather-appropriate clothing selection', emerging: 'selects one correct item for a weather scenario from two choices with teacher guidance like pick the coat because it is cold', proficient: 'selects a complete weather-appropriate outfit from multiple options and names the weather condition', advanced: 'plans complete outfits for multiple weather scenarios, explains each choice, and identifies when a classmate\u0027s illustration shows a weather-inappropriate outfit' },
      { skill: 'Dressing sequence and independence', emerging: 'identifies the first step in a two-step dressing sequence with picture support', proficient: 'orders a four-step dressing sequence correctly and demonstrates independence with pull-on garments', advanced: 'orders complex sequences including fasteners, explains why order matters, and independently manages most classroom clothing tasks including zippers and buttons' },
    ],
  },

  // ── Colors ───────────────────────────────────────────────────────────
  {
    name: 'colors',
    uniqueGradeAngle: 'Preschool is the definitive stage for color worksheets because three- and four-year-olds are in the exact developmental window when color naming transitions from approximate guessing to confident, automatic identification \u2014 and this transition is one of the most visible and celebrated cognitive achievements of the entire preschool period, with parents and teachers alike treating each newly named color as a milestone worth announcing. Color worksheets are uniquely powerful at the preschool level because they serve as the gateway to every other visual learning skill: a child who can reliably name and distinguish colors can sort, match, create patterns, follow multi-step instructions, and describe the world around them with precision that was impossible before color vocabulary existed. The emotional dimension of color learning at the preschool level is also uniquely intense \u2014 children develop passionate favorite colors that become part of their identity, and this personal connection transforms color worksheets from academic exercises into expressions of self.',
    developmentalMilestones: [
      { milestone: 'Color naming automaticity for primary and secondary colors (preschoolers are transitioning from approximate to precise color identification)', howWeAddress: 'color worksheets provide the systematic, repeated exposure needed to move color naming from effortful recall to automatic recognition, covering red, blue, yellow, green, orange, purple, pink, brown, black, and white through engaging contexts that demand naming' },
      { milestone: 'Color-based sorting and classification as a gateway to logical thinking (preschoolers are developing the ability to group objects by shared attributes)', howWeAddress: 'color sorting worksheets teach the foundational classification skill that underlies all later scientific thinking because color is the most visually obvious and easiest-to-perceive attribute for grouping' },
      { milestone: 'Color pattern recognition and creation (preschoolers are beginning to identify and extend repeating sequences)', howWeAddress: 'color pattern worksheets where children identify what comes next in sequences like red, blue, red, blue build the pattern recognition skills that are fundamental to mathematical thinking and reading readiness' },
    ],
    differentiationNotes: 'For struggling preschoolers, focus on three high-contrast primary colors (red, blue, yellow) before introducing secondary colors, use real colored objects (blocks, crayons, fabric swatches) alongside every worksheet so children can match the physical color to the printed illustration, and provide color-word labels on the worksheet that pair the written word with a color swatch. For advanced preschoolers, introduce color mixing concepts (red plus yellow makes orange), challenge children to identify shades and tints (light blue versus dark blue), extend pattern activities to three-color ABC patterns, and encourage descriptive language that combines color with other attributes like the small red circle and the big blue square.',
    parentTakeaway: 'Color worksheets give preschool parents the most universally reinforceable learning tool because colors are literally everywhere \u2014 every object your child sees has a color, and every color your child names is a vocabulary win. The key insight is that color naming is not just a cute party trick \u2014 it is the foundation skill that makes all visual learning possible. A child who can name colors can follow directions like put the red block on the blue mat, sort objects into groups, create and describe patterns, and communicate preferences with precision. After every color worksheet, play the color hunt game: pick a color and see how many objects of that color you can find in the room in thirty seconds. This transforms passive color knowledge into active visual scanning, which is the same skill children need for reading. Let your child choose which color crayon to use \u2014 their favorite color preference is a genuine expression of identity that makes learning personally meaningful.',
    classroomIntegration: 'Color worksheets serve as the foundational visual literacy unit in preschool because color vocabulary is a prerequisite for nearly every other classroom activity \u2014 from art to math to science to following multi-step directions. Create a rotating color-of-the-week focus where each color is explored through worksheets, a sensory bin filled with objects of that color, a snack in that color, and a scavenger hunt around the classroom. Use color coloring pages as morning arrival activities, incorporate sorting worksheets into a small-group math rotation where children sort buttons, bears, or blocks by color, and connect pattern worksheets to a classroom pattern wall where children add to growing color sequences each day. A color mixing station with paint or colored water lets children discover secondary colors through hands-on experimentation. The classroom itself becomes a learning tool when labels include color-coded elements and children are asked to line up by shirt color or find their name tag on the color chart.',
    assessmentRubric: [
      { skill: 'Color naming and identification', emerging: 'names 3 or fewer colors with teacher prompting and may confuse similar colors like blue and purple', proficient: 'independently names 8 or more colors including both primary and secondary colors and correctly identifies colors in illustrations', advanced: 'names all basic colors plus shades like light blue and dark green, identifies colors in environmental contexts, and uses color names as descriptors in sentences' },
      { skill: 'Color sorting and classification', emerging: 'sorts objects into two color groups with teacher modeling and occasional errors', proficient: 'independently sorts objects into four or more color groups with consistent accuracy', advanced: 'sorts by color, re-sorts by a different attribute, and explains the sorting rule using color vocabulary' },
      { skill: 'Color pattern recognition', emerging: 'identifies that a sequence has repeating colors like red and blue with teacher pointing', proficient: 'independently continues a two-color AB pattern and names the colors in sequence', advanced: 'continues AB and ABC patterns, creates original patterns, and describes the pattern rule using words like it goes red, blue, yellow, then starts over' },
    ],
  },

  // ── Construction ─────────────────────────────────────────────────────
  {
    name: 'construction',
    uniqueGradeAngle: 'Preschool is the most structurally intuitive stage for construction worksheets because three- and four-year-olds are in the peak period of building play \u2014 stacking blocks, connecting train tracks, and assembling simple structures occupies more of their spontaneous play time than almost any other activity, meaning construction worksheets tap directly into the activity that preschoolers choose to do voluntarily and enthusiastically. Construction is uniquely powerful at the preschool level because it naturally integrates spatial reasoning, counting, shape recognition, and problem-solving into a single context that feels like adventure rather than instruction. The vehicles and machines that populate construction sites \u2014 excavators, dump trucks, cranes, and bulldozers \u2014 hold an almost magnetic fascination for preschoolers, providing a motivational engine that sustains engagement through counting, sorting, and matching activities far longer than any non-vehicular context.',
    developmentalMilestones: [
      { milestone: 'Spatial reasoning through building and stacking (preschoolers are developing the ability to understand how objects relate to each other in space)', howWeAddress: 'construction worksheets featuring buildings, towers, and structures teach spatial vocabulary like on top of, next to, under, and behind while developing the mental rotation and spatial visualization skills that predict later math and engineering success' },
      { milestone: 'Construction vehicle identification and purpose matching (preschoolers are developing the ability to connect objects to their functions)', howWeAddress: 'construction worksheets that name and illustrate excavators, dump trucks, cranes, and bulldozers build both vocabulary and functional reasoning as children learn that each vehicle has a specific job, reinforcing the concept that form follows function' },
      { milestone: 'Counting and measurement through building materials (preschoolers are developing one-to-one correspondence and comparative measurement)', howWeAddress: 'construction worksheets where children count bricks, beams, and tools, and compare structures by height (taller/shorter) and width (wider/narrower) provide the most naturally motivating context for early measurement concepts' },
    ],
    differentiationNotes: 'For struggling preschoolers, focus on three immediately recognizable construction elements (a building, a truck, a hard hat) and pair every worksheet with real building blocks so children can physically construct what they see on the page; reduce counting to sets of three or fewer and use large, bold vehicle illustrations. For advanced preschoolers, introduce simple blueprint-style activities where children follow a visual plan to build a block structure, extend counting to construction site scenes with ten or more vehicles, tools, and workers, and challenge children to describe building sequences using positional and temporal vocabulary like first we put the big block on the bottom, then we stack the small block on top.',
    parentTakeaway: 'Construction worksheets give preschool parents the most natural play-to-learning connection because your child is almost certainly already building with blocks, stacking cups, and constructing with whatever materials they can find \u2014 and construction worksheets channel this spontaneous building impulse into counting, spatial reasoning, and vocabulary development. The key strategy is to build alongside your child after completing a construction worksheet: stack blocks and count them together, compare tower heights using taller and shorter, and describe positions using on top of, next to, and behind. If you pass a real construction site, stop and watch \u2014 ask your child to count the vehicles, name the machines they recognize, and describe what each one is doing. These real-world connections make construction worksheet vocabulary unforgettable because children see the same words come alive on actual streets and job sites.',
    classroomIntegration: 'Construction worksheets anchor the most physically engaging STEM-focused thematic unit in preschool because every construction concept translates directly into a hands-on building activity. Create a construction dramatic play area with hard hats, toy tools, building blocks, and vehicle toys that children use during free play to reinforce vocabulary and scenarios from worksheets. Use construction coloring pages as morning arrival activities, incorporate counting worksheets into a small-group math rotation where children count real blocks, plastic vehicles, and toy tools, and connect spatial reasoning worksheets to a guided building station where children follow simple visual plans to create structures. A classroom building challenge where children construct the tallest tower, the widest bridge, or the strongest wall using blocks integrates measurement vocabulary, counting, and problem-solving. Construction site sound effects during building play add auditory engagement to the kinesthetic learning experience.',
    assessmentRubric: [
      { skill: 'Construction vocabulary and vehicle identification', emerging: 'names two construction items like truck and hat from illustrations with teacher prompting', proficient: 'independently names six or more construction vehicles and tools, describes what each does, and uses construction words in sentences', advanced: 'names 10+ items, explains the building process in sequence, and describes construction roles using vocabulary like the crane lifts heavy beams to the top of the building' },
      { skill: 'Counting construction objects', emerging: 'counts to 3 construction items like blocks or trucks with one-to-one correspondence using physical pointing', proficient: 'counts to 7 construction items reliably, identifies the matching numeral, and uses construction context words like five bricks', advanced: 'counts to 10+, compares two groups of construction items, and solves simple construction story problems like if each wall needs four bricks and we are building two walls how many bricks do we need' },
      { skill: 'Construction spatial reasoning', emerging: 'places one block on top of another when prompted and identifies top and bottom', proficient: 'uses three or more spatial terms correctly like on top, next to, and under when describing structures and follows a two-step building instruction', advanced: 'follows multi-step building plans, describes completed structures using multiple spatial terms, and creates their own building plan for a partner to follow' },
    ],
  },

  // ── Cooking ──────────────────────────────────────────────────────────
  {
    name: 'cooking',
    uniqueGradeAngle: 'Preschool is the most sensory-rich stage for cooking worksheets because three- and four-year-olds experience food through all five senses simultaneously \u2014 the sizzle of something frying, the smell of cookies baking, the bright colors of fruits and vegetables, the texture of dough between fingers, and the taste of the finished product \u2014 making cooking the only theme that naturally engages every sensory channel in a single activity. Cooking worksheets are uniquely powerful at the preschool level because they combine counting (measuring ingredients), sequencing (following recipe steps), vocabulary expansion (ingredient and utensil names), and science concepts (mixing, heating, freezing, melting) into one deliciously motivating context. The real-world relevance is immediate and daily: every preschooler eats multiple times a day, and cooking worksheets transform meals from passive consumption into opportunities for active learning about where food comes from, how it is prepared, and why nutrition matters.',
    developmentalMilestones: [
      { milestone: 'Recipe sequencing and procedural understanding (preschoolers are developing the ability to follow multi-step instructions in order)', howWeAddress: 'cooking worksheets that illustrate recipe steps in sequence build the procedural reasoning that children need for all sequential tasks, and the motivating reward of a finished dish makes following the correct order personally meaningful' },
      { milestone: 'Ingredient counting and measurement vocabulary (preschoolers are developing one-to-one correspondence and comparative quantity concepts)', howWeAddress: 'cooking worksheets where children count eggs, cups of flour, and spoonfuls of sugar introduce counting in the most authentic measurement context available, building the foundation for understanding that quantities matter and that more versus less has real consequences' },
      { milestone: 'Kitchen safety and utensil identification (preschoolers are developing awareness of safe and unsafe behaviors in specific environments)', howWeAddress: 'cooking worksheets that name utensils and illustrate safety rules like hot stove means do not touch build both vocabulary and the safety awareness that enables children to participate in real kitchen activities with appropriate caution' },
    ],
    differentiationNotes: 'For struggling preschoolers, focus on three immediately recognizable cooking elements (bowl, spoon, cookie) and pair every worksheet with real kitchen items that children can hold and name; reduce counting to sets of three or fewer ingredients and use large, bright food illustrations that children can identify from personal experience. For advanced preschoolers, introduce recipe planning where children select ingredients from a set and arrange them in preparation order, extend counting to recipes with six or more ingredients, and challenge children to create their own pretend recipe by drawing ingredients, counting quantities, and describing the steps using sequential vocabulary like first, then, next, and finally.',
    parentTakeaway: 'Cooking worksheets give preschool parents the most naturally delicious learning opportunity because every recipe you make with your child is a math, science, vocabulary, and sequencing lesson disguised as family time. The key strategy is absurdly simple: let your child help in the kitchen. Count eggs together, measure cups of flour, stir the batter, and describe each step using the same sequential vocabulary from worksheets \u2014 first we crack the eggs, then we add the flour, next we stir. When your child completes a cooking worksheet about making a sandwich, make a real sandwich together that same day. This worksheet-to-reality connection is the strongest of any theme because the reward is immediate, edible, and unforgettable. Even pouring cereal into a bowl is a counting and measurement opportunity: how many scoops does it take to fill your bowl? Kitchen time is learning time \u2014 you just need to narrate it.',
    classroomIntegration: 'Cooking worksheets anchor the most multi-sensory thematic unit in preschool because cooking activities naturally engage sight, smell, touch, taste, and hearing simultaneously. Create a dramatic play kitchen with pots, pans, utensils, and play food that children use to act out recipe sequences from worksheets. Use cooking coloring pages as morning arrival activities, incorporate counting worksheets into a small-group math rotation where children count real or plastic food items, and connect sequencing worksheets to a weekly classroom cooking activity where children follow a simple no-bake recipe (fruit salad, trail mix, sandwiches) step by step. A classroom recipe chart with illustrated steps provides ongoing reference for sequential vocabulary. A food sorting station where children classify ingredients by food group, color, or texture extends cooking vocabulary into scientific classification. The taste-testing component of real cooking activities provides the most intrinsically motivating reward system of any classroom theme.',
    assessmentRubric: [
      { skill: 'Cooking vocabulary and identification', emerging: 'names two cooking items like spoon and bowl from illustrations with teacher prompting', proficient: 'independently names six or more kitchen items and common ingredients, describes what each is used for, and uses cooking words in sentences like we stir the batter with a spoon', advanced: 'names 10+ items, categorizes them as utensils versus ingredients versus appliances, and describes a complete recipe using cooking vocabulary' },
      { skill: 'Counting cooking ingredients', emerging: 'counts to 3 ingredients like eggs or apples with one-to-one correspondence using physical pointing', proficient: 'counts to 7 cooking items reliably, identifies the matching numeral, and uses measurement context words like three cups of flour', advanced: 'counts to 10+, compares ingredient quantities, and adjusts simple recipes like if we need two eggs for one batch how many do we need for two batches' },
      { skill: 'Recipe sequencing', emerging: 'identifies the first step in a two-step recipe with picture support like first we get the bowl', proficient: 'orders a four-step recipe correctly and uses the words first, then, next, and last to describe cooking steps', advanced: 'orders five or more recipe steps, explains why order matters like we have to mix before we bake, and creates their own simple recipe sequence with illustrations' },
    ],
  },

  // ── Emotions ─────────────────────────────────────────────────────────
  {
    name: 'emotions',
    uniqueGradeAngle: 'Preschool is the most emotionally explosive stage for emotions worksheets because three- and four-year-olds experience feelings with full-body intensity but have almost no vocabulary to name, understand, or manage what they feel \u2014 the gap between the enormity of their emotional experience and the tininess of their emotional vocabulary is wider at the preschool level than at any other age, making emotions worksheets not just educationally valuable but developmentally urgent. Emotions worksheets are uniquely powerful at the preschool level because they provide the visual vocabulary that bridges the gap between feeling and communicating: when a child can point to a happy face, a sad face, an angry face, and a scared face and name each one, they have gained the single most important tool for emotional self-regulation \u2014 the ability to say I feel angry instead of hitting, I feel sad instead of crying inconsolably, and I feel scared instead of shutting down. No other theme addresses a skill that is as immediately and continuously necessary in every preschool classroom, every home, and every social interaction.',
    developmentalMilestones: [
      { milestone: 'Emotion identification through facial expression reading (preschoolers are developing the ability to recognize emotions in others by reading facial cues)', howWeAddress: 'emotions worksheets with clear, exaggerated facial expressions teach children to identify happy, sad, angry, scared, surprised, and excited by connecting specific facial features like a turned-down mouth means sad and wide eyes mean surprised to emotion labels' },
      { milestone: 'Emotion vocabulary and self-expression (preschoolers are developing the ability to name their own feelings using words instead of behaviors)', howWeAddress: 'emotions worksheets that pair feeling words with faces and scenarios give children the vocabulary to say I feel frustrated instead of throwing a toy, which is the single most important behavioral development in the entire preschool year' },
      { milestone: 'Cause-and-effect emotional reasoning (preschoolers are beginning to understand that events cause feelings and that different people may feel differently about the same event)', howWeAddress: 'emotions worksheets that show scenarios and ask how does this child feel build the empathy and perspective-taking skills that are essential for friendship, conflict resolution, and social success' },
    ],
    differentiationNotes: 'For struggling preschoolers, focus on four basic emotions (happy, sad, angry, scared) before introducing nuanced feelings like frustrated, surprised, or embarrassed; use a mirror alongside worksheets so children can practice making each facial expression themselves, and connect every emotion to a physical sensation like when I feel angry my face gets hot and my fists clench. For advanced preschoolers, introduce six or more emotions including surprised, frustrated, proud, and embarrassed, challenge children to describe situations that might cause each emotion, and encourage perspective-taking by asking how do you think they feel and what could we do to help \u2014 building empathy through scenario-based reasoning.',
    parentTakeaway: 'Emotions worksheets give preschool parents the most behaviorally transformative tool available because the single biggest breakthrough in preschool behavior happens when a child can name their feeling instead of acting it out. When your child learns the word angry from an emotions worksheet and then says I feel angry instead of hitting their sibling, you are witnessing the most important behavioral development of their entire early childhood. The key parent strategy is to label emotions constantly \u2014 yours and theirs: say I feel frustrated because I spilled my coffee and I can see you feel sad because your tower fell down. Use worksheet emotion faces as a reference chart at home: when your child is upset, point to the faces and ask which one matches how you feel right now. This simple tool gives children a concrete way to communicate internal states that they cannot yet articulate spontaneously. Name the feeling, validate the feeling, then help them find a solution \u2014 this three-step pattern is the most powerful emotional coaching technique in child development.',
    classroomIntegration: 'Emotions worksheets anchor the most behaviorally essential thematic unit in preschool because emotional vocabulary is the single most effective tool for reducing classroom conflicts, meltdowns, and behavioral challenges. Create a classroom feelings chart with the same emotion faces used on worksheets, displayed at child eye level, where children check in each morning by pointing to how they feel. Use emotions coloring pages as arrival activities, incorporate matching worksheets into a small-group social-emotional rotation where children match faces to scenarios, and connect emotion vocabulary to a calm-down corner where children can identify their feeling on a chart, choose a coping strategy, and return to activity when ready. A daily emotion check-in circle where each child names one feeling and one reason builds public speaking skills alongside emotional literacy. Role-playing activities where children act out scenarios and practice using emotion words (I feel angry when you take my toy \u2014 can I have a turn please) provide the most authentic social-emotional practice available. Emotions worksheets are the only theme where every single concept directly reduces classroom behavioral challenges.',
    assessmentRubric: [
      { skill: 'Emotion identification from facial expressions', emerging: 'identifies happy and sad from exaggerated facial expression illustrations with teacher prompting', proficient: 'independently identifies four or more emotions from facial expressions and names the facial features that signal each emotion like the mouth goes down when you are sad', advanced: 'identifies six or more emotions including nuanced feelings like frustrated and proud, reads subtle facial expressions, and identifies emotions in real classmates and story characters' },
      { skill: 'Emotion vocabulary and self-expression', emerging: 'uses the word happy or sad to describe their own feelings with teacher prompting and modeling', proficient: 'independently names four or more personal emotions throughout the school day and uses feeling words instead of purely behavioral responses', advanced: 'names six or more emotions in themselves, describes physical sensations that accompany each feeling, and uses full sentences like I feel frustrated because I cannot reach the puzzle piece' },
      { skill: 'Emotional cause-and-effect reasoning', emerging: 'identifies one cause for a basic emotion with teacher support like she is sad because her toy broke', proficient: 'describes causes for four or more emotions and suggests one coping strategy for an uncomfortable feeling', advanced: 'describes multiple causes for complex emotions, takes perspective by explaining how different children might feel differently about the same event, and suggests multiple coping strategies' },
    ],
  },
];

// ── Injection ────────────────────────────────────────────────────────────

let successCount = 0;

for (const theme of themes) {
  const filePath = path.join(BASE, theme.name, 'en.ts');
  let content = fs.readFileSync(filePath, 'utf8');

  // Detect line endings
  const nl = content.includes('\r\n') ? '\r\n' : '\n';

  // Build injection block
  const injection = buildInjection(theme, nl);

  // Pattern: end of faq array ], then close preschool }, then 'kindergarten':
  // Uses a regex that handles both \n and \r\n
  const pattern = /(      \],)\r?\n(    \},)\r?\n(    'kindergarten':)/;

  if (!pattern.test(content)) {
    console.error(`ERROR: Injection pattern not found in ${theme.name}/en.ts`);
    process.exit(1);
  }

  // Check if already injected
  if (content.includes("uniqueGradeAngle: '") && content.indexOf("uniqueGradeAngle: '") < content.indexOf("'kindergarten':")) {
    console.log(`SKIP: ${theme.name}/en.ts already has uniqueGradeAngle in preschool section`);
    continue;
  }

  content = content.replace(pattern, `$1${nl}${injection}${nl}$2${nl}$3`);

  fs.writeFileSync(filePath, content, 'utf8');
  successCount++;
  console.log(`OK: Injected 6 preschool fields into ${theme.name}/en.ts`);
}

console.log(`\nDone! ${successCount} of ${themes.length} themes enriched.`);
