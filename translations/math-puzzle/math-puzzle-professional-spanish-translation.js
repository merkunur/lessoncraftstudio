/**
 * Rompecabezas Matemático - Traducción profesional al español
 * Número total de claves: 177 + mensajes de error adicionales
 * Idioma: Español (ES)
 *
 * Traducción realizada con español natural e idiomático,
 * como si la aplicación hubiera sido desarrollada en España/Latinoamérica.
 */

const MATH_PUZZLE_TRANSLATIONS_ES = {
  "es": {
    // ============= 1. Nombres de idiomas (11 claves) =============
    "language.english": "Inglés",
    "language.german.full": "Deutsch (Alemán)",
    "language.french.full": "Français (Francés)",
    "language.spanish.full": "Español",
    "language.portuguese.full": "Português (Portugués)",
    "language.italian.full": "Italiano (Italiano)",
    "language.dutch.full": "Nederlands (Neerlandés)",
    "language.swedish.full": "Svenska (Sueco)",
    "language.danish.full": "Dansk (Danés)",
    "language.norwegian.full": "Norsk (Noruego)",
    "language.finnish.full": "Suomi (Finés)",

    // ============= 2. Interfaz principal (27 claves) =============
    "mathPuzzle": "Rompecabezas Matemático",
    "pageSettings": "Configuración de página",
    "selectLanguage": "Seleccionar idioma",
    "language": "Idioma:",
    "pageSize": "Tamaño de página:",
    "pageColor": "Color de página:",
    "backgroundTheme": "Tema de fondo:",
    "backgroundOpacity": "Opacidad del fondo:",
    "borderTheme": "Tema de borde:",
    "borderOpacity": "Opacidad del borde:",
    "content": "Contenido:",
    "color": "Color:",
    "size": "Tamaño:",
    "font": "Fuente:",
    "outlineColor": "Color del contorno:",
    "outlineWidth": "Contorno (0-10):",
    "rowsRange": "Filas (2–4):",
    "columnsRange": "Columnas (2–4):",
    "operation": "Operación:",
    "selectTheme": "Seleccionar tema:",
    "searchImages": "Buscar imágenes:",
    "availableImages": "Imágenes disponibles:",
    "selectedImageForPuzzle": "Imagen seleccionada para el rompecabezas:",
    "selectImagesToUpload": "Seleccionar imagen(es) para subir:",
    "yourUploadedImages": "Tus imágenes subidas (esta sesión):",
    "alignToPage": "Alinear a la página:",
    "alignSelected": "Alinear selección:",

    // ============= 3. Configuración de página (17 claves) =============
    "mathpuzzle.page.title": "Generador de Fichas - Rompecabezas Matemático",
    "page.size.letter.portrait": "Carta Vertical (8,5×11″)",
    "page.size.letter.landscape": "Carta Horizontal (11×8,5″)",
    "page.size.a4.portrait": "A4 Vertical (210×297mm)",
    "page.size.a4.landscape": "A4 Horizontal (297×210mm)",
    "page.size.default": "Ficha estándar (800×1000)",
    "page.size.square": "Cuadrado (1200×1200)",
    "mathpuzzle.apply.size.color": "Aplicar tamaño y color",
    "mathpuzzle.background.title": "Fondo",
    "mathpuzzle.background.message": "Selecciona un tema para los fondos.",
    "mathpuzzle.border.title": "Borde",
    "mathpuzzle.border.message": "Selecciona un tema para los bordes.",
    "mathpuzzle.language.description": "Los nombres de imágenes y temas se mostrarán en el idioma seleccionado.",
    "mathpuzzle.page.setup": "Configuración de página",
    "mathpuzzle.background.opacity": "Opacidad del fondo:",
    "mathpuzzle.border.opacity": "Opacidad del borde:",
    "mathpuzzle.page.color": "Color de página:",

    // ============= 4. Herramientas de texto (15 claves) =============
    "mathpuzzle.text.tools": "Herramientas de texto",
    "mathpuzzle.text.add.new": "Añadir texto nuevo",
    "mathpuzzle.text.placeholder": "¡Hola!",
    "mathpuzzle.text.add.button": "Añadir texto",
    "mathpuzzle.text.properties": "Propiedades del texto seleccionado",
    "mathpuzzle.text.content": "Contenido:",
    "mathpuzzle.text.color": "Color:",
    "mathpuzzle.text.size": "Tamaño:",
    "mathpuzzle.text.font": "Fuente:",
    "mathpuzzle.text.outline.color": "Color del contorno:",
    "mathpuzzle.text.outline.width": "Contorno (0-10):",
    "mathpuzzle.text.default": "Texto nuevo",
    "mathpuzzle.msg.text.added": "Texto añadido al lienzo.",
    "mathpuzzle.msg.text.updated": "Propiedades del texto actualizadas.",
    "mathpuzzle.msg.text.deleted": "Texto eliminado.",

    // ============= 5. Configuración del rompecabezas (6 claves) =============
    "mathpuzzle.puzzle.config": "Configuración del rompecabezas",
    "operation.addition": "Suma",
    "operation.subtraction": "Resta",
    "operation.both": "Suma y resta",
    "mathpuzzle.rows.label": "Filas (2–4):",
    "mathpuzzle.columns.label": "Columnas (2–4):",

    // ============= 6. Biblioteca de imágenes (7 claves) =============
    "mathpuzzle.image.library": "Biblioteca de imágenes",
    "mathpuzzle.search.placeholder": "ej. gato, manzana",
    "mathpuzzle.loading.images": "Cargando imágenes...",
    "mathpuzzle.none.selected": "Ninguna seleccionada",
    "mathpuzzle.available.images": "Imágenes disponibles:",
    "mathpuzzle.selected.image": "Imagen seleccionada para el rompecabezas:",
    "mathpuzzle.select.theme": "Seleccionar tema:",

    // ============= 7. Sección de carga (4 claves) =============
    "mathpuzzle.upload.custom": "Subir imágenes personalizadas",
    "mathpuzzle.uploaded.placeholder": "Tus imágenes subidas aparecerán aquí.",
    "mathpuzzle.upload.select": "Seleccionar imagen(es) para subir:",
    "mathpuzzle.uploaded.label": "Tus imágenes subidas (esta sesión):",

    // ============= 8. Opciones de fuente (7 claves) =============
    "font.lexend": "Lexend Deca",
    "font.baloo": "Baloo 2",
    "font.nunito": "Nunito",
    "font.quicksand": "Quicksand",
    "font.fredoka": "Fredoka",
    "font.arial": "Arial",
    "font.verdana": "Verdana",

    // ============= 9. Acciones de la barra de herramientas (20 claves) =============
    "toolbar.layers": "Capas",
    "toolbar.bring.forward": "Traer al frente",
    "toolbar.send.backward": "Enviar atrás",
    "toolbar.align": "Alinear",
    "toolbar.align.selected": "Alinear selección:",
    "toolbar.align.left": "Alinear a la izquierda",
    "toolbar.center.h": "Centrar horizontalmente",
    "toolbar.align.right": "Alinear a la derecha",
    "toolbar.align.top": "Alinear arriba",
    "toolbar.center.v": "Centrar verticalmente",
    "toolbar.align.bottom": "Alinear abajo",
    "toolbar.align.to.page": "Alinear a la página:",
    "toolbar.center.page.h": "Centrar horizontalmente en la página",
    "toolbar.center.page.v": "Centrar verticalmente en la página",
    "toolbar.delete": "Eliminar selección",
    "toolbar.msg.aligned": "Objetos alineados.",
    "toolbar.msg.layer.changed": "Orden de capas modificado.",
    "toolbar.msg.deleted": "Objetos seleccionados eliminados.",
    "toolbar.msg.select.first": "Por favor, selecciona primero un objeto.",
    "toolbar.msg.nothing.selected": "No hay objetos seleccionados.",

    // ============= 10. Botones de acción (13 claves) =============
    "mathpuzzle.generate": "Generar",
    "mathpuzzle.generate.worksheet": "Generar ficha",
    "mathpuzzle.generate.answer": "Generar solución",
    "mathpuzzle.download": "Descargar",
    "mathpuzzle.download.worksheet.jpeg": "Ficha de ejercicios (JPEG)",
    "mathpuzzle.download.answer.jpeg": "Hoja de respuestas (JPEG)",
    "mathpuzzle.download.worksheet.pdf": "Ficha de ejercicios (PDF)",
    "mathpuzzle.download.answer.pdf": "Hoja de respuestas (PDF)",
    "common.grayscale": "Escala de grises",
    "mathpuzzle.clear.all": "Borrar todo",
    "mathpuzzle.msg.generate.complete": "¡Rompecabezas generado con éxito!",
    "mathpuzzle.msg.cleared": "Todo el contenido ha sido borrado.",
    "mathpuzzle.msg.download.ready": "Descarga lista.",

    // ============= 11. Pestañas (2 claves) =============
    "mathpuzzle.tab.worksheet": "Ficha de ejercicios",
    "mathpuzzle.tab.answer": "Hoja de respuestas",

    // ============= 12. Mensajes de carga y tema (13 claves) =============
    "mathpuzzle.msg.loading.uploads": "Cargando {filesToLoad} imagen(es)...",
    "mathpuzzle.msg.uploads.available": "{count} imagen(es) personalizada(s) disponible(s).",
    "mathpuzzle.msg.file.error": "Error al leer el archivo: {fileName}",
    "mathpuzzle.msg.form.cleared": "Formulario borrado.",
    "mathpuzzle.themes.all": "Todos los temas",
    "mathpuzzle.msg.themes.error": "Error al cargar los temas.",
    "mathpuzzle.msg.loading.theme": "Cargando imágenes del tema...",
    "mathpuzzle.msg.loading.default": "Cargando tema predeterminado...",
    "mathpuzzle.msg.type.search": "Escribe para buscar en todas las imágenes.",
    "mathpuzzle.msg.searching": "Buscando...",
    "mathpuzzle.msg.search.error": "Error durante la búsqueda.",
    "mathpuzzle.msg.no.images": "No se encontraron imágenes{query}",
    "mathpuzzle.msg.theme.loaded": "Tema cargado con éxito.",

    // ============= 13. Mensajes de carga de recursos (10 claves) =============
    "mathpuzzle.msg.loading.backgrounds": "Cargando fondos...",
    "mathpuzzle.msg.backgrounds.error": "Error al cargar los fondos.",
    "mathpuzzle.msg.background.failed": "No se pudo cargar la imagen de fondo.",
    "mathpuzzle.msg.loading.borders": "Cargando bordes...",
    "mathpuzzle.msg.borders.error": "Error al cargar los bordes.",
    "mathpuzzle.msg.no.items": "No hay elementos en este tema.",
    "mathpuzzle.msg.border.failed": "No se pudo cargar la imagen del borde.",
    "mathpuzzle.asset.loaded": "{type} cargado con éxito.",
    "mathpuzzle.asset.none": "No hay {type} disponible.",
    "mathpuzzle.asset.select": "Selecciona un tema para ver {type}.",

    // ============= 14. Mensajes de generación (8 claves) =============
    "mathpuzzle.msg.using.upload": "No se seleccionó imagen de biblioteca. Usando «{imageName}» de tus subidas.",
    "mathpuzzle.msg.generating.data": "Generando datos del rompecabezas...",
    "mathpuzzle.msg.rendering.worksheet": "Creando ficha de ejercicios...",
    "mathpuzzle.msg.worksheet.success": "¡Ficha de ejercicios generada con éxito!",
    "mathpuzzle.msg.generate.first": "Por favor, genera primero una ficha de ejercicios.",
    "mathpuzzle.msg.rendering.answer": "Creando hoja de respuestas...",
    "mathpuzzle.msg.answer.generated": "¡Hoja de respuestas generada!",
    "mathpuzzle.msg.generation.error": "Error al generar el rompecabezas: {error}",

    // ============= 15. Mensajes de descarga y PDF (14 claves) =============
    "mathpuzzle.msg.preparing.jpeg": "Preparando JPEG... Por favor espera.",
    "mathpuzzle.msg.jpeg.error": "Error al preparar el JPEG: {error}",
    "mathpuzzle.watermark.main": "VERSIÓN GRATUITA - LessonCraftStudio.com",
    "mathpuzzle.watermark.text": "VERSIÓN GRATUITA",
    "mathpuzzle.msg.generate.content": "Por favor, genera primero el contenido.",
    "mathpuzzle.msg.preparing.pdf": "Preparando PDF...",
    "mathpuzzle.msg.pdf.downloaded": "¡PDF descargado!",
    "mathpuzzle.msg.pdf.error": "Error al crear el PDF.",
    "mathpuzzle.msg.generate.worksheet.first": "Por favor, genera primero una ficha de ejercicios.",
    "mathpuzzle.msg.preparing.jpeg.simple": "Preparando JPEG...",
    "mathpuzzle.msg.jpeg.initiated": "¡Descarga JPEG iniciada!",
    "mathpuzzle.msg.jpeg.error.simple": "Error al preparar el JPEG.",
    "mathpuzzle.msg.preparing.pdf.wait": "Preparando PDF... Por favor espera.",
    "mathpuzzle.msg.pdf.error.detailed": "Error al crear el PDF: {error}",

    // ============= 16. Términos generales (3 claves) =============
    "common.none": "Ninguno",
    "common.loading": "Cargando...",
    "common.error": "Error",

    // ============= 17. Mensajes de error (Adicionales) =============
    "error.invalid.dimensions": "Dimensiones no válidas. Por favor verifica filas y columnas.",
    "error.no.image.selected": "Por favor selecciona una imagen para el rompecabezas.",
    "error.no.theme.selected": "Por favor selecciona primero un tema.",
    "error.upload.failed": "Error al subir. Por favor intenta de nuevo.",
    "error.file.too.large": "El archivo es demasiado grande. Tamaño máximo: 5MB.",
    "error.invalid.file.type": "Tipo de archivo no válido. Por favor sube solo imágenes.",
    "error.canvas.creation": "Error al crear el lienzo.",
    "error.export.failed": "Error al exportar. Por favor intenta de nuevo.",
    "error.network": "Error de red. Por favor verifica tu conexión.",
    "error.puzzle.generation": "No se pudo generar el rompecabezas. Prueba con diferentes configuraciones.",
    "error.invalid.operation": "Operación seleccionada no válida.",
    "error.grid.size": "El tamaño de la cuadrícula debe estar entre 2 y 4.",
    "error.no.solution": "No se encontró solución para el rompecabezas.",
    "error.text.empty": "Por favor ingresa el contenido del texto.",
    "error.object.selection": "Por favor selecciona un objeto para modificar.",
    "error.alignment": "Error al alinear los objetos.",
    "error.layer.operation": "Error al cambiar el orden de las capas.",
    "error.delete.operation": "Error al eliminar los objetos.",
    "error.color.invalid": "Valor de color no válido.",
    "error.size.invalid": "Valor de tamaño no válido.",
    "error.outline.invalid": "Ancho de contorno no válido.",
    "error.opacity.invalid": "Valor de opacidad no válido.",
    "error.theme.not.found": "Tema no encontrado.",
    "error.api.connection": "No se pudo conectar con el servidor.",
    "error.session.expired": "Sesión expirada. Por favor actualiza la página.",
    "error.browser.unsupported": "Tu navegador no es compatible. Por favor usa un navegador moderno.",
    "error.feature.unavailable": "Esta función no está disponible en la versión gratuita."
  }
};

// ==========================================
// FUNCIONES DE UTILIDAD PARA LA TRADUCCIÓN ESPAÑOLA
// ==========================================

/**
 * Obtener traducción española para una clave
 * @param {string} key - Clave de traducción
 * @param {object} params - Parámetros para interpolación
 * @returns {string} Texto traducido
 */
function getSpanishMathPuzzleTranslation(key, params = {}) {
  const translation = MATH_PUZZLE_TRANSLATIONS_ES.es[key] || key;
  return formatSpanishMathPuzzleTranslation(translation, params);
}

/**
 * Formatear traducción española con parámetros
 * @param {string} text - Texto con marcadores de posición
 * @param {object} params - Parámetros que reemplazan los marcadores
 * @returns {string} Texto formateado
 */
function formatSpanishMathPuzzleTranslation(text, params) {
  let formattedText = text;
  for (const [key, value] of Object.entries(params)) {
    formattedText = formattedText.replace(new RegExp(`\\{${key}\\}`, 'g'), value);
  }
  return formattedText;
}

/**
 * Validar traducciones españolas
 * @returns {object} Resultado de validación
 */
function validateSpanishMathPuzzleTranslations() {
  const keys = Object.keys(MATH_PUZZLE_TRANSLATIONS_ES.es);
  const missingKeys = [];
  const emptyTranslations = [];

  // Verificar traducciones vacías
  keys.forEach(key => {
    const value = MATH_PUZZLE_TRANSLATIONS_ES.es[key];
    if (!value || value.trim() === '') {
      emptyTranslations.push(key);
    }
  });

  return {
    totalKeys: keys.length,
    validKeys: keys.length - emptyTranslations.length,
    missingKeys,
    emptyTranslations,
    coverage: `${((keys.length - emptyTranslations.length) / keys.length * 100).toFixed(1)}%`,
    isComplete: emptyTranslations.length === 0
  };
}

// ==========================================
// TÉRMINOS MATEMÁTICOS PARA LA VERSIÓN ESPAÑOLA
// ==========================================

/**
 * Términos españoles para operaciones matemáticas
 * Utilizados en el contexto educativo
 */
const SPANISH_MATH_OPERATIONS = {
  addition: "Suma",
  subtraction: "Resta",
  multiplication: "Multiplicación",
  division: "División",
  both: "Suma y resta",
  all: "Todas las operaciones",
  plus: "Más",
  minus: "Menos",
  times: "Por",
  dividedBy: "Dividido entre",
  equals: "Igual",
  result: "Resultado",
  solution: "Solución",
  calculate: "Calcular",
  solve: "Resolver"
};

/**
 * Términos españoles para elementos del rompecabezas
 */
const SPANISH_PUZZLE_TERMS = {
  puzzle: "Rompecabezas",
  mathPuzzle: "Rompecabezas matemático",
  worksheet: "Ficha de ejercicios",
  answerKey: "Hoja de respuestas",
  grid: "Cuadrícula",
  row: "Fila",
  column: "Columna",
  cell: "Celda",
  image: "Imagen",
  number: "Número",
  question: "Pregunta",
  answer: "Respuesta",
  exercise: "Ejercicio"
};

// ==========================================
// EXPORTAR PARA USO EN OTROS MÓDULOS
// ==========================================

if (typeof module !== 'undefined' && module.exports) {
  module.exports = {
    MATH_PUZZLE_TRANSLATIONS_ES,
    getSpanishMathPuzzleTranslation,
    formatSpanishMathPuzzleTranslation,
    validateSpanishMathPuzzleTranslations,
    SPANISH_MATH_OPERATIONS,
    SPANISH_PUZZLE_TERMS
  };
}

// Hacer disponible globalmente en el navegador
if (typeof window !== 'undefined') {
  window.MATH_PUZZLE_TRANSLATIONS_ES = MATH_PUZZLE_TRANSLATIONS_ES;
  window.getSpanishMathPuzzleTranslation = getSpanishMathPuzzleTranslation;
  window.formatSpanishMathPuzzleTranslation = formatSpanishMathPuzzleTranslation;
  window.validateSpanishMathPuzzleTranslations = validateSpanishMathPuzzleTranslations;
  window.SPANISH_MATH_OPERATIONS = SPANISH_MATH_OPERATIONS;
  window.SPANISH_PUZZLE_TERMS = SPANISH_PUZZLE_TERMS;
}