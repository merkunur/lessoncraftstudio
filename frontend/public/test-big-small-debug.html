<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Big or Small Debug Test</title>
    <script type="module">
        import '/web-components/big-small-app/index.js';
        
        window.addEventListener('DOMContentLoaded', async () => {
            console.log('=== DEBUG TEST START ===');
            
            const app = document.getElementById('bigSmallApp');
            
            // Wait for component to initialize
            await new Promise(resolve => setTimeout(resolve, 100));
            
            console.log('1. Component created');
            console.log('   - shadowRoot exists:', app.shadowRoot !== null);
            console.log('   - _images initial value:', app._images);
            console.log('   - typeof _images:', typeof app._images);
            console.log('   - Array.isArray(_images):', Array.isArray(app._images));
            
            // Check if methods exist
            console.log('2. Methods check:');
            console.log('   - updateImageLibrary:', typeof app.updateImageLibrary);
            console.log('   - getSampleImages:', typeof app.getSampleImages);
            
            // Try calling getSampleImages
            try {
                const samples = app.getSampleImages();
                console.log('3. getSampleImages() result:', samples);
            } catch (e) {
                console.error('3. getSampleImages() error:', e);
            }
            
            // Check initial render
            const imageGrid = app.shadowRoot?.getElementById('imageGrid');
            console.log('4. After initial render:');
            console.log('   - imageGrid exists:', imageGrid !== null);
            if (imageGrid) {
                console.log('   - Image items count:', imageGrid.querySelectorAll('.image-item').length);
            }
            
            // Now set images
            console.log('5. Setting test images...');
            const testImages = [
                { fileKey: 'cat', displayName: 'Cat', name: 'Cat', url: '/images/animals/cat.png', path: '/images/animals/cat.png' },
                { fileKey: 'dog', displayName: 'Dog', name: 'Dog', url: '/images/animals/dog.png', path: '/images/animals/dog.png' }
            ];
            
            try {
                app.images = testImages;
                console.log('   - Images set successfully');
                console.log('   - _images after set:', app._images);
            } catch (e) {
                console.error('   - Error setting images:', e);
            }
            
            // Check after setting images
            await new Promise(resolve => setTimeout(resolve, 100));
            console.log('6. After setting images:');
            if (imageGrid) {
                console.log('   - Image items count:', imageGrid.querySelectorAll('.image-item').length);
            }
        });
    </script>
</head>
<body>
    <h1>Big or Small Debug Test</h1>
    <p>Check browser console for detailed debug output</p>
    
    <lcs-big-small-app id="bigSmallApp" locale="en" subscription="premium"></lcs-big-small-app>
</body>
</html>