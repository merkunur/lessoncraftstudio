<!DOCTYPE html>
<html>
<head>
    <title>Actual Content Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; }
        .images { display: flex; flex-wrap: wrap; gap: 10px; }
        .image-item { width: 100px; height: 100px; border: 1px solid #ccc; position: relative; }
        .image-item img { width: 100%; height: 100%; object-fit: cover; }
        .image-item .name { position: absolute; bottom: 0; background: rgba(0,0,0,0.7); color: white; font-size: 10px; width: 100%; padding: 2px; }
        h2 { color: #333; }
        .error { color: red; }
        .success { color: green; }
    </style>
</head>
<body>
    <h1>üîç Actual Content Test - What's Really Loading?</h1>

    <div class="section">
        <h2>1. Main Image Library (Animals Theme)</h2>
        <div id="main-images" class="images">Loading...</div>
    </div>

    <div class="section">
        <h2>2. Border Images (Spring Theme)</h2>
        <div id="border-spring" class="images">Loading...</div>
    </div>

    <div class="section">
        <h2>3. Border Images (Math Theme)</h2>
        <div id="border-math" class="images">Loading...</div>
    </div>

    <div class="section">
        <h2>4. Background Images (Summer Theme)</h2>
        <div id="background-summer" class="images">Loading...</div>
    </div>

    <div class="section">
        <h2>5. Train Templates</h2>
        <div id="train-templates" class="images">Loading...</div>
    </div>

    <script>
        async function loadContent(url, elementId, displayName) {
            const element = document.getElementById(elementId);
            try {
                const response = await fetch(url);
                const data = await response.json();

                const images = data.images || data;

                if (images.length === 0) {
                    element.innerHTML = '<span class="error">‚ùå No images returned</span>';
                    return;
                }

                element.innerHTML = `<span class="success">‚úÖ ${images.length} images</span><br>`;

                // Show first 5 images
                const preview = images.slice(0, 5);
                preview.forEach(img => {
                    const div = document.createElement('div');
                    div.className = 'image-item';

                    const imgEl = document.createElement('img');
                    imgEl.src = img.path || img.url;
                    imgEl.onerror = () => {
                        imgEl.style.display = 'none';
                        div.style.background = '#ffcccc';
                        div.innerHTML = '<div style="padding:10px">Failed to load</div>';
                    };

                    const nameEl = document.createElement('div');
                    nameEl.className = 'name';
                    nameEl.textContent = img.name || img.word || 'unnamed';

                    div.appendChild(imgEl);
                    div.appendChild(nameEl);
                    element.appendChild(div);
                });

                if (images.length > 5) {
                    element.innerHTML += `<div>... and ${images.length - 5} more</div>`;
                }

            } catch (error) {
                element.innerHTML = `<span class="error">‚ùå Error: ${error.message}</span>`;
            }
        }

        // Load all content
        loadContent('/api/images?theme=animals&limit=50', 'main-images', 'Main Images');
        loadContent('/api/borders/images?theme=spring', 'border-spring', 'Spring Borders');
        loadContent('/api/borders/images?theme=math', 'border-math', 'Math Borders');
        loadContent('/api/backgrounds/images?theme=summer', 'background-summer', 'Summer Backgrounds');
        loadContent('/api/train-templates', 'train-templates', 'Train Templates');
    </script>
</body>
</html>