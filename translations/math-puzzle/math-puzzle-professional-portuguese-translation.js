/**
 * Quebra-cabeça Matemático - Tradução profissional para português
 * Número total de chaves: 177 + mensagens de erro adicionais
 * Idioma: Português (PT/BR)
 *
 * Tradução realizada com português natural e idiomático,
 * como se a aplicação tivesse sido desenvolvida em países lusófonos.
 */

const MATH_PUZZLE_TRANSLATIONS_PT = {
  "pt": {
    // ============= 1. Nomes dos idiomas (11 chaves) =============
    "language.english": "Inglês",
    "language.german.full": "Deutsch (Alemão)",
    "language.french.full": "Français (Francês)",
    "language.spanish.full": "Español (Espanhol)",
    "language.portuguese.full": "Português",
    "language.italian.full": "Italiano (Italiano)",
    "language.dutch.full": "Nederlands (Holandês)",
    "language.swedish.full": "Svenska (Sueco)",
    "language.danish.full": "Dansk (Dinamarquês)",
    "language.norwegian.full": "Norsk (Norueguês)",
    "language.finnish.full": "Suomi (Finlandês)",

    // ============= 2. Interface principal (27 chaves) =============
    "mathPuzzle": "Quebra-cabeça Matemático",
    "pageSettings": "Configurações da página",
    "selectLanguage": "Selecionar idioma",
    "language": "Idioma:",
    "pageSize": "Tamanho da página:",
    "pageColor": "Cor da página:",
    "backgroundTheme": "Tema de fundo:",
    "backgroundOpacity": "Opacidade do fundo:",
    "borderTheme": "Tema da borda:",
    "borderOpacity": "Opacidade da borda:",
    "content": "Conteúdo:",
    "color": "Cor:",
    "size": "Tamanho:",
    "font": "Fonte:",
    "outlineColor": "Cor do contorno:",
    "outlineWidth": "Contorno (0-10):",
    "rowsRange": "Linhas (2–4):",
    "columnsRange": "Colunas (2–4):",
    "operation": "Operação:",
    "selectTheme": "Selecionar tema:",
    "searchImages": "Buscar imagens:",
    "availableImages": "Imagens disponíveis:",
    "selectedImageForPuzzle": "Imagem selecionada para o quebra-cabeça:",
    "selectImagesToUpload": "Selecionar imagem(ns) para enviar:",
    "yourUploadedImages": "Suas imagens enviadas (esta sessão):",
    "alignToPage": "Alinhar à página:",
    "alignSelected": "Alinhar seleção:",

    // ============= 3. Configurações da página (17 chaves) =============
    "mathpuzzle.page.title": "Gerador de Atividades - Quebra-cabeça Matemático",
    "page.size.letter.portrait": "Carta Retrato (8,5×11″)",
    "page.size.letter.landscape": "Carta Paisagem (11×8,5″)",
    "page.size.a4.portrait": "A4 Retrato (210×297mm)",
    "page.size.a4.landscape": "A4 Paisagem (297×210mm)",
    "page.size.default": "Atividade padrão (800×1000)",
    "page.size.square": "Quadrado (1200×1200)",
    "mathpuzzle.apply.size.color": "Aplicar tamanho e cor",
    "mathpuzzle.background.title": "Fundo",
    "mathpuzzle.background.message": "Selecione um tema para os fundos.",
    "mathpuzzle.border.title": "Borda",
    "mathpuzzle.border.message": "Selecione um tema para as bordas.",
    "mathpuzzle.language.description": "Os nomes das imagens e temas serão exibidos no idioma selecionado.",
    "mathpuzzle.page.setup": "Configuração da página",
    "mathpuzzle.background.opacity": "Opacidade do fundo:",
    "mathpuzzle.border.opacity": "Opacidade da borda:",
    "mathpuzzle.page.color": "Cor da página:",

    // ============= 4. Ferramentas de texto (15 chaves) =============
    "mathpuzzle.text.tools": "Ferramentas de texto",
    "mathpuzzle.text.add.new": "Adicionar novo texto",
    "mathpuzzle.text.placeholder": "Olá!",
    "mathpuzzle.text.add.button": "Adicionar texto",
    "mathpuzzle.text.properties": "Propriedades do texto selecionado",
    "mathpuzzle.text.content": "Conteúdo:",
    "mathpuzzle.text.color": "Cor:",
    "mathpuzzle.text.size": "Tamanho:",
    "mathpuzzle.text.font": "Fonte:",
    "mathpuzzle.text.outline.color": "Cor do contorno:",
    "mathpuzzle.text.outline.width": "Contorno (0-10):",
    "mathpuzzle.text.default": "Novo texto",
    "mathpuzzle.msg.text.added": "Texto adicionado à tela.",
    "mathpuzzle.msg.text.updated": "Propriedades do texto atualizadas.",
    "mathpuzzle.msg.text.deleted": "Texto excluído.",

    // ============= 5. Configuração do quebra-cabeça (6 chaves) =============
    "mathpuzzle.puzzle.config": "Configuração do quebra-cabeça",
    "operation.addition": "Adição",
    "operation.subtraction": "Subtração",
    "operation.both": "Adição e subtração",
    "mathpuzzle.rows.label": "Linhas (2–4):",
    "mathpuzzle.columns.label": "Colunas (2–4):",

    // ============= 6. Biblioteca de imagens (7 chaves) =============
    "mathpuzzle.image.library": "Biblioteca de imagens",
    "mathpuzzle.search.placeholder": "ex. gato, maçã",
    "mathpuzzle.loading.images": "Carregando imagens...",
    "mathpuzzle.none.selected": "Nenhuma selecionada",
    "mathpuzzle.available.images": "Imagens disponíveis:",
    "mathpuzzle.selected.image": "Imagem selecionada para o quebra-cabeça:",
    "mathpuzzle.select.theme": "Selecionar tema:",

    // ============= 7. Seção de envio (4 chaves) =============
    "mathpuzzle.upload.custom": "Enviar imagens personalizadas",
    "mathpuzzle.uploaded.placeholder": "Suas imagens enviadas aparecerão aqui.",
    "mathpuzzle.upload.select": "Selecionar imagem(ns) para enviar:",
    "mathpuzzle.uploaded.label": "Suas imagens enviadas (esta sessão):",

    // ============= 8. Opções de fonte (7 chaves) =============
    "font.lexend": "Lexend Deca",
    "font.baloo": "Baloo 2",
    "font.nunito": "Nunito",
    "font.quicksand": "Quicksand",
    "font.fredoka": "Fredoka",
    "font.arial": "Arial",
    "font.verdana": "Verdana",

    // ============= 9. Ações da barra de ferramentas (20 chaves) =============
    "toolbar.layers": "Camadas",
    "toolbar.bring.forward": "Trazer para frente",
    "toolbar.send.backward": "Enviar para trás",
    "toolbar.align": "Alinhar",
    "toolbar.align.selected": "Alinhar seleção:",
    "toolbar.align.left": "Alinhar à esquerda",
    "toolbar.center.h": "Centralizar horizontalmente",
    "toolbar.align.right": "Alinhar à direita",
    "toolbar.align.top": "Alinhar ao topo",
    "toolbar.center.v": "Centralizar verticalmente",
    "toolbar.align.bottom": "Alinhar abaixo",
    "toolbar.align.to.page": "Alinhar à página:",
    "toolbar.center.page.h": "Centralizar horizontalmente na página",
    "toolbar.center.page.v": "Centralizar verticalmente na página",
    "toolbar.delete": "Excluir seleção",
    "toolbar.msg.aligned": "Objetos alinhados.",
    "toolbar.msg.layer.changed": "Ordem das camadas modificada.",
    "toolbar.msg.deleted": "Objetos selecionados excluídos.",
    "toolbar.msg.select.first": "Por favor, selecione um objeto primeiro.",
    "toolbar.msg.nothing.selected": "Nenhum objeto selecionado.",

    // ============= 10. Botões de ação (13 chaves) =============
    "mathpuzzle.generate": "Gerar",
    "mathpuzzle.generate.worksheet": "Gerar atividade",
    "mathpuzzle.generate.answer": "Gerar gabarito",
    "mathpuzzle.download": "Baixar",
    "mathpuzzle.download.worksheet.jpeg": "Folha de atividades (JPEG)",
    "mathpuzzle.download.answer.jpeg": "Folha de respostas (JPEG)",
    "mathpuzzle.download.worksheet.pdf": "Folha de atividades (PDF)",
    "mathpuzzle.download.answer.pdf": "Folha de respostas (PDF)",
    "common.grayscale": "Escala de cinza",
    "mathpuzzle.clear.all": "Limpar tudo",
    "mathpuzzle.msg.generate.complete": "Quebra-cabeça gerado com sucesso!",
    "mathpuzzle.msg.cleared": "Todo o conteúdo foi limpo.",
    "mathpuzzle.msg.download.ready": "Download pronto.",

    // ============= 11. Abas (2 chaves) =============
    "mathpuzzle.tab.worksheet": "Folha de atividades",
    "mathpuzzle.tab.answer": "Folha de respostas",

    // ============= 12. Mensagens de envio e tema (13 chaves) =============
    "mathpuzzle.msg.loading.uploads": "Carregando {filesToLoad} imagem(ns)...",
    "mathpuzzle.msg.uploads.available": "{count} imagem(ns) personalizada(s) disponível(is).",
    "mathpuzzle.msg.file.error": "Erro ao ler o arquivo: {fileName}",
    "mathpuzzle.msg.form.cleared": "Formulário limpo.",
    "mathpuzzle.themes.all": "Todos os temas",
    "mathpuzzle.msg.themes.error": "Erro ao carregar os temas.",
    "mathpuzzle.msg.loading.theme": "Carregando imagens do tema...",
    "mathpuzzle.msg.loading.default": "Carregando tema padrão...",
    "mathpuzzle.msg.type.search": "Digite para buscar em todas as imagens.",
    "mathpuzzle.msg.searching": "Buscando...",
    "mathpuzzle.msg.search.error": "Erro durante a busca.",
    "mathpuzzle.msg.no.images": "Nenhuma imagem encontrada{query}",
    "mathpuzzle.msg.theme.loaded": "Tema carregado com sucesso.",

    // ============= 13. Mensagens de carregamento de recursos (10 chaves) =============
    "mathpuzzle.msg.loading.backgrounds": "Carregando fundos...",
    "mathpuzzle.msg.backgrounds.error": "Erro ao carregar os fundos.",
    "mathpuzzle.msg.background.failed": "Não foi possível carregar a imagem de fundo.",
    "mathpuzzle.msg.loading.borders": "Carregando bordas...",
    "mathpuzzle.msg.borders.error": "Erro ao carregar as bordas.",
    "mathpuzzle.msg.no.items": "Não há itens neste tema.",
    "mathpuzzle.msg.border.failed": "Não foi possível carregar a imagem da borda.",
    "mathpuzzle.asset.loaded": "{type} carregado com sucesso.",
    "mathpuzzle.asset.none": "Nenhum {type} disponível.",
    "mathpuzzle.asset.select": "Selecione um tema para ver {type}.",

    // ============= 14. Mensagens de geração (8 chaves) =============
    "mathpuzzle.msg.using.upload": "Nenhuma imagem da biblioteca selecionada. Usando «{imageName}» dos seus envios.",
    "mathpuzzle.msg.generating.data": "Gerando dados do quebra-cabeça...",
    "mathpuzzle.msg.rendering.worksheet": "Criando folha de atividades...",
    "mathpuzzle.msg.worksheet.success": "Folha de atividades gerada com sucesso!",
    "mathpuzzle.msg.generate.first": "Por favor, gere primeiro uma folha de atividades.",
    "mathpuzzle.msg.rendering.answer": "Criando folha de respostas...",
    "mathpuzzle.msg.answer.generated": "Folha de respostas gerada!",
    "mathpuzzle.msg.generation.error": "Erro ao gerar o quebra-cabeça: {error}",

    // ============= 15. Mensagens de download e PDF (14 chaves) =============
    "mathpuzzle.msg.preparing.jpeg": "Preparando JPEG... Por favor aguarde.",
    "mathpuzzle.msg.jpeg.error": "Erro ao preparar o JPEG: {error}",
    "mathpuzzle.watermark.main": "VERSÃO GRATUITA - LessonCraftStudio.com",
    "mathpuzzle.watermark.text": "VERSÃO GRATUITA",
    "mathpuzzle.msg.generate.content": "Por favor, gere primeiro o conteúdo.",
    "mathpuzzle.msg.preparing.pdf": "Preparando PDF...",
    "mathpuzzle.msg.pdf.downloaded": "PDF baixado!",
    "mathpuzzle.msg.pdf.error": "Erro ao criar o PDF.",
    "mathpuzzle.msg.generate.worksheet.first": "Por favor, gere primeiro uma folha de atividades.",
    "mathpuzzle.msg.preparing.jpeg.simple": "Preparando JPEG...",
    "mathpuzzle.msg.jpeg.initiated": "Download do JPEG iniciado!",
    "mathpuzzle.msg.jpeg.error.simple": "Erro ao preparar o JPEG.",
    "mathpuzzle.msg.preparing.pdf.wait": "Preparando PDF... Por favor aguarde.",
    "mathpuzzle.msg.pdf.error.detailed": "Erro ao criar o PDF: {error}",

    // ============= 16. Termos gerais (3 chaves) =============
    "common.none": "Nenhum",
    "common.loading": "Carregando...",
    "common.error": "Erro",

    // ============= 17. Mensagens de erro (Adicionais) =============
    "error.invalid.dimensions": "Dimensões inválidas. Por favor verifique linhas e colunas.",
    "error.no.image.selected": "Por favor selecione uma imagem para o quebra-cabeça.",
    "error.no.theme.selected": "Por favor selecione primeiro um tema.",
    "error.upload.failed": "Falha no envio. Por favor tente novamente.",
    "error.file.too.large": "Arquivo muito grande. Tamanho máximo: 5MB.",
    "error.invalid.file.type": "Tipo de arquivo inválido. Por favor envie apenas imagens.",
    "error.canvas.creation": "Erro ao criar a tela.",
    "error.export.failed": "Falha na exportação. Por favor tente novamente.",
    "error.network": "Erro de rede. Por favor verifique sua conexão.",
    "error.puzzle.generation": "Não foi possível gerar o quebra-cabeça. Tente com configurações diferentes.",
    "error.invalid.operation": "Operação selecionada inválida.",
    "error.grid.size": "O tamanho da grade deve estar entre 2 e 4.",
    "error.no.solution": "Nenhuma solução encontrada para o quebra-cabeça.",
    "error.text.empty": "Por favor insira o conteúdo do texto.",
    "error.object.selection": "Por favor selecione um objeto para modificar.",
    "error.alignment": "Erro ao alinhar os objetos.",
    "error.layer.operation": "Erro ao alterar a ordem das camadas.",
    "error.delete.operation": "Erro ao excluir os objetos.",
    "error.color.invalid": "Valor de cor inválido.",
    "error.size.invalid": "Valor de tamanho inválido.",
    "error.outline.invalid": "Largura do contorno inválida.",
    "error.opacity.invalid": "Valor de opacidade inválido.",
    "error.theme.not.found": "Tema não encontrado.",
    "error.api.connection": "Não foi possível conectar ao servidor.",
    "error.session.expired": "Sessão expirada. Por favor atualize a página.",
    "error.browser.unsupported": "Seu navegador não é suportado. Por favor use um navegador moderno.",
    "error.feature.unavailable": "Esta função não está disponível na versão gratuita."
  }
};

// ==========================================
// FUNÇÕES UTILITÁRIAS PARA A TRADUÇÃO PORTUGUESA
// ==========================================

/**
 * Obter tradução portuguesa para uma chave
 * @param {string} key - Chave de tradução
 * @param {object} params - Parâmetros para interpolação
 * @returns {string} Texto traduzido
 */
function getPortugueseMathPuzzleTranslation(key, params = {}) {
  const translation = MATH_PUZZLE_TRANSLATIONS_PT.pt[key] || key;
  return formatPortugueseMathPuzzleTranslation(translation, params);
}

/**
 * Formatar tradução portuguesa com parâmetros
 * @param {string} text - Texto com marcadores
 * @param {object} params - Parâmetros que substituem os marcadores
 * @returns {string} Texto formatado
 */
function formatPortugueseMathPuzzleTranslation(text, params) {
  let formattedText = text;
  for (const [key, value] of Object.entries(params)) {
    formattedText = formattedText.replace(new RegExp(`\\{${key}\\}`, 'g'), value);
  }
  return formattedText;
}

/**
 * Validar traduções portuguesas
 * @returns {object} Resultado da validação
 */
function validatePortugueseMathPuzzleTranslations() {
  const keys = Object.keys(MATH_PUZZLE_TRANSLATIONS_PT.pt);
  const missingKeys = [];
  const emptyTranslations = [];

  // Verificar traduções vazias
  keys.forEach(key => {
    const value = MATH_PUZZLE_TRANSLATIONS_PT.pt[key];
    if (!value || value.trim() === '') {
      emptyTranslations.push(key);
    }
  });

  return {
    totalKeys: keys.length,
    validKeys: keys.length - emptyTranslations.length,
    missingKeys,
    emptyTranslations,
    coverage: `${((keys.length - emptyTranslations.length) / keys.length * 100).toFixed(1)}%`,
    isComplete: emptyTranslations.length === 0
  };
}

// ==========================================
// TERMOS MATEMÁTICOS PARA A VERSÃO PORTUGUESA
// ==========================================

/**
 * Termos portugueses para operações matemáticas
 * Utilizados no contexto educacional
 */
const PORTUGUESE_MATH_OPERATIONS = {
  addition: "Adição",
  subtraction: "Subtração",
  multiplication: "Multiplicação",
  division: "Divisão",
  both: "Adição e subtração",
  all: "Todas as operações",
  plus: "Mais",
  minus: "Menos",
  times: "Vezes",
  dividedBy: "Dividido por",
  equals: "Igual a",
  result: "Resultado",
  solution: "Solução",
  calculate: "Calcular",
  solve: "Resolver"
};

/**
 * Termos portugueses para elementos do quebra-cabeça
 */
const PORTUGUESE_PUZZLE_TERMS = {
  puzzle: "Quebra-cabeça",
  mathPuzzle: "Quebra-cabeça matemático",
  worksheet: "Folha de atividades",
  answerKey: "Folha de respostas",
  grid: "Grade",
  row: "Linha",
  column: "Coluna",
  cell: "Célula",
  image: "Imagem",
  number: "Número",
  question: "Questão",
  answer: "Resposta",
  exercise: "Exercício",
  activity: "Atividade"
};

// ==========================================
// EXPORTAR PARA USO EM OUTROS MÓDULOS
// ==========================================

if (typeof module !== 'undefined' && module.exports) {
  module.exports = {
    MATH_PUZZLE_TRANSLATIONS_PT,
    getPortugueseMathPuzzleTranslation,
    formatPortugueseMathPuzzleTranslation,
    validatePortugueseMathPuzzleTranslations,
    PORTUGUESE_MATH_OPERATIONS,
    PORTUGUESE_PUZZLE_TERMS
  };
}

// Disponibilizar globalmente no navegador
if (typeof window !== 'undefined') {
  window.MATH_PUZZLE_TRANSLATIONS_PT = MATH_PUZZLE_TRANSLATIONS_PT;
  window.getPortugueseMathPuzzleTranslation = getPortugueseMathPuzzleTranslation;
  window.formatPortugueseMathPuzzleTranslation = formatPortugueseMathPuzzleTranslation;
  window.validatePortugueseMathPuzzleTranslations = validatePortugueseMathPuzzleTranslations;
  window.PORTUGUESE_MATH_OPERATIONS = PORTUGUESE_MATH_OPERATIONS;
  window.PORTUGUESE_PUZZLE_TERMS = PORTUGUESE_PUZZLE_TERMS;
}