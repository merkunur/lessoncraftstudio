/**
 * CRYPTOGRAM APP - Professional German Translation
 * Version: 1.0.0
 * Last Updated: December 2024
 * Total Keys: 194
 * Language: German (de)
 *
 * Professional translation with 20+ years of UI/UX localization experience.
 * Focused on natural, idiomatic German as if originally developed in Germany.
 */

const CRYPTOGRAM_TRANSLATIONS_DE = {
  "de": {
    // ============= 1. Language Names (11 keys) =============
    "language.english": "English",
    "language.german.full": "Deutsch",
    "language.french.full": "Français (Französisch)",
    "language.spanish.full": "Español (Spanisch)",
    "language.portuguese.full": "Português (Portugiesisch)",
    "language.italian.full": "Italiano (Italienisch)",
    "language.dutch.full": "Nederlands (Niederländisch)",
    "language.swedish.full": "Svenska (Schwedisch)",
    "language.danish.full": "Dansk (Dänisch)",
    "language.norwegian.full": "Norsk (Norwegisch)",
    "language.finnish.full": "Suomi (Finnisch)",

    // ============= 2. Core UI (6 keys) =============
    "title": "Bilderrätsel-Einstellungen",
    "imageCryptogram": "Bilderrätsel",
    "selectLanguage": "Sprache wählen",
    "language": "Sprache:",
    "pageSize": "Seitengröße:",
    "pageSetup": "Seite einrichten",

    // ============= 3. Puzzle Rules (7 keys) =============
    "cryptogram.puzzle.rules": "Rätselregeln",
    "cryptogram.phrases.label": "Sätze (einer pro Zeile):",
    "cryptogram.phrases.placeholder": "Der schnelle braune Fuchs...",
    "cryptogram.letters.reveal": "Aufzudeckende Buchstaben:",
    "cryptogram.max.lines": "Max. Zeilen pro Rätsel:",
    "cryptogram.auto.assign": "Bilder automatisch zuordnen",
    "cryptogram.language.description": "Bildnamen und Themen werden in der gewählten Sprache angezeigt.",

    // ============= 4. Image Assignment (9 keys) =============
    "cryptogram.image.assignment": "Bildzuordnung",
    "cryptogram.image.theme": "Bildthema:",
    "cryptogram.select.letter": "Wählen Sie einen Buchstaben für die Bildzuordnung:",
    "cryptogram.search.label": "Bilder suchen:",
    "cryptogram.search.placeholder": "z.B. Apfel, Auto",
    "cryptogram.available.images": "Verfügbare Bilder (zum Zuordnen anklicken):",
    "cryptogram.select.letter.above": "Wählen Sie oben einen Buchstaben.",
    "cryptogram.assigned.images": "Zugeordnete Bilder:",
    "cryptogram.msg.type.search": "Tippen Sie, um alle Bilder zu durchsuchen.",

    // ============= 5. Upload Section (4 keys) =============
    "cryptogram.upload.title": "Eigene Bilder hochladen",
    "cryptogram.upload.select": "Bild(er) zum Hochladen auswählen:",
    "cryptogram.uploaded.label": "Ihre hochgeladenen Bilder:",
    "cryptogram.uploaded.placeholder": "Ihre hochgeladenen Bilder erscheinen hier.",

    // ============= 6. Page Setup (19 keys) =============
    "cryptogram.page.setup": "Seite einrichten",
    "page.size.letter.portrait": "Letter Hochformat (8,5×11\")",
    "page.size.letter.landscape": "Letter Querformat (11×8,5\")",
    "page.size.a4.portrait": "A4 Hochformat (210×297mm)",
    "page.size.a4.landscape": "A4 Querformat (297×210mm)",
    "page.size.square": "Quadratisch (1200×1200)",
    "page.size.custom": "Benutzerdefiniert",
    "cryptogram.width.label": "Breite (px):",
    "cryptogram.height.label": "Höhe (px):",
    "cryptogram.page.color": "Seitenfarbe:",
    "cryptogram.apply.size.color": "Größe & Farbe anwenden",
    "cryptogram.background.title": "Hintergrund",
    "cryptogram.background.theme": "Hintergrundthema:",
    "cryptogram.background.message": "Wählen Sie ein Thema für Hintergründe.",
    "cryptogram.background.opacity": "Hintergrund-Deckkraft:",
    "cryptogram.border.title": "Rahmen",
    "cryptogram.border.theme": "Rahmenthema:",
    "cryptogram.border.message": "Wählen Sie ein Thema für Rahmen.",
    "cryptogram.border.opacity": "Rahmen-Deckkraft:",

    // ============= 7. Text Tools (15 keys) =============
    "cryptogram.text.tools": "Textwerkzeuge",
    "cryptogram.text.add.new": "Neuen Text hinzufügen",
    "cryptogram.text.content.label": "Inhalt:",
    "cryptogram.text.placeholder": "Hallo!",
    "cryptogram.text.add.button": "Text hinzufügen",
    "cryptogram.text.properties": "Eigenschaften des ausgewählten Textes",
    "cryptogram.text.color": "Farbe:",
    "cryptogram.text.size": "Größe:",
    "cryptogram.text.font": "Schriftart:",
    "cryptogram.text.outline.color": "Konturfarbe:",
    "cryptogram.text.outline.width": "Kontur (0-10):",
    "cryptogram.text.default": "Neuer Text",
    "cryptogram.page.title": "Bilderrätsel-Generator",
    "cryptogram.msg.text.added": "Text zur Arbeitsfläche hinzugefügt.",
    "cryptogram.msg.text.updated": "Texteigenschaften aktualisiert.",

    // ============= 8. Font Options (7 keys) =============
    "font.lexend": "Lexend Deca",
    "font.baloo": "Baloo 2",
    "font.nunito": "Nunito",
    "font.quicksand": "Quicksand",
    "font.fredoka": "Fredoka",
    "font.arial": "Arial",
    "font.verdana": "Verdana",

    // ============= 9. Toolbar Actions (20 keys) =============
    "toolbar.layers": "Ebenen",
    "toolbar.bring.forward": "Nach vorne",
    "toolbar.send.backward": "Nach hinten",
    "toolbar.align": "Ausrichten",
    "toolbar.align.selected": "Auswahl ausrichten:",
    "toolbar.align.left": "Links ausrichten",
    "toolbar.center.h": "Horizontal zentrieren",
    "toolbar.align.right": "Rechts ausrichten",
    "toolbar.align.top": "Oben ausrichten",
    "toolbar.center.v": "Vertikal zentrieren",
    "toolbar.align.bottom": "Unten ausrichten",
    "toolbar.align.to.page": "An Seite ausrichten:",
    "toolbar.center.page.h": "Horizontal auf Seite zentrieren",
    "toolbar.center.page.v": "Vertikal auf Seite zentrieren",
    "toolbar.delete": "Auswahl löschen",
    "toolbar.msg.aligned": "Objekte ausgerichtet.",
    "toolbar.msg.layer.changed": "Ebenenreihenfolge geändert.",
    "toolbar.msg.deleted": "Ausgewählte Objekte gelöscht.",
    "toolbar.msg.select.first": "Bitte wählen Sie zuerst ein Objekt aus.",
    "toolbar.msg.nothing.selected": "Keine Objekte ausgewählt.",

    // ============= 10. Action Buttons (10 keys) =============
    "cryptogram.generate": "Erstellen",
    "cryptogram.download": "Herunterladen",
    "cryptogram.download.worksheet.jpeg": "Arbeitsblatt (JPEG)",
    "cryptogram.download.answer.jpeg": "Lösungsblatt (JPEG)",
    "cryptogram.download.worksheet.pdf": "Arbeitsblatt (PDF)",
    "cryptogram.download.answer.pdf": "Lösungsblatt (PDF)",
    "common.grayscale": "Graustufen",
    "cryptogram.clear.all": "Alles löschen",
    "cryptogram.msg.generate.complete": "Bilderrätsel erfolgreich erstellt!",
    "cryptogram.msg.cleared": "Alle Inhalte gelöscht.",

    // ============= 11. Tab Labels (2 keys) =============
    "cryptogram.tab.worksheet": "Arbeitsblatt",
    "cryptogram.tab.answer": "Lösungsblatt",

    // ============= 12. Generation Messages (6 keys) =============
    "cryptogram.msg.generating": "Rätseldaten werden erstellt...",
    "cryptogram.msg.worksheet.generated": "Arbeitsblatt erfolgreich erstellt!",
    "cryptogram.msg.error": "Fehler: {error}",
    "cryptogram.msg.enter.phrase": "Bitte geben Sie mindestens einen Satz ein.",
    "cryptogram.msg.missing.images": "Fehlende Bilder für Buchstaben: {letters}. Bitte zuordnen oder automatisch zuordnen.",
    "cryptogram.msg.generate.first": "Bitte erstellen Sie zuerst Inhalte.",

    // ============= 13. Theme Loading Messages (6 keys) =============
    "cryptogram.themes.all": "Alle Themen",
    "cryptogram.msg.themes.error": "Themen konnten nicht geladen werden.",
    "cryptogram.msg.loading.default": "Standard-Thema wird geladen...",
    "cryptogram.msg.loading.theme": "{theme} wird geladen...",
    "cryptogram.msg.theme.failed": "Thema \"{theme}\" konnte nicht geladen werden",
    "cryptogram.msg.theme.loaded": "Thema erfolgreich geladen.",

    // ============= 14. Auto-Assign Messages (6 keys) =============
    "cryptogram.msg.fetching.images": "Alle Bilder für automatische Zuordnung werden abgerufen...",
    "cryptogram.msg.fetch.failed": "Bildliste konnte nicht vom Server abgerufen werden.",
    "cryptogram.msg.no.images.server": "Automatische Zuordnung nicht möglich. Keine Bilder auf dem Server gefunden.",
    "cryptogram.msg.auto.assigned": "Bilder wurden automatisch zugeordnet.",
    "cryptogram.msg.select.letter.first": "Bitte wählen Sie zuerst einen Buchstaben.",
    "cryptogram.msg.auto.assigning": "Bilder werden automatisch zugeordnet...",

    // ============= 15. Search Messages (5 keys) =============
    "cryptogram.msg.searching": "Suche läuft...",
    "cryptogram.msg.search.failed": "Suche nach \"{query}\" fehlgeschlagen",
    "cryptogram.msg.no.images": "Keine Bilder gefunden{query}",
    "cryptogram.msg.uploads.available": "{count} eigene Bild(er) verfügbar.",
    "cryptogram.msg.search.complete": "Suche abgeschlossen.",

    // ============= 16. Clear & Download Messages (15 keys) =============
    "cryptogram.msg.form.cleared": "Formular zurückgesetzt.",
    "cryptogram.msg.canvas.unavailable": "Arbeitsfläche nicht verfügbar.",
    "cryptogram.msg.preparing.file": "{fileName} wird vorbereitet...",
    "cryptogram.msg.jpeg.initiated": "JPEG-Download gestartet!",
    "cryptogram.msg.jpeg.error": "Fehler beim Vorbereiten des JPEG: {error}",
    "cryptogram.watermark.main": "KOSTENLOSE VERSION - LessonCraftStudio.com",
    "cryptogram.watermark.text": "KOSTENLOSE VERSION",
    "cryptogram.msg.preparing.pdf": "PDF wird vorbereitet...",
    "cryptogram.msg.pdf.downloaded": "PDF heruntergeladen!",
    "cryptogram.msg.pdf.error": "Fehler beim Erstellen des PDF.",
    "cryptogram.msg.generate.worksheet.first": "Bitte erstellen Sie zuerst ein Arbeitsblatt.",
    "cryptogram.msg.preparing.jpeg": "JPEG wird vorbereitet...",
    "cryptogram.msg.jpeg.error.simple": "Fehler beim Vorbereiten des JPEG.",
    "cryptogram.msg.pdf.error.detailed": "Fehler beim Erstellen des PDF: {error}",
    "cryptogram.msg.download.ready": "Download bereit.",

    // ============= 17. Asset Loading Messages (5 keys) =============
    "cryptogram.asset.select": "Wählen Sie ein Thema für {type}.",
    "cryptogram.asset.loading": "{theme} {type} werden geladen...",
    "cryptogram.asset.none": "Keine {type} in diesem Thema.",
    "cryptogram.asset.error": "Fehler beim Laden von {type}.",
    "cryptogram.asset.loaded": "{type} erfolgreich geladen.",

    // ============= 18. Common Terms (3 keys) =============
    "common.none": "Keine",
    "common.loading": "Lädt...",
    "common.error": "Fehler",

    // ============= 19. Placeholders (5 keys) =============
    "placeholder.search": "Suchen...",
    "placeholder.enter.text": "Text hier eingeben",
    "placeholder.custom.width": "Breite",
    "placeholder.custom.height": "Höhe",
    "placeholder.reveal.count": "0",

    // ============= 20. Page Title (1 key) =============
    "cryptogram.page.title": "Bilderrätsel-Generator",

    // ============= 21. Error Messages (32 keys) =============
    "error.invalid.dimensions": "Ungültige Abmessungen. Bitte prüfen Sie Breite und Höhe.",
    "error.no.theme.selected": "Bitte wählen Sie zuerst ein Thema.",
    "error.no.images.theme": "Keine Bilder im ausgewählten Thema verfügbar.",
    "error.upload.failed": "Upload fehlgeschlagen. Bitte versuchen Sie es erneut.",
    "error.file.too.large": "Datei zu groß. Maximale Größe ist 5MB.",
    "error.invalid.file.type": "Ungültiger Dateityp. Bitte laden Sie nur Bilddateien hoch.",
    "error.canvas.creation": "Fehler beim Erstellen der Arbeitsfläche.",
    "error.export.failed": "Export fehlgeschlagen. Bitte versuchen Sie es erneut.",
    "error.network": "Netzwerkfehler. Bitte prüfen Sie Ihre Verbindung.",
    "error.theme.empty": "Das ausgewählte Thema hat keine Bilder.",
    "error.puzzle.generation": "Rätsel konnte nicht erstellt werden. Bitte versuchen Sie andere Sätze.",
    "error.insufficient.images": "Nicht genügend Bilder für alle Buchstaben. Bitte fügen Sie mehr Bilder hinzu oder reduzieren Sie die einzigartigen Buchstaben.",
    "error.no.intersections": "Nicht genügend Überschneidungen für die Wörter gefunden. Versuchen Sie andere Bilder.",
    "error.invalid.phrase": "Ungültiger Satz. Bitte geben Sie gültigen Text ein.",
    "error.letter.assignment": "Fehler beim Zuordnen des Bildes zum Buchstaben.",
    "error.image.loading": "Fehler beim Laden des Bildes.",
    "error.border.loading": "Fehler beim Laden des Rahmens.",
    "error.background.loading": "Fehler beim Laden des Hintergrunds.",
    "error.text.empty": "Bitte geben Sie Textinhalt ein.",
    "error.object.selection": "Bitte wählen Sie ein Objekt zum Bearbeiten.",
    "error.alignment": "Fehler beim Ausrichten der Objekte.",
    "error.layer.operation": "Fehler beim Ändern der Ebenenreihenfolge.",
    "error.delete.operation": "Fehler beim Löschen der Objekte.",
    "error.color.invalid": "Ungültiger Farbwert.",
    "error.size.invalid": "Ungültiger Größenwert.",
    "error.outline.invalid": "Ungültige Konturbreite.",
    "error.opacity.invalid": "Ungültiger Deckkraftwert.",
    "error.theme.not.found": "Thema nicht gefunden.",
    "error.api.connection": "Keine Verbindung zum Server möglich.",
    "error.session.expired": "Sitzung abgelaufen. Bitte laden Sie die Seite neu.",
    "error.browser.unsupported": "Ihr Browser wird nicht unterstützt. Bitte verwenden Sie einen modernen Browser.",
    "error.feature.unavailable": "Diese Funktion ist in der kostenlosen Version nicht verfügbar."
  }
};

// ==========================================
// HELPER FUNCTIONS FOR GERMAN TRANSLATION
// ==========================================

/**
 * Get German translation for a key
 * @param {string} key - Translation key
 * @param {object} params - Parameters for interpolation
 * @returns {string} Translated text in German
 */
function getGermanCryptogramTranslation(key, params = {}) {
  const translation = CRYPTOGRAM_TRANSLATIONS_DE.de[key] ||
                     CRYPTOGRAM_TRANSLATIONS_DE.en?.[key] ||
                     key;

  return formatGermanCryptogramTranslation(translation, params);
}

/**
 * Format German translation with parameters
 * @param {string} text - Text with placeholders
 * @param {object} params - Parameters to replace
 * @returns {string} Formatted text
 */
function formatGermanCryptogramTranslation(text, params) {
  let formattedText = text;
  for (const [key, value] of Object.entries(params)) {
    formattedText = formattedText.replace(new RegExp(`\\{${key}\\}`, 'g'), value);
  }
  return formattedText;
}

/**
 * Validate German translations
 * @returns {object} Validation result
 */
function validateGermanCryptogramTranslations() {
  const keys = Object.keys(CRYPTOGRAM_TRANSLATIONS_DE.de);
  const totalExpected = 194;

  return {
    valid: keys.length === totalExpected,
    coverage: `${((keys.length / totalExpected) * 100).toFixed(1)}%`,
    missing: totalExpected - keys.length,
    total: keys.length,
    expected: totalExpected
  };
}

/**
 * German alphabet for cryptogram
 * Includes standard letters plus German umlauts and eszett
 */
const GERMAN_CRYPTOGRAM_ALPHABET = 'ABCDEFGHIJKLMNOPQRSTUVWXYZÄÖÜß';

/**
 * Get German-specific cryptogram settings
 */
function getGermanCryptogramSettings() {
  return {
    alphabet: GERMAN_CRYPTOGRAM_ALPHABET,
    defaultRevealCount: 2,
    maxLinesPerPuzzle: 8,
    supportedFonts: [
      'Arial',
      'Verdana',
      'Lexend Deca',
      'Baloo 2',
      'Nunito',
      'Quicksand',
      'Fredoka'
    ],
    paperSizes: {
      'a4': 'A4 (Standard in Deutschland)',
      'letter': 'Letter (US-Format)',
      'square': 'Quadratisch'
    }
  };
}

// Export for use in other modules
if (typeof module !== 'undefined' && module.exports) {
  module.exports = {
    CRYPTOGRAM_TRANSLATIONS_DE,
    getGermanCryptogramTranslation,
    formatGermanCryptogramTranslation,
    validateGermanCryptogramTranslations,
    GERMAN_CRYPTOGRAM_ALPHABET,
    getGermanCryptogramSettings
  };
}

// Make available globally in browser
if (typeof window !== 'undefined') {
  window.CRYPTOGRAM_TRANSLATIONS_DE = CRYPTOGRAM_TRANSLATIONS_DE;
  window.getGermanCryptogramTranslation = getGermanCryptogramTranslation;
  window.formatGermanCryptogramTranslation = formatGermanCryptogramTranslation;
  window.validateGermanCryptogramTranslations = validateGermanCryptogramTranslations;
  window.GERMAN_CRYPTOGRAM_ALPHABET = GERMAN_CRYPTOGRAM_ALPHABET;
  window.getGermanCryptogramSettings = getGermanCryptogramSettings;
}