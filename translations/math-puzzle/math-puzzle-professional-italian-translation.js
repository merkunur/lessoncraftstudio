/**
 * Rompicapo Matematico - Traduzione professionale italiana
 * Numero totale di chiavi: 177 + messaggi di errore aggiuntivi
 * Lingua: Italiano (IT)
 *
 * Traduzione realizzata con italiano naturale e idiomatico,
 * come se l'applicazione fosse stata sviluppata in Italia.
 */

const MATH_PUZZLE_TRANSLATIONS_IT = {
  "it": {
    // ============= 1. Nomi delle lingue (11 chiavi) =============
    "language.english": "Inglese",
    "language.german.full": "Deutsch (Tedesco)",
    "language.french.full": "Français (Francese)",
    "language.spanish.full": "Español (Spagnolo)",
    "language.portuguese.full": "Português (Portoghese)",
    "language.italian.full": "Italiano",
    "language.dutch.full": "Nederlands (Olandese)",
    "language.swedish.full": "Svenska (Svedese)",
    "language.danish.full": "Dansk (Danese)",
    "language.norwegian.full": "Norsk (Norvegese)",
    "language.finnish.full": "Suomi (Finlandese)",

    // ============= 2. Interfaccia principale (27 chiavi) =============
    "mathPuzzle": "Rompicapo Matematico",
    "pageSettings": "Impostazioni pagina",
    "selectLanguage": "Seleziona lingua",
    "language": "Lingua:",
    "pageSize": "Formato pagina:",
    "pageColor": "Colore pagina:",
    "backgroundTheme": "Tema sfondo:",
    "backgroundOpacity": "Opacità sfondo:",
    "borderTheme": "Tema bordo:",
    "borderOpacity": "Opacità bordo:",
    "content": "Contenuto:",
    "color": "Colore:",
    "size": "Dimensione:",
    "font": "Carattere:",
    "outlineColor": "Colore contorno:",
    "outlineWidth": "Contorno (0-10):",
    "rowsRange": "Righe (2–4):",
    "columnsRange": "Colonne (2–4):",
    "operation": "Operazione:",
    "selectTheme": "Seleziona tema:",
    "searchImages": "Cerca immagini:",
    "availableImages": "Immagini disponibili:",
    "selectedImageForPuzzle": "Immagine selezionata per il rompicapo:",
    "selectImagesToUpload": "Seleziona immagine/i da caricare:",
    "yourUploadedImages": "Le tue immagini caricate (questa sessione):",
    "alignToPage": "Allinea alla pagina:",
    "alignSelected": "Allinea selezione:",

    // ============= 3. Impostazioni pagina (17 chiavi) =============
    "mathpuzzle.page.title": "Generatore di Schede Didattiche - Rompicapo Matematico",
    "page.size.letter.portrait": "Letter Verticale (8,5×11″)",
    "page.size.letter.landscape": "Letter Orizzontale (11×8,5″)",
    "page.size.a4.portrait": "A4 Verticale (210×297mm)",
    "page.size.a4.landscape": "A4 Orizzontale (297×210mm)",
    "page.size.default": "Scheda standard (800×1000)",
    "page.size.square": "Quadrato (1200×1200)",
    "mathpuzzle.apply.size.color": "Applica formato e colore",
    "mathpuzzle.background.title": "Sfondo",
    "mathpuzzle.background.message": "Seleziona un tema per gli sfondi.",
    "mathpuzzle.border.title": "Bordo",
    "mathpuzzle.border.message": "Seleziona un tema per i bordi.",
    "mathpuzzle.language.description": "I nomi delle immagini e i temi saranno visualizzati nella lingua selezionata.",
    "mathpuzzle.page.setup": "Configurazione pagina",
    "mathpuzzle.background.opacity": "Opacità sfondo:",
    "mathpuzzle.border.opacity": "Opacità bordo:",
    "mathpuzzle.page.color": "Colore pagina:",

    // ============= 4. Strumenti di testo (15 chiavi) =============
    "mathpuzzle.text.tools": "Strumenti testo",
    "mathpuzzle.text.add.new": "Aggiungi nuovo testo",
    "mathpuzzle.text.placeholder": "Ciao!",
    "mathpuzzle.text.add.button": "Aggiungi testo",
    "mathpuzzle.text.properties": "Proprietà del testo selezionato",
    "mathpuzzle.text.content": "Contenuto:",
    "mathpuzzle.text.color": "Colore:",
    "mathpuzzle.text.size": "Dimensione:",
    "mathpuzzle.text.font": "Carattere:",
    "mathpuzzle.text.outline.color": "Colore contorno:",
    "mathpuzzle.text.outline.width": "Contorno (0-10):",
    "mathpuzzle.text.default": "Nuovo testo",
    "mathpuzzle.msg.text.added": "Testo aggiunto alla tela.",
    "mathpuzzle.msg.text.updated": "Proprietà del testo aggiornate.",
    "mathpuzzle.msg.text.deleted": "Testo eliminato.",

    // ============= 5. Configurazione rompicapo (6 chiavi) =============
    "mathpuzzle.puzzle.config": "Configurazione rompicapo",
    "operation.addition": "Addizione",
    "operation.subtraction": "Sottrazione",
    "operation.both": "Addizione e sottrazione",
    "mathpuzzle.rows.label": "Righe (2–4):",
    "mathpuzzle.columns.label": "Colonne (2–4):",

    // ============= 6. Libreria immagini (7 chiavi) =============
    "mathpuzzle.image.library": "Libreria immagini",
    "mathpuzzle.search.placeholder": "es. gatto, mela",
    "mathpuzzle.loading.images": "Caricamento immagini...",
    "mathpuzzle.none.selected": "Nessuna selezionata",
    "mathpuzzle.available.images": "Immagini disponibili:",
    "mathpuzzle.selected.image": "Immagine selezionata per il rompicapo:",
    "mathpuzzle.select.theme": "Seleziona tema:",

    // ============= 7. Sezione caricamento (4 chiavi) =============
    "mathpuzzle.upload.custom": "Carica immagini personalizzate",
    "mathpuzzle.uploaded.placeholder": "Le tue immagini caricate appariranno qui.",
    "mathpuzzle.upload.select": "Seleziona immagine/i da caricare:",
    "mathpuzzle.uploaded.label": "Le tue immagini caricate (questa sessione):",

    // ============= 8. Opzioni carattere (7 chiavi) =============
    "font.lexend": "Lexend Deca",
    "font.baloo": "Baloo 2",
    "font.nunito": "Nunito",
    "font.quicksand": "Quicksand",
    "font.fredoka": "Fredoka",
    "font.arial": "Arial",
    "font.verdana": "Verdana",

    // ============= 9. Azioni della barra degli strumenti (20 chiavi) =============
    "toolbar.layers": "Livelli",
    "toolbar.bring.forward": "Porta avanti",
    "toolbar.send.backward": "Porta indietro",
    "toolbar.align": "Allinea",
    "toolbar.align.selected": "Allinea selezione:",
    "toolbar.align.left": "Allinea a sinistra",
    "toolbar.center.h": "Centra orizzontalmente",
    "toolbar.align.right": "Allinea a destra",
    "toolbar.align.top": "Allinea in alto",
    "toolbar.center.v": "Centra verticalmente",
    "toolbar.align.bottom": "Allinea in basso",
    "toolbar.align.to.page": "Allinea alla pagina:",
    "toolbar.center.page.h": "Centra orizzontalmente sulla pagina",
    "toolbar.center.page.v": "Centra verticalmente sulla pagina",
    "toolbar.delete": "Elimina selezione",
    "toolbar.msg.aligned": "Oggetti allineati.",
    "toolbar.msg.layer.changed": "Ordine dei livelli modificato.",
    "toolbar.msg.deleted": "Oggetti selezionati eliminati.",
    "toolbar.msg.select.first": "Seleziona prima un oggetto.",
    "toolbar.msg.nothing.selected": "Nessun oggetto selezionato.",

    // ============= 10. Pulsanti azione (13 chiavi) =============
    "mathpuzzle.generate": "Genera",
    "mathpuzzle.generate.worksheet": "Genera scheda",
    "mathpuzzle.generate.answer": "Genera soluzioni",
    "mathpuzzle.download": "Scarica",
    "mathpuzzle.download.worksheet.jpeg": "Scheda esercizi (JPEG)",
    "mathpuzzle.download.answer.jpeg": "Foglio soluzioni (JPEG)",
    "mathpuzzle.download.worksheet.pdf": "Scheda esercizi (PDF)",
    "mathpuzzle.download.answer.pdf": "Foglio soluzioni (PDF)",
    "common.grayscale": "Scala di grigi",
    "mathpuzzle.clear.all": "Cancella tutto",
    "mathpuzzle.msg.generate.complete": "Rompicapo generato con successo!",
    "mathpuzzle.msg.cleared": "Tutto il contenuto è stato cancellato.",
    "mathpuzzle.msg.download.ready": "Download pronto.",

    // ============= 11. Schede (2 chiavi) =============
    "mathpuzzle.tab.worksheet": "Scheda esercizi",
    "mathpuzzle.tab.answer": "Foglio soluzioni",

    // ============= 12. Messaggi caricamento e tema (13 chiavi) =============
    "mathpuzzle.msg.loading.uploads": "Caricamento di {filesToLoad} immagine/i...",
    "mathpuzzle.msg.uploads.available": "{count} immagine/i personalizzata/e disponibile/i.",
    "mathpuzzle.msg.file.error": "Errore nella lettura del file: {fileName}",
    "mathpuzzle.msg.form.cleared": "Modulo cancellato.",
    "mathpuzzle.themes.all": "Tutti i temi",
    "mathpuzzle.msg.themes.error": "Errore nel caricamento dei temi.",
    "mathpuzzle.msg.loading.theme": "Caricamento immagini del tema...",
    "mathpuzzle.msg.loading.default": "Caricamento tema predefinito...",
    "mathpuzzle.msg.type.search": "Digita per cercare in tutte le immagini.",
    "mathpuzzle.msg.searching": "Ricerca in corso...",
    "mathpuzzle.msg.search.error": "Errore durante la ricerca.",
    "mathpuzzle.msg.no.images": "Nessuna immagine trovata{query}",
    "mathpuzzle.msg.theme.loaded": "Tema caricato con successo.",

    // ============= 13. Messaggi caricamento risorse (10 chiavi) =============
    "mathpuzzle.msg.loading.backgrounds": "Caricamento sfondi...",
    "mathpuzzle.msg.backgrounds.error": "Errore nel caricamento degli sfondi.",
    "mathpuzzle.msg.background.failed": "Impossibile caricare l'immagine di sfondo.",
    "mathpuzzle.msg.loading.borders": "Caricamento bordi...",
    "mathpuzzle.msg.borders.error": "Errore nel caricamento dei bordi.",
    "mathpuzzle.msg.no.items": "Nessun elemento in questo tema.",
    "mathpuzzle.msg.border.failed": "Impossibile caricare l'immagine del bordo.",
    "mathpuzzle.asset.loaded": "{type} caricato con successo.",
    "mathpuzzle.asset.none": "Nessun {type} disponibile.",
    "mathpuzzle.asset.select": "Seleziona un tema per vedere {type}.",

    // ============= 14. Messaggi generazione (8 chiavi) =============
    "mathpuzzle.msg.using.upload": "Nessuna immagine di libreria selezionata. Uso «{imageName}» dai tuoi caricamenti.",
    "mathpuzzle.msg.generating.data": "Generazione dati del rompicapo...",
    "mathpuzzle.msg.rendering.worksheet": "Creazione scheda esercizi...",
    "mathpuzzle.msg.worksheet.success": "Scheda esercizi generata con successo!",
    "mathpuzzle.msg.generate.first": "Genera prima una scheda esercizi.",
    "mathpuzzle.msg.rendering.answer": "Creazione foglio soluzioni...",
    "mathpuzzle.msg.answer.generated": "Foglio soluzioni generato!",
    "mathpuzzle.msg.generation.error": "Errore nella generazione del rompicapo: {error}",

    // ============= 15. Messaggi download e PDF (14 chiavi) =============
    "mathpuzzle.msg.preparing.jpeg": "Preparazione JPEG... Attendere prego.",
    "mathpuzzle.msg.jpeg.error": "Errore nella preparazione del JPEG: {error}",
    "mathpuzzle.watermark.main": "VERSIONE GRATUITA - LessonCraftStudio.com",
    "mathpuzzle.watermark.text": "VERSIONE GRATUITA",
    "mathpuzzle.msg.generate.content": "Genera prima il contenuto.",
    "mathpuzzle.msg.preparing.pdf": "Preparazione PDF...",
    "mathpuzzle.msg.pdf.downloaded": "PDF scaricato!",
    "mathpuzzle.msg.pdf.error": "Errore nella creazione del PDF.",
    "mathpuzzle.msg.generate.worksheet.first": "Genera prima una scheda esercizi.",
    "mathpuzzle.msg.preparing.jpeg.simple": "Preparazione JPEG...",
    "mathpuzzle.msg.jpeg.initiated": "Download JPEG avviato!",
    "mathpuzzle.msg.jpeg.error.simple": "Errore nella preparazione del JPEG.",
    "mathpuzzle.msg.preparing.pdf.wait": "Preparazione PDF... Attendere prego.",
    "mathpuzzle.msg.pdf.error.detailed": "Errore nella creazione del PDF: {error}",

    // ============= 16. Termini generali (3 chiavi) =============
    "common.none": "Nessuno",
    "common.loading": "Caricamento...",
    "common.error": "Errore",

    // ============= 17. Messaggi di errore (Aggiuntivi) =============
    "error.invalid.dimensions": "Dimensioni non valide. Controlla righe e colonne.",
    "error.no.image.selected": "Seleziona un'immagine per il rompicapo.",
    "error.no.theme.selected": "Seleziona prima un tema.",
    "error.upload.failed": "Caricamento fallito. Riprova.",
    "error.file.too.large": "File troppo grande. Dimensione massima: 5MB.",
    "error.invalid.file.type": "Tipo di file non valido. Carica solo immagini.",
    "error.canvas.creation": "Errore nella creazione della tela.",
    "error.export.failed": "Esportazione fallita. Riprova.",
    "error.network": "Errore di rete. Controlla la connessione.",
    "error.puzzle.generation": "Impossibile generare il rompicapo. Prova con impostazioni diverse.",
    "error.invalid.operation": "Operazione selezionata non valida.",
    "error.grid.size": "La dimensione della griglia deve essere tra 2 e 4.",
    "error.no.solution": "Nessuna soluzione trovata per il rompicapo.",
    "error.text.empty": "Inserisci il contenuto del testo.",
    "error.object.selection": "Seleziona un oggetto da modificare.",
    "error.alignment": "Errore nell'allineamento degli oggetti.",
    "error.layer.operation": "Errore nel cambiamento dell'ordine dei livelli.",
    "error.delete.operation": "Errore nell'eliminazione degli oggetti.",
    "error.color.invalid": "Valore colore non valido.",
    "error.size.invalid": "Valore dimensione non valido.",
    "error.outline.invalid": "Larghezza contorno non valida.",
    "error.opacity.invalid": "Valore opacità non valido.",
    "error.theme.not.found": "Tema non trovato.",
    "error.api.connection": "Impossibile connettersi al server.",
    "error.session.expired": "Sessione scaduta. Aggiorna la pagina.",
    "error.browser.unsupported": "Browser non supportato. Usa un browser moderno.",
    "error.feature.unavailable": "Questa funzione non è disponibile nella versione gratuita."
  }
};

// ==========================================
// FUNZIONI DI UTILITÀ PER LA TRADUZIONE ITALIANA
// ==========================================

/**
 * Ottieni traduzione italiana per una chiave
 * @param {string} key - Chiave di traduzione
 * @param {object} params - Parametri per interpolazione
 * @returns {string} Testo tradotto
 */
function getItalianMathPuzzleTranslation(key, params = {}) {
  const translation = MATH_PUZZLE_TRANSLATIONS_IT.it[key] || key;
  return formatItalianMathPuzzleTranslation(translation, params);
}

/**
 * Formatta traduzione italiana con parametri
 * @param {string} text - Testo con segnaposto
 * @param {object} params - Parametri che sostituiscono i segnaposto
 * @returns {string} Testo formattato
 */
function formatItalianMathPuzzleTranslation(text, params) {
  let formattedText = text;
  for (const [key, value] of Object.entries(params)) {
    formattedText = formattedText.replace(new RegExp(`\\{${key}\\}`, 'g'), value);
  }
  return formattedText;
}

/**
 * Valida traduzioni italiane
 * @returns {object} Risultato della validazione
 */
function validateItalianMathPuzzleTranslations() {
  const keys = Object.keys(MATH_PUZZLE_TRANSLATIONS_IT.it);
  const missingKeys = [];
  const emptyTranslations = [];

  // Verifica traduzioni vuote
  keys.forEach(key => {
    const value = MATH_PUZZLE_TRANSLATIONS_IT.it[key];
    if (!value || value.trim() === '') {
      emptyTranslations.push(key);
    }
  });

  return {
    totalKeys: keys.length,
    validKeys: keys.length - emptyTranslations.length,
    missingKeys,
    emptyTranslations,
    coverage: `${((keys.length - emptyTranslations.length) / keys.length * 100).toFixed(1)}%`,
    isComplete: emptyTranslations.length === 0
  };
}

// ==========================================
// TERMINI MATEMATICI PER LA VERSIONE ITALIANA
// ==========================================

/**
 * Termini italiani per operazioni matematiche
 * Utilizzati nel contesto educativo
 */
const ITALIAN_MATH_OPERATIONS = {
  addition: "Addizione",
  subtraction: "Sottrazione",
  multiplication: "Moltiplicazione",
  division: "Divisione",
  both: "Addizione e sottrazione",
  all: "Tutte le operazioni",
  plus: "Più",
  minus: "Meno",
  times: "Per",
  dividedBy: "Diviso",
  equals: "Uguale",
  result: "Risultato",
  solution: "Soluzione",
  calculate: "Calcolare",
  solve: "Risolvere"
};

/**
 * Termini italiani per elementi del rompicapo
 */
const ITALIAN_PUZZLE_TERMS = {
  puzzle: "Rompicapo",
  mathPuzzle: "Rompicapo matematico",
  worksheet: "Scheda esercizi",
  answerKey: "Foglio soluzioni",
  grid: "Griglia",
  row: "Riga",
  column: "Colonna",
  cell: "Cella",
  image: "Immagine",
  number: "Numero",
  question: "Domanda",
  answer: "Risposta",
  exercise: "Esercizio"
};

// ==========================================
// ESPORTAZIONE PER USO IN ALTRI MODULI
// ==========================================

if (typeof module !== 'undefined' && module.exports) {
  module.exports = {
    MATH_PUZZLE_TRANSLATIONS_IT,
    getItalianMathPuzzleTranslation,
    formatItalianMathPuzzleTranslation,
    validateItalianMathPuzzleTranslations,
    ITALIAN_MATH_OPERATIONS,
    ITALIAN_PUZZLE_TERMS
  };
}

// Rendi disponibile globalmente nel browser
if (typeof window !== 'undefined') {
  window.MATH_PUZZLE_TRANSLATIONS_IT = MATH_PUZZLE_TRANSLATIONS_IT;
  window.getItalianMathPuzzleTranslation = getItalianMathPuzzleTranslation;
  window.formatItalianMathPuzzleTranslation = formatItalianMathPuzzleTranslation;
  window.validateItalianMathPuzzleTranslations = validateItalianMathPuzzleTranslations;
  window.ITALIAN_MATH_OPERATIONS = ITALIAN_MATH_OPERATIONS;
  window.ITALIAN_PUZZLE_TERMS = ITALIAN_PUZZLE_TERMS;
}