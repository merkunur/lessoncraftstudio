/**
 * Casse-tête Mathématique - Traduction française professionnelle
 * Nombre total de clés : 177 + messages d'erreur supplémentaires
 * Langue : Français (FR)
 *
 * Traduction réalisée avec un français naturel et idiomatique,
 * comme si l'application avait été développée en France.
 */

const MATH_PUZZLE_TRANSLATIONS_FR = {
  "fr": {
    // ============= 1. Noms des langues (11 clés) =============
    "language.english": "Anglais",
    "language.german.full": "Deutsch (Allemand)",
    "language.french.full": "Français",
    "language.spanish.full": "Español (Espagnol)",
    "language.portuguese.full": "Português (Portugais)",
    "language.italian.full": "Italiano (Italien)",
    "language.dutch.full": "Nederlands (Néerlandais)",
    "language.swedish.full": "Svenska (Suédois)",
    "language.danish.full": "Dansk (Danois)",
    "language.norwegian.full": "Norsk (Norvégien)",
    "language.finnish.full": "Suomi (Finnois)",

    // ============= 2. Interface principale (27 clés) =============
    "mathPuzzle": "Casse-tête Mathématique",
    "pageSettings": "Paramètres de page",
    "selectLanguage": "Sélectionner la langue",
    "language": "Langue :",
    "pageSize": "Format de page :",
    "pageColor": "Couleur de page :",
    "backgroundTheme": "Thème d'arrière-plan :",
    "backgroundOpacity": "Opacité de l'arrière-plan :",
    "borderTheme": "Thème de bordure :",
    "borderOpacity": "Opacité de la bordure :",
    "content": "Contenu :",
    "color": "Couleur :",
    "size": "Taille :",
    "font": "Police :",
    "outlineColor": "Couleur du contour :",
    "outlineWidth": "Contour (0-10) :",
    "rowsRange": "Lignes (2–4) :",
    "columnsRange": "Colonnes (2–4) :",
    "operation": "Opération :",
    "selectTheme": "Sélectionner un thème :",
    "searchImages": "Rechercher des images :",
    "availableImages": "Images disponibles :",
    "selectedImageForPuzzle": "Image sélectionnée pour le casse-tête :",
    "selectImagesToUpload": "Sélectionner image(s) à téléverser :",
    "yourUploadedImages": "Vos images téléversées (cette session) :",
    "alignToPage": "Aligner sur la page :",
    "alignSelected": "Aligner la sélection :",

    // ============= 3. Paramètres de page (17 clés) =============
    "mathpuzzle.page.title": "Générateur de Feuilles d'Exercices - Casse-tête Mathématique",
    "page.size.letter.portrait": "Letter Portrait (8,5×11″)",
    "page.size.letter.landscape": "Letter Paysage (11×8,5″)",
    "page.size.a4.portrait": "A4 Portrait (210×297mm)",
    "page.size.a4.landscape": "A4 Paysage (297×210mm)",
    "page.size.default": "Feuille standard (800×1000)",
    "page.size.square": "Carré (1200×1200)",
    "mathpuzzle.apply.size.color": "Appliquer format et couleur",
    "mathpuzzle.background.title": "Arrière-plan",
    "mathpuzzle.background.message": "Sélectionnez un thème pour les arrière-plans.",
    "mathpuzzle.border.title": "Bordure",
    "mathpuzzle.border.message": "Sélectionnez un thème pour les bordures.",
    "mathpuzzle.language.description": "Les noms d'images et les thèmes seront affichés dans la langue sélectionnée.",
    "mathpuzzle.page.setup": "Configuration de la page",
    "mathpuzzle.background.opacity": "Opacité de l'arrière-plan :",
    "mathpuzzle.border.opacity": "Opacité de la bordure :",
    "mathpuzzle.page.color": "Couleur de page :",

    // ============= 4. Outils de texte (15 clés) =============
    "mathpuzzle.text.tools": "Outils de texte",
    "mathpuzzle.text.add.new": "Ajouter un nouveau texte",
    "mathpuzzle.text.placeholder": "Bonjour !",
    "mathpuzzle.text.add.button": "Ajouter le texte",
    "mathpuzzle.text.properties": "Propriétés du texte sélectionné",
    "mathpuzzle.text.content": "Contenu :",
    "mathpuzzle.text.color": "Couleur :",
    "mathpuzzle.text.size": "Taille :",
    "mathpuzzle.text.font": "Police :",
    "mathpuzzle.text.outline.color": "Couleur du contour :",
    "mathpuzzle.text.outline.width": "Contour (0-10) :",
    "mathpuzzle.text.default": "Nouveau texte",
    "mathpuzzle.msg.text.added": "Texte ajouté au canevas.",
    "mathpuzzle.msg.text.updated": "Propriétés du texte mises à jour.",
    "mathpuzzle.msg.text.deleted": "Texte supprimé.",

    // ============= 5. Configuration du casse-tête (6 clés) =============
    "mathpuzzle.puzzle.config": "Configuration du casse-tête",
    "operation.addition": "Addition",
    "operation.subtraction": "Soustraction",
    "operation.both": "Addition et soustraction",
    "mathpuzzle.rows.label": "Lignes (2–4) :",
    "mathpuzzle.columns.label": "Colonnes (2–4) :",

    // ============= 6. Bibliothèque d'images (7 clés) =============
    "mathpuzzle.image.library": "Bibliothèque d'images",
    "mathpuzzle.search.placeholder": "ex. chat, pomme",
    "mathpuzzle.loading.images": "Chargement des images...",
    "mathpuzzle.none.selected": "Aucune sélection",
    "mathpuzzle.available.images": "Images disponibles :",
    "mathpuzzle.selected.image": "Image sélectionnée pour le casse-tête :",
    "mathpuzzle.select.theme": "Sélectionner un thème :",

    // ============= 7. Section de téléversement (4 clés) =============
    "mathpuzzle.upload.custom": "Téléverser des images personnalisées",
    "mathpuzzle.uploaded.placeholder": "Vos images téléversées apparaîtront ici.",
    "mathpuzzle.upload.select": "Sélectionner image(s) à téléverser :",
    "mathpuzzle.uploaded.label": "Vos images téléversées (cette session) :",

    // ============= 8. Options de police (7 clés) =============
    "font.lexend": "Lexend Deca",
    "font.baloo": "Baloo 2",
    "font.nunito": "Nunito",
    "font.quicksand": "Quicksand",
    "font.fredoka": "Fredoka",
    "font.arial": "Arial",
    "font.verdana": "Verdana",

    // ============= 9. Actions de la barre d'outils (20 clés) =============
    "toolbar.layers": "Calques",
    "toolbar.bring.forward": "Avancer",
    "toolbar.send.backward": "Reculer",
    "toolbar.align": "Aligner",
    "toolbar.align.selected": "Aligner la sélection :",
    "toolbar.align.left": "Aligner à gauche",
    "toolbar.center.h": "Centrer horizontalement",
    "toolbar.align.right": "Aligner à droite",
    "toolbar.align.top": "Aligner en haut",
    "toolbar.center.v": "Centrer verticalement",
    "toolbar.align.bottom": "Aligner en bas",
    "toolbar.align.to.page": "Aligner sur la page :",
    "toolbar.center.page.h": "Centrer horizontalement sur la page",
    "toolbar.center.page.v": "Centrer verticalement sur la page",
    "toolbar.delete": "Supprimer la sélection",
    "toolbar.msg.aligned": "Objets alignés.",
    "toolbar.msg.layer.changed": "Ordre des calques modifié.",
    "toolbar.msg.deleted": "Objets sélectionnés supprimés.",
    "toolbar.msg.select.first": "Veuillez d'abord sélectionner un objet.",
    "toolbar.msg.nothing.selected": "Aucun objet sélectionné.",

    // ============= 10. Boutons d'action (13 clés) =============
    "mathpuzzle.generate": "Générer",
    "mathpuzzle.generate.worksheet": "Générer la feuille",
    "mathpuzzle.generate.answer": "Générer le corrigé",
    "mathpuzzle.download": "Télécharger",
    "mathpuzzle.download.worksheet.jpeg": "Feuille d'exercices (JPEG)",
    "mathpuzzle.download.answer.jpeg": "Corrigé (JPEG)",
    "mathpuzzle.download.worksheet.pdf": "Feuille d'exercices (PDF)",
    "mathpuzzle.download.answer.pdf": "Corrigé (PDF)",
    "common.grayscale": "Niveaux de gris",
    "mathpuzzle.clear.all": "Tout effacer",
    "mathpuzzle.msg.generate.complete": "Casse-tête généré avec succès !",
    "mathpuzzle.msg.cleared": "Tout le contenu a été effacé.",
    "mathpuzzle.msg.download.ready": "Téléchargement prêt.",

    // ============= 11. Onglets (2 clés) =============
    "mathpuzzle.tab.worksheet": "Feuille d'exercices",
    "mathpuzzle.tab.answer": "Corrigé",

    // ============= 12. Messages de téléversement et thème (13 clés) =============
    "mathpuzzle.msg.loading.uploads": "Chargement de {filesToLoad} image(s)...",
    "mathpuzzle.msg.uploads.available": "{count} image(s) personnalisée(s) disponible(s).",
    "mathpuzzle.msg.file.error": "Erreur lors de la lecture du fichier : {fileName}",
    "mathpuzzle.msg.form.cleared": "Formulaire effacé.",
    "mathpuzzle.themes.all": "Tous les thèmes",
    "mathpuzzle.msg.themes.error": "Erreur lors du chargement des thèmes.",
    "mathpuzzle.msg.loading.theme": "Chargement des images du thème...",
    "mathpuzzle.msg.loading.default": "Chargement du thème par défaut...",
    "mathpuzzle.msg.type.search": "Tapez pour rechercher dans toutes les images.",
    "mathpuzzle.msg.searching": "Recherche en cours...",
    "mathpuzzle.msg.search.error": "Erreur lors de la recherche.",
    "mathpuzzle.msg.no.images": "Aucune image trouvée{query}",
    "mathpuzzle.msg.theme.loaded": "Thème chargé avec succès.",

    // ============= 13. Messages de chargement des ressources (10 clés) =============
    "mathpuzzle.msg.loading.backgrounds": "Chargement des arrière-plans...",
    "mathpuzzle.msg.backgrounds.error": "Erreur lors du chargement des arrière-plans.",
    "mathpuzzle.msg.background.failed": "Impossible de charger l'image d'arrière-plan.",
    "mathpuzzle.msg.loading.borders": "Chargement des bordures...",
    "mathpuzzle.msg.borders.error": "Erreur lors du chargement des bordures.",
    "mathpuzzle.msg.no.items": "Aucun élément dans ce thème.",
    "mathpuzzle.msg.border.failed": "Impossible de charger l'image de bordure.",
    "mathpuzzle.asset.loaded": "{type} chargé avec succès.",
    "mathpuzzle.asset.none": "Aucun {type} disponible.",
    "mathpuzzle.asset.select": "Sélectionnez un thème pour voir les {type}.",

    // ============= 14. Messages de génération (8 clés) =============
    "mathpuzzle.msg.using.upload": "Aucune image de bibliothèque sélectionnée. Utilisation de « {imageName} » depuis vos téléversements.",
    "mathpuzzle.msg.generating.data": "Génération des données du casse-tête...",
    "mathpuzzle.msg.rendering.worksheet": "Création de la feuille d'exercices...",
    "mathpuzzle.msg.worksheet.success": "Feuille d'exercices générée avec succès !",
    "mathpuzzle.msg.generate.first": "Veuillez d'abord générer une feuille d'exercices.",
    "mathpuzzle.msg.rendering.answer": "Création du corrigé...",
    "mathpuzzle.msg.answer.generated": "Corrigé généré !",
    "mathpuzzle.msg.generation.error": "Erreur lors de la génération du casse-tête : {error}",

    // ============= 15. Messages de téléchargement et PDF (14 clés) =============
    "mathpuzzle.msg.preparing.jpeg": "Préparation du JPEG... Veuillez patienter.",
    "mathpuzzle.msg.jpeg.error": "Erreur lors de la préparation du JPEG : {error}",
    "mathpuzzle.watermark.main": "VERSION GRATUITE - LessonCraftStudio.com",
    "mathpuzzle.watermark.text": "VERSION GRATUITE",
    "mathpuzzle.msg.generate.content": "Veuillez d'abord générer du contenu.",
    "mathpuzzle.msg.preparing.pdf": "Préparation du PDF...",
    "mathpuzzle.msg.pdf.downloaded": "PDF téléchargé !",
    "mathpuzzle.msg.pdf.error": "Erreur lors de la création du PDF.",
    "mathpuzzle.msg.generate.worksheet.first": "Veuillez d'abord générer une feuille d'exercices.",
    "mathpuzzle.msg.preparing.jpeg.simple": "Préparation du JPEG...",
    "mathpuzzle.msg.jpeg.initiated": "Téléchargement JPEG lancé !",
    "mathpuzzle.msg.jpeg.error.simple": "Erreur lors de la préparation du JPEG.",
    "mathpuzzle.msg.preparing.pdf.wait": "Préparation du PDF... Veuillez patienter.",
    "mathpuzzle.msg.pdf.error.detailed": "Erreur lors de la création du PDF : {error}",

    // ============= 16. Termes généraux (3 clés) =============
    "common.none": "Aucun",
    "common.loading": "Chargement...",
    "common.error": "Erreur",

    // ============= 17. Messages d'erreur (Supplémentaires) =============
    "error.invalid.dimensions": "Dimensions invalides. Veuillez vérifier les lignes et colonnes.",
    "error.no.image.selected": "Veuillez sélectionner une image pour le casse-tête.",
    "error.no.theme.selected": "Veuillez d'abord sélectionner un thème.",
    "error.upload.failed": "Échec du téléversement. Veuillez réessayer.",
    "error.file.too.large": "Fichier trop volumineux. Taille maximale : 5 Mo.",
    "error.invalid.file.type": "Type de fichier invalide. Veuillez téléverser uniquement des images.",
    "error.canvas.creation": "Erreur lors de la création du canevas.",
    "error.export.failed": "Échec de l'exportation. Veuillez réessayer.",
    "error.network": "Erreur réseau. Veuillez vérifier votre connexion.",
    "error.puzzle.generation": "Impossible de générer le casse-tête. Essayez d'autres paramètres.",
    "error.invalid.operation": "Opération sélectionnée invalide.",
    "error.grid.size": "La taille de la grille doit être entre 2 et 4.",
    "error.no.solution": "Aucune solution trouvée pour ce casse-tête.",
    "error.text.empty": "Veuillez saisir du contenu texte.",
    "error.object.selection": "Veuillez sélectionner un objet à modifier.",
    "error.alignment": "Erreur lors de l'alignement des objets.",
    "error.layer.operation": "Erreur lors du changement de l'ordre des calques.",
    "error.delete.operation": "Erreur lors de la suppression des objets.",
    "error.color.invalid": "Valeur de couleur invalide.",
    "error.size.invalid": "Valeur de taille invalide.",
    "error.outline.invalid": "Largeur de contour invalide.",
    "error.opacity.invalid": "Valeur d'opacité invalide.",
    "error.theme.not.found": "Thème introuvable.",
    "error.api.connection": "Impossible de se connecter au serveur.",
    "error.session.expired": "Session expirée. Veuillez actualiser la page.",
    "error.browser.unsupported": "Votre navigateur n'est pas pris en charge. Utilisez un navigateur moderne.",
    "error.feature.unavailable": "Cette fonctionnalité n'est pas disponible dans la version gratuite."
  }
};

// ==========================================
// FONCTIONS UTILITAIRES POUR LA TRADUCTION FRANÇAISE
// ==========================================

/**
 * Obtenir la traduction française pour une clé
 * @param {string} key - Clé de traduction
 * @param {object} params - Paramètres pour l'interpolation
 * @returns {string} Texte traduit
 */
function getFrenchMathPuzzleTranslation(key, params = {}) {
  const translation = MATH_PUZZLE_TRANSLATIONS_FR.fr[key] || key;
  return formatFrenchMathPuzzleTranslation(translation, params);
}

/**
 * Formater la traduction française avec des paramètres
 * @param {string} text - Texte avec des marqueurs de position
 * @param {object} params - Paramètres qui remplacent les marqueurs
 * @returns {string} Texte formaté
 */
function formatFrenchMathPuzzleTranslation(text, params) {
  let formattedText = text;
  for (const [key, value] of Object.entries(params)) {
    formattedText = formattedText.replace(new RegExp(`\\{${key}\\}`, 'g'), value);
  }
  return formattedText;
}

/**
 * Valider les traductions françaises
 * @returns {object} Résultat de la validation
 */
function validateFrenchMathPuzzleTranslations() {
  const keys = Object.keys(MATH_PUZZLE_TRANSLATIONS_FR.fr);
  const missingKeys = [];
  const emptyTranslations = [];

  // Vérifier les traductions vides
  keys.forEach(key => {
    const value = MATH_PUZZLE_TRANSLATIONS_FR.fr[key];
    if (!value || value.trim() === '') {
      emptyTranslations.push(key);
    }
  });

  return {
    totalKeys: keys.length,
    validKeys: keys.length - emptyTranslations.length,
    missingKeys,
    emptyTranslations,
    coverage: `${((keys.length - emptyTranslations.length) / keys.length * 100).toFixed(1)}%`,
    isComplete: emptyTranslations.length === 0
  };
}

// ==========================================
// TERMES MATHÉMATIQUES POUR LA VERSION FRANÇAISE
// ==========================================

/**
 * Termes français pour les opérations mathématiques
 * Utilisés dans le contexte éducatif
 */
const FRENCH_MATH_OPERATIONS = {
  addition: "Addition",
  subtraction: "Soustraction",
  multiplication: "Multiplication",
  division: "Division",
  both: "Addition et soustraction",
  all: "Toutes les opérations",
  plus: "Plus",
  minus: "Moins",
  times: "Fois",
  dividedBy: "Divisé par",
  equals: "Égale",
  result: "Résultat",
  solution: "Solution",
  calculate: "Calculer",
  solve: "Résoudre"
};

/**
 * Termes français pour les éléments du casse-tête
 */
const FRENCH_PUZZLE_TERMS = {
  puzzle: "Casse-tête",
  mathPuzzle: "Casse-tête mathématique",
  worksheet: "Feuille d'exercices",
  answerKey: "Corrigé",
  grid: "Grille",
  row: "Ligne",
  column: "Colonne",
  cell: "Case",
  image: "Image",
  number: "Nombre",
  question: "Question",
  answer: "Réponse",
  exercise: "Exercice"
};

// ==========================================
// EXPORT POUR UTILISATION DANS D'AUTRES MODULES
// ==========================================

if (typeof module !== 'undefined' && module.exports) {
  module.exports = {
    MATH_PUZZLE_TRANSLATIONS_FR,
    getFrenchMathPuzzleTranslation,
    formatFrenchMathPuzzleTranslation,
    validateFrenchMathPuzzleTranslations,
    FRENCH_MATH_OPERATIONS,
    FRENCH_PUZZLE_TERMS
  };
}

// Rendre disponible globalement dans le navigateur
if (typeof window !== 'undefined') {
  window.MATH_PUZZLE_TRANSLATIONS_FR = MATH_PUZZLE_TRANSLATIONS_FR;
  window.getFrenchMathPuzzleTranslation = getFrenchMathPuzzleTranslation;
  window.formatFrenchMathPuzzleTranslation = formatFrenchMathPuzzleTranslation;
  window.validateFrenchMathPuzzleTranslations = validateFrenchMathPuzzleTranslations;
  window.FRENCH_MATH_OPERATIONS = FRENCH_MATH_OPERATIONS;
  window.FRENCH_PUZZLE_TERMS = FRENCH_PUZZLE_TERMS;
}