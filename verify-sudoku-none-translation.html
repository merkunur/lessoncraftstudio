<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Verify Sudoku "None" Translation</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            padding: 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        h1 {
            color: #5a67d8;
            text-align: center;
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            background: #f7fafc;
            border-radius: 10px;
            border: 2px solid #e2e8f0;
        }
        .test-item {
            margin: 10px 0;
            padding: 10px;
            background: white;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .status {
            padding: 5px 10px;
            border-radius: 5px;
            font-weight: bold;
        }
        .pass {
            background: #c6f6d5;
            color: #22543d;
        }
        .fail {
            background: #fed7d7;
            color: #742a2a;
        }
        iframe {
            width: 100%;
            height: 300px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            margin: 20px 0;
        }
        .btn {
            padding: 10px 20px;
            margin: 5px;
            border: none;
            border-radius: 5px;
            background: #5a67d8;
            color: white;
            cursor: pointer;
            font-weight: bold;
        }
        .btn:hover {
            background: #4c51bf;
        }
        .code {
            background: #2d3748;
            color: #68d391;
            padding: 3px 8px;
            border-radius: 3px;
            font-family: monospace;
            display: inline-block;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸ§ª Sudoku "None" Translation Test</h1>

        <div class="test-section">
            <h2>Test Configuration</h2>
            <div class="test-item">
                <span>Locale Being Tested:</span>
                <span class="code" id="locale">de</span>
            </div>
            <div class="test-item">
                <span>Expected Translation for "none":</span>
                <span class="code" id="expected">Kein</span>
            </div>
        </div>

        <div class="test-section">
            <h2>Test Results</h2>
            <div id="results">
                <p style="text-align: center; color: #718096;">Running tests...</p>
            </div>
        </div>

        <div style="text-align: center;">
            <button class="btn" onclick="testGerman()">Test German (de)</button>
            <button class="btn" onclick="testSwedish()">Test Swedish (sv)</button>
            <button class="btn" onclick="testFrench()">Test French (fr)</button>
            <button class="btn" onclick="openApp('de')">Open App in German</button>
        </div>

        <h2 style="text-align: center; margin-top: 30px;">Live Preview</h2>
        <iframe id="appFrame" src="frontend/public/worksheet-generators/sudoku.html?locale=de"></iframe>
    </div>

    <script src="frontend/public/worksheet-generators/js/translations-sudoku.js"></script>
    <script>
        function runTest(locale, expectedText) {
            const results = document.getElementById('results');
            results.innerHTML = '';

            // Update test info
            document.getElementById('locale').textContent = locale;
            document.getElementById('expected').textContent = expectedText;

            // Test 1: Check if translations are loaded
            const test1 = {
                name: 'Translations File Loaded',
                pass: typeof SUDOKU_TRANSLATIONS !== 'undefined'
            };

            // Test 2: Check if locale exists
            const test2 = {
                name: `Locale "${locale}" exists`,
                pass: SUDOKU_TRANSLATIONS && SUDOKU_TRANSLATIONS[locale]
            };

            // Test 3: Check if common.none key exists
            const test3 = {
                name: 'Key "common.none" exists',
                pass: SUDOKU_TRANSLATIONS && SUDOKU_TRANSLATIONS[locale] &&
                       SUDOKU_TRANSLATIONS[locale]['common.none'] !== undefined
            };

            // Test 4: Check if translation is correct
            const actualText = SUDOKU_TRANSLATIONS && SUDOKU_TRANSLATIONS[locale] &&
                              SUDOKU_TRANSLATIONS[locale]['common.none'];
            const test4 = {
                name: `Translation is "${expectedText}"`,
                pass: actualText === expectedText,
                actual: actualText
            };

            // Display results
            [test1, test2, test3, test4].forEach(test => {
                const div = document.createElement('div');
                div.className = 'test-item';
                div.innerHTML = `
                    <span>${test.name} ${test.actual !== undefined && !test.pass ? '(Got: "' + test.actual + '")' : ''}</span>
                    <span class="status ${test.pass ? 'pass' : 'fail'}">${test.pass ? 'PASS' : 'FAIL'}</span>
                `;
                results.appendChild(div);
            });

            // Update iframe
            document.getElementById('appFrame').src =
                `frontend/public/worksheet-generators/sudoku.html?locale=${locale}`;

            // Check the iframe after it loads
            const iframe = document.getElementById('appFrame');
            iframe.onload = function() {
                setTimeout(() => {
                    try {
                        const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
                        const borderSelect = iframeDoc.getElementById('borderThemeSelect');
                        const backgroundSelect = iframeDoc.getElementById('backgroundThemeSelect');

                        const test5 = {
                            name: 'Border dropdown "none" option',
                            pass: borderSelect && borderSelect.options[0].text === expectedText,
                            actual: borderSelect ? borderSelect.options[0].text : 'N/A'
                        };

                        const test6 = {
                            name: 'Background dropdown "none" option',
                            pass: backgroundSelect && backgroundSelect.options[0].text === expectedText,
                            actual: backgroundSelect ? backgroundSelect.options[0].text : 'N/A'
                        };

                        [test5, test6].forEach(test => {
                            const div = document.createElement('div');
                            div.className = 'test-item';
                            div.innerHTML = `
                                <span>${test.name} ${!test.pass ? '(Got: "' + test.actual + '")' : ''}</span>
                                <span class="status ${test.pass ? 'pass' : 'fail'}">${test.pass ? 'PASS' : 'FAIL'}</span>
                            `;
                            results.appendChild(div);
                        });
                    } catch (e) {
                        console.error('Could not access iframe content:', e);
                    }
                }, 1000); // Give time for translations to load
            };
        }

        function testGerman() {
            runTest('de', 'Kein');
        }

        function testSwedish() {
            runTest('sv', 'Ingen');
        }

        function testFrench() {
            runTest('fr', 'Aucun');
        }

        function openApp(locale) {
            window.open(`frontend/public/worksheet-generators/sudoku.html?locale=${locale}`, '_blank');
        }

        // Run German test on load
        window.addEventListener('DOMContentLoaded', () => {
            setTimeout(testGerman, 500);
        });
    </script>
</body>
</html>