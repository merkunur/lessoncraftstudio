<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Drawing Lines Translation Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 20px auto;
            padding: 20px;
        }
        .test-section {
            background: #f5f5f5;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 8px;
        }
        .language-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 30px;
        }
        .language-buttons button {
            padding: 10px 20px;
            background: #007aff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
        }
        .language-buttons button:hover {
            background: #005ecb;
        }
        .language-buttons button.active {
            background: #28a745;
        }
        .translation-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }
        .translation-item {
            background: white;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #ddd;
        }
        .key {
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }
        .value {
            color: #666;
        }
        h2 {
            color: #333;
            border-bottom: 2px solid #007aff;
            padding-bottom: 10px;
        }
        .success {
            color: #28a745;
            font-weight: bold;
        }
        .error {
            color: #dc3545;
            font-weight: bold;
        }
        .stats {
            background: #e9ecef;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <h1>Drawing Lines App - Multi-Language Translation Test</h1>

    <div class="test-section">
        <h2>Language Selector</h2>
        <div class="language-buttons" id="languageButtons">
            <button data-locale="en">English</button>
            <button data-locale="de">Deutsch</button>
            <button data-locale="fr">Français</button>
            <button data-locale="es">Español</button>
            <button data-locale="pt">Português</button>
            <button data-locale="it">Italiano</button>
            <button data-locale="nl">Nederlands</button>
            <button data-locale="sv">Svenska</button>
            <button data-locale="da">Dansk</button>
            <button data-locale="no">Norsk</button>
            <button data-locale="fi">Suomi</button>
        </div>
    </div>

    <div class="test-section">
        <h2>Translation Statistics</h2>
        <div class="stats" id="stats">Loading...</div>
    </div>

    <div class="test-section">
        <h2>Critical User-Mentioned Items</h2>
        <div class="translation-grid" id="criticalItems"></div>
    </div>

    <div class="test-section">
        <h2>Core UI Elements</h2>
        <div class="translation-grid" id="coreUI"></div>
    </div>

    <div class="test-section">
        <h2>Drawing Template Names</h2>
        <div class="translation-grid" id="templateNames"></div>
    </div>

    <div class="test-section">
        <h2>Error & Success Messages</h2>
        <div class="translation-grid" id="messages"></div>
    </div>

    <script src="frontend/public/worksheet-generators/js/translations-drawing-lines.js"></script>
    <script>
        let currentLocale = 'en';

        // Test if translations are loaded
        if (typeof window.DRAWING_LINES_TRANSLATIONS === 'undefined') {
            document.body.innerHTML = '<h1 style="color: red;">ERROR: Translations not loaded!</h1>';
        } else {
            console.log('Translations loaded successfully');

            // Helper function to get translation
            function t(key, locale = currentLocale) {
                const translations = window.DRAWING_LINES_TRANSLATIONS || {};
                return translations[locale]?.[key] || translations['en']?.[key] || key;
            }

            // Update display for current language
            function updateDisplay() {
                // Update active button
                document.querySelectorAll('.language-buttons button').forEach(btn => {
                    btn.classList.toggle('active', btn.dataset.locale === currentLocale);
                });

                // Update statistics
                const stats = window.DRAWING_LINES_TRANSLATIONS[currentLocale] || {};
                const keyCount = Object.keys(stats).length;
                const expectedKeys = 162;
                const coverage = ((keyCount / expectedKeys) * 100).toFixed(1);

                document.getElementById('stats').innerHTML = `
                    <strong>Current Language:</strong> ${t('lang_' + currentLocale)} (${currentLocale})<br>
                    <strong>Total Keys:</strong> <span class="${keyCount >= expectedKeys ? 'success' : 'error'}">${keyCount}</span> / ${expectedKeys}<br>
                    <strong>Coverage:</strong> <span class="${keyCount >= expectedKeys ? 'success' : 'error'}">${coverage}%</span>
                `;

                // Update critical items
                const criticalKeys = ['border', 'background', 'grayscale'];
                let criticalHTML = '';
                criticalKeys.forEach(key => {
                    criticalHTML += `
                        <div class="translation-item">
                            <div class="key">${key}</div>
                            <div class="value">${t(key)}</div>
                        </div>
                    `;
                });
                document.getElementById('criticalItems').innerHTML = criticalHTML;

                // Update core UI elements
                const coreKeys = ['settings', 'worksheet', 'language', 'generate', 'download', 'clearAll'];
                let coreHTML = '';
                coreKeys.forEach(key => {
                    coreHTML += `
                        <div class="translation-item">
                            <div class="key">${key}</div>
                            <div class="value">${t(key)}</div>
                        </div>
                    `;
                });
                document.getElementById('coreUI').innerHTML = coreHTML;

                // Update template names
                const templateKeys = [
                    'template_curve1', 'template_curve2', 'template_diagonal1',
                    'template_horizontal1', 'template_vertical1'
                ];
                let templateHTML = '';
                templateKeys.forEach(key => {
                    templateHTML += `
                        <div class="translation-item">
                            <div class="key">${key}</div>
                            <div class="value">${t(key)}</div>
                        </div>
                    `;
                });
                document.getElementById('templateNames').innerHTML = templateHTML;

                // Update messages
                const messageKeys = [
                    'worksheetGenerated', 'errorLoadingImages',
                    'pleaseSelectDrawingTemplate', 'grayscaleConversionFailed'
                ];
                let messageHTML = '';
                messageKeys.forEach(key => {
                    messageHTML += `
                        <div class="translation-item">
                            <div class="key">${key}</div>
                            <div class="value">${t(key)}</div>
                        </div>
                    `;
                });
                document.getElementById('messages').innerHTML = messageHTML;
            }

            // Set up language buttons
            document.querySelectorAll('.language-buttons button').forEach(button => {
                button.addEventListener('click', () => {
                    currentLocale = button.dataset.locale;
                    updateDisplay();
                });
            });

            // Initial display
            updateDisplay();

            // Show validation results in console
            console.log('Translation Validation Results:');
            ['en', 'de', 'fr', 'es', 'pt', 'it', 'nl', 'sv', 'da', 'no', 'fi'].forEach(locale => {
                const keys = Object.keys(window.DRAWING_LINES_TRANSLATIONS[locale] || {});
                console.log(`${locale}: ${keys.length} keys (${keys.length >= 162 ? 'PASS' : 'FAIL'})`);
            });
        }
    </script>
</body>
</html>