/**
 * Bildekryptogram - Profesjonell norsk oversettelse
 * Total nøkler: 194
 * Språk: Norsk (NO)
 *
 * Oversettelse utført med fokus på naturlig norsk språkbruk,
 * som om applikasjonen opprinnelig ble utviklet i Norge.
 */

const CRYPTOGRAM_TRANSLATIONS_NO = {
  "no": {
    // ============= 1. Språknavn (11 nøkler) =============
    "language.english": "Engelsk",
    "language.german.full": "Deutsch (Tysk)",
    "language.french.full": "Français (Fransk)",
    "language.spanish.full": "Español (Spansk)",
    "language.portuguese.full": "Português (Portugisisk)",
    "language.italian.full": "Italiano (Italiensk)",
    "language.dutch.full": "Nederlands (Nederlandsk)",
    "language.swedish.full": "Svenska (Svensk)",
    "language.danish.full": "Dansk (Dansk)",
    "language.norwegian.full": "Norsk (Norsk)",
    "language.finnish.full": "Suomi (Finsk)",

    // ============= 2. Kjernegrensesnitt (6 nøkler) =============
    "title": "Kryptograminnstillinger",
    "imageCryptogram": "Bildekryptogram",
    "selectLanguage": "Velg språk",
    "language": "Språk:",
    "pageSize": "Sidestørrelse:",
    "pageSetup": "Sideoppsett",

    // ============= 3. Oppgaveregler (7 nøkler) =============
    "cryptogram.puzzle.rules": "Oppgaveregler",
    "cryptogram.phrases.label": "Setninger (én per linje):",
    "cryptogram.phrases.placeholder": "Den raske brune reven...",
    "cryptogram.letters.reveal": "Bokstaver som skal avsløres:",
    "cryptogram.max.lines": "Maks linjer per oppgave:",
    "cryptogram.auto.assign": "Tildel bilder automatisk",
    "cryptogram.language.description": "Bildenavn og temaer vises på valgt språk.",

    // ============= 4. Bildetildeling (9 nøkler) =============
    "cryptogram.image.assignment": "Bildetildeling",
    "cryptogram.image.theme": "Bildetema:",
    "cryptogram.select.letter": "Velg en bokstav for å tildele et bilde:",
    "cryptogram.search.label": "Søk etter bilder:",
    "cryptogram.search.placeholder": "f.eks. eple, bil",
    "cryptogram.available.images": "Tilgjengelige bilder (klikk for å tildele):",
    "cryptogram.select.letter.above": "Velg en bokstav ovenfor.",
    "cryptogram.assigned.images": "Tildelte bilder:",
    "cryptogram.msg.type.search": "Skriv for å søke i alle bilder.",

    // ============= 5. Opplastingsdel (4 nøkler) =============
    "cryptogram.upload.title": "Last opp egne bilder",
    "cryptogram.upload.select": "Velg bilde(r) for opplasting:",
    "cryptogram.uploaded.label": "Dine opplastede bilder:",
    "cryptogram.uploaded.placeholder": "Dine opplastede bilder vises her.",

    // ============= 6. Sideoppsett (19 nøkler) =============
    "cryptogram.page.setup": "Sideoppsett",
    "page.size.letter.portrait": "Letter stående (8,5×11\")",
    "page.size.letter.landscape": "Letter liggende (11×8,5\")",
    "page.size.a4.portrait": "A4 stående (210×297mm)",
    "page.size.a4.landscape": "A4 liggende (297×210mm)",
    "page.size.square": "Kvadrat (1200×1200)",
    "page.size.custom": "Tilpasset",
    "cryptogram.width.label": "Bredde (px):",
    "cryptogram.height.label": "Høyde (px):",
    "cryptogram.page.color": "Sidefarge:",
    "cryptogram.apply.size.color": "Bruk størrelse og farge",
    "cryptogram.background.title": "Bakgrunn",
    "cryptogram.background.theme": "Bakgrunnstema:",
    "cryptogram.background.message": "Velg et tema for bakgrunner.",
    "cryptogram.background.opacity": "Bakgrunnsgjennomsiktighet:",
    "cryptogram.border.title": "Ramme",
    "cryptogram.border.theme": "Rammetema:",
    "cryptogram.border.message": "Velg et tema for å se rammer.",
    "cryptogram.border.opacity": "Rammegjennomsiktighet:",

    // ============= 7. Tekstverktøy (15 nøkler) =============
    "cryptogram.text.tools": "Tekstverktøy",
    "cryptogram.text.add.new": "Legg til ny tekst",
    "cryptogram.text.content.label": "Innhold:",
    "cryptogram.text.placeholder": "Hallo!",
    "cryptogram.text.add.button": "Legg til tekst",
    "cryptogram.text.properties": "Egenskaper for valgt tekst",
    "cryptogram.text.color": "Farge:",
    "cryptogram.text.size": "Størrelse:",
    "cryptogram.text.font": "Skrifttype:",
    "cryptogram.text.outline.color": "Konturfarge:",
    "cryptogram.text.outline.width": "Kontur (0-10):",
    "cryptogram.text.default": "Ny tekst",
    "cryptogram.page.title": "Generator for bildekryptogram-arbeidsark",
    "cryptogram.msg.text.added": "Tekst lagt til på lerretet.",
    "cryptogram.msg.text.updated": "Tekstegenskaper oppdatert.",

    // ============= 8. Skrifttyper (7 nøkler) =============
    "font.lexend": "Lexend Deca",
    "font.baloo": "Baloo 2",
    "font.nunito": "Nunito",
    "font.quicksand": "Quicksand",
    "font.fredoka": "Fredoka",
    "font.arial": "Arial",
    "font.verdana": "Verdana",

    // ============= 9. Verktøylinjehandlinger (20 nøkler) =============
    "toolbar.layers": "Lag",
    "toolbar.bring.forward": "Bring fremover",
    "toolbar.send.backward": "Send bakover",
    "toolbar.align": "Juster",
    "toolbar.align.selected": "Juster valgte:",
    "toolbar.align.left": "Venstrejuster",
    "toolbar.center.h": "Sentrer horisontalt",
    "toolbar.align.right": "Høyrejuster",
    "toolbar.align.top": "Toppjuster",
    "toolbar.center.v": "Sentrer vertikalt",
    "toolbar.align.bottom": "Bunnjuster",
    "toolbar.align.to.page": "Juster til side:",
    "toolbar.center.page.h": "Sentrer på siden horisontalt",
    "toolbar.center.page.v": "Sentrer på siden vertikalt",
    "toolbar.delete": "Slett valgte",
    "toolbar.msg.aligned": "Objekter justert.",
    "toolbar.msg.layer.changed": "Lagrekkefølge endret.",
    "toolbar.msg.deleted": "Valgte objekter slettet.",
    "toolbar.msg.select.first": "Vennligst velg et objekt først.",
    "toolbar.msg.nothing.selected": "Ingen objekter valgt.",

    // ============= 10. Handlingsknapper (10 nøkler) =============
    "cryptogram.generate": "Generer",
    "cryptogram.download": "Last ned",
    "cryptogram.download.worksheet.jpeg": "Arbeidsark (JPEG)",
    "cryptogram.download.answer.jpeg": "Fasit (JPEG)",
    "cryptogram.download.worksheet.pdf": "Arbeidsark (PDF)",
    "cryptogram.download.answer.pdf": "Fasit (PDF)",
    "common.grayscale": "Gråtoner",
    "cryptogram.clear.all": "Tøm alt",
    "cryptogram.msg.generate.complete": "Kryptogram generert!",
    "cryptogram.msg.cleared": "Alt innhold tømt.",

    // ============= 11. Faneetiketter (2 nøkler) =============
    "cryptogram.tab.worksheet": "Arbeidsark",
    "cryptogram.tab.answer": "Fasit",

    // ============= 12. Genereringsmeldinger (6 nøkler) =============
    "cryptogram.msg.generating": "Genererer oppgavedata...",
    "cryptogram.msg.worksheet.generated": "Arbeidsark generert!",
    "cryptogram.msg.error": "Feil: {error}",
    "cryptogram.msg.enter.phrase": "Vennligst skriv inn minst én setning.",
    "cryptogram.msg.missing.images": "Mangler bilder for bokstavene: {letters}. Vennligst tildel eller bruk automatisk tildeling.",
    "cryptogram.msg.generate.first": "Vennligst generer innhold først.",

    // ============= 13. Temalastingsmeldinger (6 nøkler) =============
    "cryptogram.themes.all": "Alle temaer",
    "cryptogram.msg.themes.error": "Kunne ikke laste temaer.",
    "cryptogram.msg.loading.default": "Laster standardtema...",
    "cryptogram.msg.loading.theme": "Laster {theme}...",
    "cryptogram.msg.theme.failed": "Kunne ikke laste tema \"{theme}\"",
    "cryptogram.msg.theme.loaded": "Tema lastet.",

    // ============= 14. Automatisk tildelingsmeldinger (6 nøkler) =============
    "cryptogram.msg.fetching.images": "Henter alle bilder for automatisk tildeling...",
    "cryptogram.msg.fetch.failed": "Kunne ikke hente bildeoversikt fra serveren.",
    "cryptogram.msg.no.images.server": "Kan ikke tildele automatisk. Ingen bilder funnet på serveren.",
    "cryptogram.msg.auto.assigned": "Bilder er tildelt automatisk.",
    "cryptogram.msg.select.letter.first": "Vennligst velg en bokstav først.",
    "cryptogram.msg.auto.assigning": "Tildeler bilder til bokstaver automatisk...",

    // ============= 15. Søkemeldinger (5 nøkler) =============
    "cryptogram.msg.searching": "Søker...",
    "cryptogram.msg.search.failed": "Kunne ikke søke etter \"{query}\"",
    "cryptogram.msg.no.images": "Ingen bilder funnet{query}",
    "cryptogram.msg.uploads.available": "{count} eget/egne bilde(r) tilgjengelig.",
    "cryptogram.msg.search.complete": "Søk fullført.",

    // ============= 16. Tøm og nedlastingsmeldinger (15 nøkler) =============
    "cryptogram.msg.form.cleared": "Skjema tømt.",
    "cryptogram.msg.canvas.unavailable": "Lerret ikke tilgjengelig.",
    "cryptogram.msg.preparing.file": "Forbereder {fileName}...",
    "cryptogram.msg.jpeg.initiated": "JPEG-nedlasting startet!",
    "cryptogram.msg.jpeg.error": "Feil ved klargjøring av JPEG: {error}",
    "cryptogram.watermark.main": "GRATIS VERSJON - LessonCraftStudio.com",
    "cryptogram.watermark.text": "GRATIS VERSJON",
    "cryptogram.msg.preparing.pdf": "Forbereder PDF...",
    "cryptogram.msg.pdf.downloaded": "PDF lastet ned!",
    "cryptogram.msg.pdf.error": "Feil ved opprettelse av PDF.",
    "cryptogram.msg.generate.worksheet.first": "Vennligst generer et arbeidsark først.",
    "cryptogram.msg.preparing.jpeg": "Forbereder JPEG...",
    "cryptogram.msg.jpeg.error.simple": "Feil ved klargjøring av JPEG.",
    "cryptogram.msg.pdf.error.detailed": "Feil ved opprettelse av PDF: {error}",
    "cryptogram.msg.download.ready": "Nedlasting klar.",

    // ============= 17. Ressurslastingsmeldinger (5 nøkler) =============
    "cryptogram.asset.select": "Velg et tema for å se {type}.",
    "cryptogram.asset.loading": "Laster {theme} {type}...",
    "cryptogram.asset.none": "Ingen {type} i dette temaet.",
    "cryptogram.asset.error": "Feil ved lasting av {type}.",
    "cryptogram.asset.loaded": "{type} lastet.",

    // ============= 18. Vanlige termer (3 nøkler) =============
    "common.none": "Ingen",
    "common.loading": "Laster...",
    "common.error": "Feil",

    // ============= 19. Plassholdere (5 nøkler) =============
    "placeholder.search": "Søk...",
    "placeholder.enter.text": "Skriv inn tekst her",
    "placeholder.custom.width": "Bredde",
    "placeholder.custom.height": "Høyde",
    "placeholder.reveal.count": "0",

    // ============= 20. Feilmeldinger (32 nøkler) =============
    "error.invalid.dimensions": "Ugyldige dimensjoner. Vennligst sjekk bredde og høyde.",
    "error.no.theme.selected": "Vennligst velg et tema først.",
    "error.no.images.theme": "Ingen bilder tilgjengelig i valgt tema.",
    "error.upload.failed": "Opplasting mislyktes. Vennligst prøv igjen.",
    "error.file.too.large": "Filen er for stor. Maksimumstørrelse er 5MB.",
    "error.invalid.file.type": "Ugyldig filtype. Vennligst last opp bare bildefiler.",
    "error.canvas.creation": "Feil ved opprettelse av lerret.",
    "error.export.failed": "Eksport mislyktes. Vennligst prøv igjen.",
    "error.network": "Nettverksfeil. Vennligst sjekk tilkoblingen din.",
    "error.theme.empty": "Valgt tema har ingen bilder.",
    "error.puzzle.generation": "Kunne ikke generere oppgave. Vennligst prøv andre setninger.",
    "error.insufficient.images": "Ikke nok bilder for alle bokstaver. Vennligst legg til flere bilder eller reduser antall unike bokstaver.",
    "error.no.intersections": "Kunne ikke finne nok krysninger for ordene. Prøv andre bilder.",
    "error.invalid.phrase": "Ugyldig setning. Vennligst skriv inn gyldig tekst.",
    "error.letter.assignment": "Feil ved tildeling av bilde til bokstav.",
    "error.image.loading": "Feil ved lasting av bilde.",
    "error.border.loading": "Feil ved lasting av ramme.",
    "error.background.loading": "Feil ved lasting av bakgrunn.",
    "error.text.empty": "Vennligst skriv inn tekstinnhold.",
    "error.object.selection": "Vennligst velg et objekt å endre.",
    "error.alignment": "Feil ved justering av objekter.",
    "error.layer.operation": "Feil ved endring av lagrekkefølge.",
    "error.delete.operation": "Feil ved sletting av objekter.",
    "error.color.invalid": "Ugyldig fargeverdi.",
    "error.size.invalid": "Ugyldig størrelsesverdi.",
    "error.outline.invalid": "Ugyldig konturbredde.",
    "error.opacity.invalid": "Ugyldig gjennomsiktighetsverdi.",
    "error.theme.not.found": "Tema ikke funnet.",
    "error.api.connection": "Kunne ikke koble til serveren.",
    "error.session.expired": "Økten har utløpt. Vennligst oppdater siden.",
    "error.browser.unsupported": "Din nettleser støttes ikke. Vennligst bruk en moderne nettleser.",
    "error.feature.unavailable": "Denne funksjonen er ikke tilgjengelig i gratisversjonen."
  }
};

// ==========================================
// HJELPEFUNKSJONER FOR NORSK OVERSETTELSE
// ==========================================

/**
 * Hent norsk oversettelse for en nøkkel
 * @param {string} key - Oversettelsenøkkel
 * @param {object} params - Parametere for interpolering
 * @returns {string} Oversatt tekst
 */
function getNorwegianCryptogramTranslation(key, params = {}) {
  const translation = CRYPTOGRAM_TRANSLATIONS_NO.no[key] || key;
  return formatNorwegianCryptogramTranslation(translation, params);
}

/**
 * Formater norsk oversettelse med parametere
 * @param {string} text - Tekst med plassholdere
 * @param {object} params - Parametere som skal erstatte plassholderne
 * @returns {string} Formatert tekst
 */
function formatNorwegianCryptogramTranslation(text, params) {
  let formattedText = text;
  for (const [key, value] of Object.entries(params)) {
    formattedText = formattedText.replace(new RegExp(`\\{${key}\\}`, 'g'), value);
  }
  return formattedText;
}

/**
 * Valider norske oversettelser
 * @returns {object} Valideringsresultat
 */
function validateNorwegianCryptogramTranslations() {
  const keys = Object.keys(CRYPTOGRAM_TRANSLATIONS_NO.no);
  const missingKeys = [];
  const emptyTranslations = [];

  // Sjekk for tomme oversettelser
  keys.forEach(key => {
    const value = CRYPTOGRAM_TRANSLATIONS_NO.no[key];
    if (!value || value.trim() === '') {
      emptyTranslations.push(key);
    }
  });

  return {
    totalKeys: keys.length,
    validKeys: keys.length - emptyTranslations.length,
    missingKeys,
    emptyTranslations,
    coverage: `${((keys.length - emptyTranslations.length) / keys.length * 100).toFixed(1)}%`,
    isComplete: emptyTranslations.length === 0
  };
}

// ==========================================
// NORSK ALFABET FOR KRYPTOGRAM
// ==========================================

/**
 * Det norske alfabetet for kryptogramoppgaver
 * Inkluderer Æ, Ø, Å som separate bokstaver
 */
const NORWEGIAN_CRYPTOGRAM_ALPHABET = 'ABCDEFGHIJKLMNOPQRSTUVWXYZÆØÅ';

/**
 * Generer bokstavknapper for norsk alfabet
 * @returns {string} HTML for bokstavknapper
 */
function generateNorwegianLetterButtons() {
  let buttonsHTML = '';
  for (const letter of NORWEGIAN_CRYPTOGRAM_ALPHABET) {
    buttonsHTML += `<button class="letter-btn" data-letter="${letter}">${letter}</button>`;
  }
  return buttonsHTML;
}

// ==========================================
// EKSPORT FOR BRUK I ANDRE MODULER
// ==========================================

if (typeof module !== 'undefined' && module.exports) {
  module.exports = {
    CRYPTOGRAM_TRANSLATIONS_NO,
    getNorwegianCryptogramTranslation,
    formatNorwegianCryptogramTranslation,
    validateNorwegianCryptogramTranslations,
    NORWEGIAN_CRYPTOGRAM_ALPHABET,
    generateNorwegianLetterButtons
  };
}

// Gjør tilgjengelig globalt i nettleser
if (typeof window !== 'undefined') {
  window.CRYPTOGRAM_TRANSLATIONS_NO = CRYPTOGRAM_TRANSLATIONS_NO;
  window.getNorwegianCryptogramTranslation = getNorwegianCryptogramTranslation;
  window.formatNorwegianCryptogramTranslation = formatNorwegianCryptogramTranslation;
  window.validateNorwegianCryptogramTranslations = validateNorwegianCryptogramTranslations;
  window.NORWEGIAN_CRYPTOGRAM_ALPHABET = NORWEGIAN_CRYPTOGRAM_ALPHABET;
  window.generateNorwegianLetterButtons = generateNorwegianLetterButtons;
}