<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Code Addition - Language Support Test</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f9fafb;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        h1 {
            color: #1f2937;
            margin-bottom: 10px;
        }
        .success-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .success-box h2 {
            margin: 0 0 10px 0;
        }
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-bottom: 20px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .test-button {
            padding: 12px 20px;
            background: #3b82f6;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s;
        }
        .test-button:hover {
            background: #2563eb;
            transform: translateY(-1px);
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .app-frame {
            width: 100%;
            height: 900px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            background: white;
        }
        .checklist {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .checklist h3 {
            margin-top: 0;
            color: #1f2937;
        }
        .checklist ul {
            margin: 10px 0;
            padding-left: 20px;
        }
        .checklist li {
            margin: 8px 0;
            color: #4b5563;
        }
        .status {
            font-weight: bold;
            padding: 2px 6px;
            border-radius: 4px;
            margin-left: 8px;
        }
        .status.pass {
            background: #d1fae5;
            color: #065f46;
        }
        .status.fail {
            background: #fee2e2;
            color: #991b1b;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Code Addition - Language Support Test</h1>
        
        <div class="success-box">
            <h2>ğŸŒ Language Support Implementation</h2>
            <p>Testing multilingual functionality for the Code Addition app with all 11 supported languages.</p>
        </div>
        
        <div class="checklist">
            <h3>âœ… Implementation Checklist:</h3>
            <ul>
                <li>Script translations.js loaded <span class="status pass">âœ“</span></li>
                <li>Language selector HTML added <span class="status pass">âœ“</span></li>
                <li>currentLocale at global scope <span class="status pass">âœ“</span></li>
                <li>URL parameter initialization <span class="status pass">âœ“</span></li>
                <li>Theme API with locale parameter <span class="status pass">âœ“</span></li>
                <li>Image API with locale parameter <span class="status pass">âœ“</span></li>
                <li>Display translated names <span class="status pass">âœ“</span></li>
                <li>Language change handler <span class="status pass">âœ“</span></li>
                <li>Default animals theme for "All Themes" <span class="status pass">âœ“</span></li>
                <li>applyTranslations safety check <span class="status pass">âœ“</span></li>
            </ul>
        </div>
        
        <div class="test-grid">
            <button class="test-button" onclick="testLanguage('en')">ğŸ‡¬ğŸ‡§ English</button>
            <button class="test-button" onclick="testLanguage('de')">ğŸ‡©ğŸ‡ª Deutsch</button>
            <button class="test-button" onclick="testLanguage('fr')">ğŸ‡«ğŸ‡· FranÃ§ais</button>
            <button class="test-button" onclick="testLanguage('es')">ğŸ‡ªğŸ‡¸ EspaÃ±ol</button>
            <button class="test-button" onclick="testLanguage('pt')">ğŸ‡µğŸ‡¹ PortuguÃªs</button>
            <button class="test-button" onclick="testLanguage('it')">ğŸ‡®ğŸ‡¹ Italiano</button>
            <button class="test-button" onclick="testLanguage('nl')">ğŸ‡³ğŸ‡± Nederlands</button>
            <button class="test-button" onclick="testLanguage('sv')">ğŸ‡¸ğŸ‡ª Svenska</button>
            <button class="test-button" onclick="testLanguage('da')">ğŸ‡©ğŸ‡° Dansk</button>
            <button class="test-button" onclick="testLanguage('no')">ğŸ‡³ğŸ‡´ Norsk</button>
            <button class="test-button" onclick="testLanguage('fi')">ğŸ‡«ğŸ‡® Suomi</button>
        </div>
        
        <h2>Live Preview:</h2>
        <iframe src="/api/worksheet/code%20addition.html?locale=en&tier=free" class="app-frame" id="appFrame"></iframe>
    </div>
    
    <script>
        const iframe = document.getElementById('appFrame');
        
        function testLanguage(locale) {
            // Update iframe URL with new locale
            iframe.src = `/api/worksheet/code%20addition.html?locale=${locale}&tier=free`;
            
            console.log(`ğŸŒ Testing ${locale.toUpperCase()} language...`);
            
            // Wait for iframe to load, then verify
            setTimeout(() => {
                try {
                    const iframeDoc = iframe.contentDocument;
                    const languageSelect = iframeDoc.getElementById('languageSelect');
                    
                    if (languageSelect && languageSelect.value === locale) {
                        console.log(`âœ… Language selector set to ${locale}`);
                    } else {
                        console.log(`âŒ Language selector not properly set for ${locale}`);
                    }
                    
                    // Check if themes are loading
                    const themeSelect = iframeDoc.getElementById('imageThemeSelect');
                    if (themeSelect && themeSelect.options.length > 1) {
                        console.log(`âœ… Themes loaded for ${locale}`);
                        
                        // Check if theme names are translated
                        const firstTheme = themeSelect.options[1];
                        if (firstTheme) {
                            console.log(`   Theme example: "${firstTheme.textContent}"`);
                        }
                    } else {
                        console.log(`âŒ Themes not loading for ${locale}`);
                    }
                } catch (e) {
                    console.error('Error testing language:', e);
                }
            }, 2000);
        }
        
        // Test log for implementation verification
        console.log(`
ğŸ¯ Code Addition Language Support Test
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Implementation Status:
âœ… translations.js script added
âœ… Language selector HTML present
âœ… currentLocale at global scope
âœ… URL parameter initialization
âœ… Theme API uses locale parameter
âœ… Image API uses locale parameter
âœ… Translated names displayed
âœ… Language change handler added
âœ… Default animals theme for "All"
âœ… applyTranslations safety check

Test Instructions:
1. Click each language button
2. Verify theme names change
3. Select a theme
4. Verify image names are translated
5. Change language in dropdown
6. Verify content reloads in new language
        `);
    </script>
</body>
</html>