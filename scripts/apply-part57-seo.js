/**
 * SEO Part 57: Enrich preschool grade for insects, dinosaurs, ocean, forest, nature
 * Adds 6 grade-level enrichment fields to gradeContent.preschool for each theme.
 * Fields: uniqueGradeAngle, developmentalMilestones, differentiationNotes,
 *         parentTakeaway, classroomIntegration, assessmentRubric
 */
const fs = require('fs');
const path = require('path');

const BASE = path.join(__dirname, '..', 'frontend', 'content', 'themes');

// Escape single quotes for TS single-quoted strings
function esc(s) {
  return s.replace(/'/g, "\\'");
}

function buildInjection(data, nl) {
  const lines = [];
  lines.push(`      uniqueGradeAngle: '${esc(data.uniqueGradeAngle)}',`);
  lines.push(`      developmentalMilestones: [`);
  for (const m of data.developmentalMilestones) {
    lines.push(`        { milestone: '${esc(m.milestone)}', howWeAddress: '${esc(m.howWeAddress)}' },`);
  }
  lines.push(`      ],`);
  lines.push(`      differentiationNotes: '${esc(data.differentiationNotes)}',`);
  lines.push(`      parentTakeaway: '${esc(data.parentTakeaway)}',`);
  lines.push(`      classroomIntegration: '${esc(data.classroomIntegration)}',`);
  lines.push(`      assessmentRubric: [`);
  for (const r of data.assessmentRubric) {
    lines.push(`        { skill: '${esc(r.skill)}', emerging: '${esc(r.emerging)}', proficient: '${esc(r.proficient)}', advanced: '${esc(r.advanced)}' },`);
  }
  lines.push(`      ],`);
  return lines.join(nl);
}

// ── Theme content ────────────────────────────────────────────────────────

const themes = [
  // ── Insects ─────────────────────────────────────────────────────────
  {
    name: 'insects',
    uniqueGradeAngle: 'Preschool is the uniquely powerful stage for insect worksheets because three- and four-year-olds are in the peak period of fascination with miniature worlds \u2014 they are naturally compelled to crouch down, peer closely, and examine tiny creatures in ways that older children and adults have learned to overlook. Insects offer preschoolers the most accessible live-observation science opportunity of any theme because bugs are everywhere, requiring zero equipment, zero field trips, and zero preparation to encounter in real time. This immediacy means every counting, matching, and sorting skill practiced on an insect worksheet can be verified through direct observation within minutes of completing the page \u2014 a child who counts four ladybug spots on paper can walk outside and count real spots on a real ladybug, creating a paper-to-reality feedback loop that accelerates learning in a way no extinct, exotic, or fictional theme can replicate. The biological features of insects also provide uniquely powerful math anchors: six legs on every insect creates a built-in counting target, symmetrical wing patterns introduce early geometry concepts, and the dramatic metamorphosis from caterpillar to butterfly gives preschoolers their first concrete experience with sequential transformation.',
    developmentalMilestones: [
      { milestone: 'Counting specific body features (preschoolers ages 3-4 are establishing stable one-to-one correspondence with small sets)', howWeAddress: 'insect worksheets use legs, spots, and wings as natural counting targets that are biologically consistent \u2014 every insect always has six legs, giving children a reliable, verifiable counting anchor that reinforces the concept of fixed quantity' },
      { milestone: 'Visual discrimination through subtle feature differences (preschoolers are learning to notice small details that distinguish similar objects)', howWeAddress: 'shadow-match and odd-one-out insect activities require children to distinguish between similar-looking bugs by wing shape, antenna length, or body pattern, building the precise visual scanning that later supports letter discrimination' },
      { milestone: 'Fine motor precision through small-scale coloring (transitioning from large sweeping strokes to controlled movements within smaller boundaries)', howWeAddress: 'insect coloring pages with detailed wing patterns and segmented bodies challenge children to color within progressively smaller sections, developing the hand control needed for letter formation' },
      { milestone: 'Emotional regulation through exposure to unfamiliar creatures (preschoolers are building coping strategies for mild discomfort or uncertainty)', howWeAddress: 'insect worksheets with friendly, cartoonish illustrations help children develop comfort with creatures they might initially find unsettling, building the emotional flexibility and curiosity that support all future learning encounters with unfamiliar material' },
    ],
    differentiationNotes: 'For struggling preschoolers, begin with the two most universally appealing insects (butterflies and ladybugs) before introducing less familiar creatures, use plastic insect figurines alongside every worksheet so children can rotate and examine a three-dimensional bug while working on the two-dimensional page, and reduce counting targets to sets of two or three before progressing to larger groups. For advanced preschoolers, introduce the concept that all insects share the characteristic of six legs (building the foundation for scientific classification), challenge children to find and count real insects during outdoor time and compare their observations to worksheet illustrations, and extend sorting activities to two-attribute challenges such as finding all insects that are both small AND have spots.',
    parentTakeaway: 'Insect worksheets offer preschool parents something no other animal theme can match \u2014 completely free, completely accessible, always-available live specimens for immediate learning reinforcement. After your child completes an insect counting or matching worksheet, simply step into your yard, visit a park, or even look at a windowsill to find real insects that connect directly to what they just practiced on paper. This instant paper-to-reality transfer is enormously powerful for three- and four-year-olds because it proves that worksheet skills describe the real world rather than existing in an abstract academic bubble. If your child is initially hesitant about bugs, let the friendly worksheet illustrations build comfort gradually \u2014 many children who start out squeamish become enthusiastic bug hunters once colorful worksheets have reframed insects as fascinating rather than frightening.',
    classroomIntegration: 'Insect worksheets anchor a preschool science unit that transforms everyday outdoor time into genuine investigation. Set up a classroom bug observation station with a magnifying glass and a clear container for temporary insect visitors. Use insect coloring pages as morning arrival activities, incorporate counting worksheets into a small-group math rotation focused on insect body parts (count the legs, count the spots, count the wings), and connect sorting activities to a classroom insect identification chart where children add new species they discover during outdoor play. The butterfly life cycle provides a natural multi-week arc where worksheets progress from coloring caterpillars to sequencing metamorphosis stages, ideally timed alongside a live butterfly hatching kit. Cross-curricular connections to science (insect anatomy and habitats), math (counting legs and spots), literacy (insect vocabulary), and art (symmetrical wing patterns) make insects a natural anchor for integrated thematic instruction that spans the full preschool day.',
    assessmentRubric: [
      { skill: 'Counting insect features', emerging: 'counts to 3 insect body parts like legs or spots with teacher guidance and physical pointing', proficient: 'counts to 6 insect features reliably with one-to-one correspondence and identifies the matching numeral', advanced: 'counts to 10+ insect features across multiple insects, recognizes numerals, and compares groups to determine which insect has more spots or legs' },
      { skill: 'Insect identification and classification', emerging: 'names two common insects like butterfly and ladybug from illustrations with teacher prompting', proficient: 'names four or more insects independently and sorts them into two groups by one observable attribute like flying vs. crawling', advanced: 'names six or more insects, sorts by one attribute, re-sorts by a different attribute, and explains both sorting rules verbally' },
      { skill: 'Fine motor control with insect illustrations', emerging: 'colors insect outlines using whole-arm movements with frequent boundary crossing on large-outline pages', proficient: 'colors within thick insect outlines using wrist-based strokes and attempts to color wings symmetrically', advanced: 'colors within outlines with controlled strokes, uses multiple colors deliberately to match real insect patterns, and traces insect name letters with recognizable letter forms' },
    ],
  },

  // ── Dinosaurs ───────────────────────────────────────────────────────
  {
    name: 'dinosaurs',
    uniqueGradeAngle: 'Preschool is the supreme stage for dinosaur worksheets because three- and four-year-olds are in the peak period of imaginative thinking where creatures they can never see in person become the most powerfully motivating learning vehicles available \u2014 dinosaurs exist entirely in the imagination, and this is precisely what makes them uniquely effective for preschoolers who are building the mental visualization skills that underpin all later reading comprehension, mathematical reasoning, and scientific hypothesis formation. No other theme activates the preschool imagination with the same intensity because dinosaurs combine the impossible with the real: they actually existed, they left bones children can see in museums, yet they cannot be encountered alive, creating a category of wonder that is qualitatively different from the awe inspired by living animals like zoo creatures or ocean life. The dramatic size contrasts within the dinosaur world \u2014 from tiny Compsognathus to towering Brachiosaurus \u2014 provide the most visually compelling size comparison material of any theme, making early measurement concepts viscerally exciting rather than abstract.',
    developmentalMilestones: [
      { milestone: 'Size comparison and measurement vocabulary (preschoolers are developing concepts of big, small, tall, short, heavy, and light)', howWeAddress: 'dinosaur worksheets provide the most dramatically different sizes of any theme, from tiny baby dinosaurs to enormous adult sauropods, making size comparison worksheets viscerally compelling and giving children emotionally memorable anchors for measurement vocabulary' },
      { milestone: 'Imaginative vocabulary and narrative thinking (preschoolers are developing the ability to think about things that are not physically present)', howWeAddress: 'dinosaur worksheets uniquely exercise visualization skills because children must imagine these creatures alive, building the mental imagery capacity that directly supports reading comprehension when children later need to picture story events from text alone' },
      { milestone: 'Counting with high-persistence motivation (preschoolers need emotional engagement to sustain counting practice through errors)', howWeAddress: 'dinosaur-themed counting activities leverage the intense fascination preschoolers feel toward these creatures, producing a motivation-driven persistence where children who might abandon a generic counting worksheet will eagerly try again when dinosaurs are involved' },
    ],
    differentiationNotes: 'For struggling preschoolers, focus on three highly recognizable dinosaurs (T-Rex, Triceratops, and a long-necked sauropod) and use size as the primary learning dimension since dinosaur size contrasts are the most dramatic and intuitive of any theme; pair every worksheet with dinosaur figurines children can hold, stomp, and roar with to build multi-sensory connections. For advanced preschoolers, introduce the herbivore versus carnivore distinction through teeth shape (flat teeth for plants, sharp teeth for meat), extend counting to dinosaur egg clutch scenes with eight or more items, and challenge children to sequence a three-step dinosaur story such as egg hatching, baby dinosaur growing, and adult dinosaur walking.',
    parentTakeaway: 'The most powerful thing about dinosaur worksheets at the preschool level is that your child already cares about this subject more than almost anything else in their world. Three- and four-year-olds who love dinosaurs will voluntarily choose a dinosaur counting worksheet over free play \u2014 a level of intrinsic academic motivation that is extraordinarily rare at this age and should be leveraged fully. Use dinosaur worksheets as the gateway activity for children who resist other types of structured learning, and extend every worksheet session by discussing what your child already knows about the featured dinosaur. Visit a natural history museum to see real fossils, because the moment a child connects a worksheet illustration to a real skeleton is the moment abstract learning becomes permanently real in their memory.',
    classroomIntegration: 'Dinosaur worksheets power a multi-week preschool thematic unit built around excavation, discovery, and comparison that connects naturally to every learning domain. Create a dinosaur dig sensory bin filled with sand and buried plastic dinosaurs for free-choice exploration. Use dinosaur coloring pages as arrival settling activities, incorporate size comparison worksheets into small-group math instruction where children order dinosaur cards from smallest to largest, and connect counting activities to a classroom dinosaur museum where children label their favorite species with numeral cards showing how many legs, horns, or spikes each has. Movement breaks where children stomp like a T-Rex, stretch their necks like a Brachiosaurus, or fly like a Pteranodon bridge worksheet learning to gross motor development while reinforcing dinosaur vocabulary. A simple fossil-impression craft using clay and plastic dinosaurs extends the theme into tactile art while introducing the concept that real dinosaurs left impressions in rock.',
    assessmentRubric: [
      { skill: 'Dinosaur size comparison', emerging: 'identifies the bigger dinosaur in a pair with teacher prompting', proficient: 'independently orders three dinosaurs by size and uses vocabulary like biggest, smallest, and taller', advanced: 'orders four or more dinosaurs by size, compares using multiple measurement words like taller, heavier, and longer, and explains reasoning like the long-neck dinosaur is the tallest because its neck reaches up high' },
      { skill: 'Counting with dinosaur objects', emerging: 'counts to 3 dinosaur items with one-to-one correspondence using physical pointing', proficient: 'counts to 7 dinosaur items reliably, identifies the matching numeral, and uses context words like five dinosaur eggs', advanced: 'counts to 10+, compares two dinosaur groups, and creates simple quantity comparisons like this nest has more eggs than that nest' },
      { skill: 'Dinosaur identification and vocabulary', emerging: 'names two common dinosaurs like T-Rex and Triceratops from illustrations', proficient: 'names four or more dinosaurs and describes one visible feature of each like sharp teeth or long neck', advanced: 'names six or more dinosaurs, describes features, and uses the feature to explain a concept like it has sharp teeth so it eats meat' },
    ],
  },

  // ── Ocean ───────────────────────────────────────────────────────────
  {
    name: 'ocean',
    uniqueGradeAngle: 'Preschool is the ideal stage for ocean worksheets because three- and four-year-olds are in the peak period of sensory-driven learning, and the ocean provides the most multi-sensory theme available across all 50 themes \u2014 waves, sand, shells, water splashing, bubbles, and the smooth-to-rough texture spectrum of marine life create a sensory vocabulary foundation that no land-based theme can match. Ocean creatures also possess the most distinctive silhouettes of any animal group: the eight radiating arms of an octopus, the curving body of a seahorse, the five-pointed symmetry of a starfish, and the streamlined dart of a fish are so visually unique that shadow matching and shape recognition activities become dramatically more effective than with any other creature set. This combination of sensory richness and visual distinctiveness makes ocean worksheets the optimal vehicle for simultaneously developing sensory vocabulary, shape recognition, and fine motor skills during the developmental window when these three capacities are growing most rapidly.',
    developmentalMilestones: [
      { milestone: 'Shape recognition through uniquely distinctive creature silhouettes (preschoolers are developing the ability to identify and name shapes)', howWeAddress: 'ocean creatures provide the most visually distinct silhouettes of any animal group, making shadow-match and shape-sorting activities dramatically effective because an octopus, seahorse, and starfish look nothing alike, reducing confusion and building confident shape discrimination' },
      { milestone: 'Sensory vocabulary development through the richest sensory theme available (preschoolers are rapidly expanding descriptive language)', howWeAddress: 'ocean worksheets naturally introduce texture words like smooth, rough, slimy, and spiky, temperature words like cold and warm, and movement words like splash, swim, and float that build the sensory vocabulary essential for later descriptive writing' },
      { milestone: 'Counting through collection-based activities (preschoolers learn counting most effectively when objects are collected into groups)', howWeAddress: 'shell counting, fish counting, and sea creature sorting worksheets mirror the natural collection behavior preschoolers already exhibit at beaches and water tables, making counting feel like organizing treasures rather than completing a math assignment' },
    ],
    differentiationNotes: 'For struggling preschoolers, focus on three immediately recognizable sea creatures (fish, starfish, turtle) and use water table play with matching plastic creatures alongside every worksheet to create the strongest possible multi-sensory connection; reduce shadow matching to high-contrast pairs where the two silhouettes look nothing alike. For advanced preschoolers, introduce ocean zone concepts (beach, shallow water, deep water) as a sorting framework, extend counting to busy underwater scene worksheets with ten or more creatures, and encourage children to describe each sea creature using two or three sensory vocabulary words like the octopus is smooth and squishy with eight long arms.',
    parentTakeaway: 'Ocean worksheets give preschool parents a unique advantage \u2014 bath time, pool visits, and even kitchen sink play become instant learning extensions. After completing an ocean counting or matching worksheet, hand your child a few rubber sea creatures during bath time and ask them to count, sort by size, or name each one. This seamless worksheet-to-water-play transfer is something only the ocean theme provides, and it means your child gets bonus learning reinforcement during a daily routine that already involves water. If you live near a beach, bring worksheets along and complete them on the sand alongside real shells and tide pool creatures for the most powerful paper-to-reality connection possible. Even landlocked families can visit an aquarium or watch a short ocean documentary to bring worksheet creatures to vivid life.',
    classroomIntegration: 'Ocean worksheets anchor a preschool thematic unit centered on a classroom water table exploration station that connects academic skills to sensory discovery. Stock the water table with plastic sea creatures, shells, and sand for free-choice sorting and counting practice that directly parallels worksheet activities. Use ocean coloring pages as morning arrival work, incorporate counting worksheets into a small-group math rotation where children count shells into numbered cups, and connect matching activities to a classroom ocean mural where children add a new sea creature each day after completing its worksheet. An indoor beach sensory bin with sand, shells, and hidden sea creature cards extends sorting and counting into tactile exploration. Ocean sounds played during worksheet time create an immersive atmosphere, and movement activities where children swim like fish, float like jellyfish, or walk sideways like crabs bridge paper learning to gross motor development while reinforcing ocean vocabulary through whole-body engagement.',
    assessmentRubric: [
      { skill: 'Sea creature identification and shape recognition', emerging: 'names two common ocean animals like fish and starfish from illustrations with teacher prompting', proficient: 'names four or more sea creatures independently and matches them to their silhouettes in shadow-match activities', advanced: 'names six or more creatures, matches all silhouettes, and describes one distinctive shape feature of each like the starfish has five arms that spread out like a star' },
      { skill: 'Counting ocean objects', emerging: 'counts to 3 shells or fish with one-to-one correspondence using physical pointing', proficient: 'counts to 7 sea objects reliably, identifies the matching numeral, and sorts counted objects into groups', advanced: 'counts to 10+, compares two ocean groups, and uses comparison vocabulary like there are more fish than starfish in this picture' },
      { skill: 'Sensory vocabulary with ocean context', emerging: 'uses one sensory word to describe a sea creature when prompted by teacher like the fish is smooth', proficient: 'independently uses two or three sensory words to describe ocean items and responds to questions about texture and temperature', advanced: 'uses multiple sensory words in simple sentences like the shell is rough on the outside and smooth on the inside, and compares sensory properties across different ocean items' },
    ],
  },

  // ── Forest ──────────────────────────────────────────────────────────
  {
    name: 'forest',
    uniqueGradeAngle: 'Preschool is the optimal stage for forest worksheets because three- and four-year-olds are in the peak period of tactile learning, and the forest provides the most texturally rich theme of all 50 themes \u2014 bark, leaves, pinecones, moss, feathers, acorn caps, smooth stones, and fuzzy caterpillars create a texture library that can be physically brought into the classroom and placed alongside every single worksheet. No other theme offers this level of touchable, collectible, free, and endlessly renewable real-world material that pairs directly with paper activities. At this age, children learn as much through their fingertips as through their eyes, and forest worksheets uniquely allow every coloring page, sorting activity, and matching exercise to be accompanied by the actual natural object being depicted \u2014 a child coloring a leaf can simultaneously hold a real leaf, a child sorting pinecones on paper can touch real pinecones at the same table, creating a dual-channel sensory learning experience that no indoor-only or exotic-creature theme can replicate.',
    developmentalMilestones: [
      { milestone: 'Texture-based classification and descriptive vocabulary (preschoolers are developing the ability to sort objects by tactile properties)', howWeAddress: 'forest worksheets paired with real natural materials allow children to sort by rough versus smooth, hard versus soft, and big versus small while touching actual bark, leaves, and stones, building classification skills through the tactile channel that is most active at ages three to four' },
      { milestone: 'Seasonal change observation and temporal reasoning (preschoolers are beginning to understand that things change over time)', howWeAddress: 'forest worksheets depicting the same trees across seasons introduce the concept that the natural world follows predictable patterns, building the temporal reasoning that supports mathematical sequencing and narrative comprehension' },
      { milestone: 'Nature collection counting (preschoolers build strongest counting skills when counting personally collected objects)', howWeAddress: 'forest-themed counting worksheets mirror the natural collection behavior preschoolers already exhibit with sticks, leaves, and acorns, making counting feel like organizing personal treasures rather than completing an abstract math task' },
    ],
    differentiationNotes: 'For struggling preschoolers, focus on three immediately recognizable forest elements (tree, leaf, squirrel) and always place the real natural object on the table next to the worksheet so children can look back and forth between the illustration and the real thing; reduce sorting to two categories (leaves versus not leaves) before introducing three-way sorts. For advanced preschoolers, introduce leaf shape classification (round, pointed, lobed) using both worksheets and real leaf specimens, extend counting to forest floor scenes with ten or more objects, and challenge children to describe forest items using two texture words such as the pinecone is rough and bumpy or the moss is soft and fuzzy.',
    parentTakeaway: 'Forest worksheets offer preschool parents the most seamless classroom-to-home learning extension of any theme because the materials are literally free and available in every neighborhood. After completing a forest worksheet, step outside with your child and collect real versions of whatever appeared on the page \u2014 leaves, sticks, pinecones, acorns, bark pieces, or smooth stones. Let your child sort their collection on the kitchen table using the same categories from their worksheet, and you have just transformed a ten-minute paper activity into a multi-hour nature investigation at zero cost. The tactile dimension of forest learning is especially important at the preschool age because three- and four-year-olds process information through touch just as powerfully as through sight, and every real leaf they hold while looking at a leaf illustration builds a stronger memory than either experience alone.',
    classroomIntegration: 'Forest worksheets anchor a preschool nature unit centered on a classroom nature table that evolves throughout the seasons. Stock the table with pinecones, bark samples, leaves, acorn caps, and smooth stones that children can freely explore, sort, and count alongside their worksheet activities. Use forest coloring pages as morning arrival work, incorporate counting worksheets into a small-group math rotation where children count real acorns into numbered containers, and connect sorting activities to a seasonal forest wall display where children observe how the same illustrated tree changes across fall, winter, spring, and summer. Leaf rubbing art activities extend fine motor worksheet practice into creative expression while teaching children about leaf vein patterns and shapes. A classroom tree adoption project, where children observe and draw one visible tree weekly throughout the school year, connects worksheet learning to long-term scientific observation that builds the habit of noticing change over time.',
    assessmentRubric: [
      { skill: 'Forest item identification and classification', emerging: 'names two common forest items like tree and leaf from illustrations with teacher prompting', proficient: 'names four or more forest items independently and sorts them into two groups by one attribute like living versus not living', advanced: 'names six or more items, sorts by one attribute, re-sorts by a different attribute such as texture, and explains both sorting rules verbally' },
      { skill: 'Counting natural objects', emerging: 'counts to 3 forest items with one-to-one correspondence using physical pointing', proficient: 'counts to 7 forest items reliably, matches to the correct numeral, and uses nature context words like five acorns', advanced: 'counts to 10+, compares two forest groups, and describes quantities using comparison words like there are more leaves than pinecones' },
      { skill: 'Nature observation and description', emerging: 'points to a forest feature like bark or leaf when named by teacher', proficient: 'names three forest features independently and describes one texture using words like rough or smooth', advanced: 'names features, describes textures using two or more words, and compares textures across items like the bark is rough but the leaf is smooth' },
    ],
  },

  // ── Nature ──────────────────────────────────────────────────────────
  {
    name: 'nature',
    uniqueGradeAngle: 'Preschool is the foundational stage for nature worksheets because three- and four-year-olds are building their first mental model of how the world works, and nature is the ONLY theme that presents the environment as a connected system of habitats, creatures, weather, and seasons rather than as isolated subject categories. Unlike forest worksheets that focus on one ecosystem or ocean worksheets that focus on marine life, nature worksheets encompass ponds, meadows, gardens, forests, and skies within a single integrated framework, teaching preschoolers the foundational ecological concept that different living things share interconnected spaces. This systems-level introduction is developmentally unique to the preschool period because children at ages three and four are forming the categorical frameworks they will use for the rest of their lives, and a nature theme that shows how birds, insects, plants, weather, and water all interact within a single scene builds a richer, more accurate mental model of the world than any single-ecosystem theme can provide.',
    developmentalMilestones: [
      { milestone: 'Complex scene scanning and selective attention (preschoolers are developing the ability to find specific items within visually busy environments)', howWeAddress: 'nature worksheets feature the most detailed, multi-element scenes of any theme with trees, flowers, insects, birds, water, and clouds all sharing one illustration, training the focused visual scanning that directly supports reading readiness and mathematical pattern recognition' },
      { milestone: 'Multi-habitat vocabulary development (preschoolers are rapidly expanding their environmental vocabulary)', howWeAddress: 'nature worksheets introduce habitat words like pond, garden, meadow, and forest alongside creature-habitat pairs like frog-pond and bird-nest, building the relational vocabulary that supports later reading comprehension of informational texts' },
      { milestone: 'Holistic observation and connection-making (preschoolers are beginning to notice that different things exist in the same place for a reason)', howWeAddress: 'nature scenes showing birds in trees above rabbits in burrows beside fish in ponds introduce the concept of shared ecosystems, building the connection-making thinking that supports scientific reasoning and systems understanding' },
    ],
    differentiationNotes: 'For struggling preschoolers, simplify nature worksheets to single-habitat scenes (just a pond scene or just a garden scene) before introducing multi-habitat landscapes, reduce find-and-count targets to two or three highly visible creatures, and use toy animals placed on top of the worksheet to help children connect the illustration to physical objects they can touch. For advanced preschoolers, introduce simple cause-and-effect nature concepts (rain makes flowers grow, flowers attract butterflies), extend find-and-count activities to complex scenes with eight or more hidden items, and ask children to describe what they observe in nature scenes using complete sentences that include both the creature and its habitat like the frog lives in the pond because it needs water.',
    parentTakeaway: 'Nature worksheets give preschool parents the broadest possible learning extension because the entire outdoors is the classroom. Unlike theme-specific worksheets that require particular conditions to reinforce (you need a zoo for zoo worksheets, a beach for ocean worksheets), nature worksheets connect to literally any outdoor environment your child encounters \u2014 a backyard, a park, a sidewalk, a window with a view. After completing a nature worksheet, simply ask your child to look outside and tell you what living things they can see. This builds the observation habit that scientists, writers, and thinkers all share, and it teaches your child that learning is not something confined to paper but something happening all around them every moment. Keep worksheet sessions to eight to twelve minutes and always follow up with even a brief outdoor observation, because the paper-to-reality connection at this age builds permanent learning pathways.',
    classroomIntegration: 'Nature worksheets integrate into preschool programming as the overarching environmental thread that connects all other science and outdoor learning. Establish a daily nature observation routine where children look out the classroom window each morning and report what they see before starting their worksheets. Use nature scene coloring pages as arrival activities, incorporate find-and-count worksheets into a small-group visual scanning station where children use magnifying glasses on detailed nature illustrations, and connect habitat matching activities to a classroom ecosystem display showing pond, garden, forest, and meadow zones populated with children\u0027s animal drawings. A weekly nature walk rotation between different outdoor environments (playground, garden, tree-lined path) provides real-world material for worksheet comparisons, and a classroom weather chart extends nature observation into daily data collection. The cross-curricular connections to science (habitats, weather, seasons), math (counting, sorting, comparing), literacy (nature vocabulary, descriptive language), and art (nature illustration, leaf printing) make nature the most comprehensively cross-curricular theme available for integrated preschool instruction.',
    assessmentRubric: [
      { skill: 'Nature scene scanning and identification', emerging: 'finds one specified creature in a simple nature scene with teacher guidance and pointing assistance', proficient: 'independently finds three or more specified items in a detailed nature scene and names each one', advanced: 'finds five or more items, names them, and identifies which habitat zone each belongs to like the frog is near the pond and the bird is in the tree' },
      { skill: 'Counting in complex nature scenes', emerging: 'counts to 3 nature items in a scene with one-to-one pointing and teacher support', proficient: 'counts to 5-7 items in a detailed scene, identifies the matching numeral, and maintains accurate count despite visual distractions', advanced: 'counts to 10+ items across different scene areas, compares groups, and uses vocabulary like there are more butterflies than frogs in this picture' },
      { skill: 'Habitat awareness and vocabulary', emerging: 'points to a named habitat feature like pond or tree when directed by teacher', proficient: 'names three habitat features independently and matches one animal to its correct habitat', advanced: 'names four or more habitat features, matches multiple animals to habitats, and explains one connection like the frog lives near the pond because frogs need water to swim' },
    ],
  },
];

// ── Injection ────────────────────────────────────────────────────────────

let successCount = 0;

for (const theme of themes) {
  const filePath = path.join(BASE, theme.name, 'en.ts');
  let content = fs.readFileSync(filePath, 'utf8');

  // Detect line endings
  const nl = content.includes('\r\n') ? '\r\n' : '\n';

  // Build injection block
  const injection = buildInjection(theme, nl);

  // Pattern: end of faq array ], then close preschool }, then 'kindergarten':
  // Uses a regex that handles both \n and \r\n
  const pattern = /(      \],)\r?\n(    \},)\r?\n(    'kindergarten':)/;

  if (!pattern.test(content)) {
    console.error(`ERROR: Injection pattern not found in ${theme.name}/en.ts`);
    process.exit(1);
  }

  // Check if already injected
  if (content.includes("uniqueGradeAngle: '") && content.indexOf("uniqueGradeAngle: '") < content.indexOf("'kindergarten':")) {
    console.log(`SKIP: ${theme.name}/en.ts already has uniqueGradeAngle in preschool section`);
    continue;
  }

  content = content.replace(pattern, `$1${nl}${injection}${nl}$2${nl}$3`);

  fs.writeFileSync(filePath, content, 'utf8');
  successCount++;
  console.log(`OK: Injected 6 preschool fields into ${theme.name}/en.ts`);
}

console.log(`\nDone! ${successCount} of ${themes.length} themes enriched.`);
