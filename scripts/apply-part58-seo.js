/**
 * SEO Part 58: Enrich preschool grade for space, weather, seasons, spring, summer
 * Adds 6 grade-level enrichment fields to gradeContent.preschool for each theme.
 * Fields: uniqueGradeAngle, developmentalMilestones, differentiationNotes,
 *         parentTakeaway, classroomIntegration, assessmentRubric
 */
const fs = require('fs');
const path = require('path');

const BASE = path.join(__dirname, '..', 'frontend', 'content', 'themes');

// Escape single quotes for TS single-quoted strings
function esc(s) {
  return s.replace(/'/g, "\\'");
}

function buildInjection(data, nl) {
  const lines = [];
  lines.push(`      uniqueGradeAngle: '${esc(data.uniqueGradeAngle)}',`);
  lines.push(`      developmentalMilestones: [`);
  for (const m of data.developmentalMilestones) {
    lines.push(`        { milestone: '${esc(m.milestone)}', howWeAddress: '${esc(m.howWeAddress)}' },`);
  }
  lines.push(`      ],`);
  lines.push(`      differentiationNotes: '${esc(data.differentiationNotes)}',`);
  lines.push(`      parentTakeaway: '${esc(data.parentTakeaway)}',`);
  lines.push(`      classroomIntegration: '${esc(data.classroomIntegration)}',`);
  lines.push(`      assessmentRubric: [`);
  for (const r of data.assessmentRubric) {
    lines.push(`        { skill: '${esc(r.skill)}', emerging: '${esc(r.emerging)}', proficient: '${esc(r.proficient)}', advanced: '${esc(r.advanced)}' },`);
  }
  lines.push(`      ],`);
  return lines.join(nl);
}

// ── Theme content ────────────────────────────────────────────────────────

const themes = [
  // ── Space ──────────────────────────────────────────────────────────
  {
    name: 'space',
    uniqueGradeAngle: 'Preschool is the most magical stage for space worksheets because three- and four-year-olds are in the peak period of wonder-driven learning where the sheer scale and mystery of the universe produces an awe response that no earthbound theme can match \u2014 the moon, stars, planets, and rockets activate a sense of cosmic fascination that transforms counting, matching, and sorting from mundane academic exercises into explorations of the most extraordinary environment imaginable. Space is uniquely powerful at the preschool level because it combines the familiar (the moon children see every night, the stars they wish upon) with the incomprehensibly vast (planets millions of miles away, galaxies beyond counting), creating a motivational tension between the known and the unknown that drives the curiosity engine harder than any theme rooted entirely in everyday experience. The visual simplicity of space objects \u2014 circles for planets, five-pointed shapes for stars, simple crescents for moons \u2014 also makes space the ideal theme for early shape recognition practice because the real astronomical objects genuinely resemble basic geometric forms.',
    developmentalMilestones: [
      { milestone: 'Shape recognition through astronomically accurate simple forms (preschoolers are learning to identify and name circles, crescents, and stars)', howWeAddress: 'space worksheets use planets, moons, and stars that are naturally circular, crescent-shaped, and star-shaped, making shape recognition practice astronomically authentic rather than abstract' },
      { milestone: 'Counting with extreme motivation and sustained attention (preschoolers need emotional engagement to persist through counting challenges)', howWeAddress: 'the awe and wonder that space themes generate produces a level of sustained focus that exceeds almost every other theme, with children eagerly counting stars, planets, and rockets long after they would lose interest in generic counting objects' },
      { milestone: 'Spatial vocabulary and positional language (preschoolers are developing concepts of up, down, near, far, above, and below)', howWeAddress: 'space scenes with rockets going up, stars positioned above planets, and moons near or far from Earth provide the most dramatic and intuitive context for spatial vocabulary because the distances and directions in space are extreme and visually obvious' },
    ],
    differentiationNotes: 'For struggling preschoolers, focus on three immediately recognizable space objects (star, moon, rocket) and use glow-in-the-dark star stickers alongside worksheets to create a multi-sensory connection; reduce counting to sets of three or fewer and use large, high-contrast illustrations with thick outlines. For advanced preschoolers, introduce the eight planets as a counting and ordering challenge, extend star-counting worksheets to groups of ten or more, and ask children to describe the spatial position of objects using complete positional phrases like the rocket is above the planet and the star is next to the moon.',
    parentTakeaway: 'Space worksheets give preschool parents something no other theme can provide \u2014 a nightly, free, always-available visual connection to worksheet content simply by stepping outside and looking up. After completing a space worksheet about stars or the moon, take your child outside at bedtime and point to the real moon and real stars together. This paper-to-sky transfer is profoundly powerful for three- and four-year-olds because it proves that the shapes and objects they practiced on paper actually exist in the real world above their heads. The sense of wonder this produces is not just emotionally beautiful \u2014 it is neurologically significant, because awe-based experiences create stronger memory encoding than routine learning moments, meaning your child will remember space worksheet concepts longer and more vividly than almost any other theme.',
    classroomIntegration: 'Space worksheets anchor a preschool thematic unit built around a classroom space station dramatic play center that transforms abstract cosmic concepts into hands-on exploration. Set up a cardboard rocket ship, hang paper planets from the ceiling at different heights, and create a star-counting wall where children add glow-in-the-dark stars daily. Use space coloring pages as morning arrival activities, incorporate counting worksheets into a small-group math rotation where children count plastic stars into numbered crater cups, and connect shape recognition activities to a planet identification chart where children match circular planet cards to their names. Movement activities where children blast off like rockets (counting down from five), orbit like planets, and float like astronauts bridge worksheet learning to gross motor development while reinforcing space vocabulary and counting sequences through whole-body engagement.',
    assessmentRubric: [
      { skill: 'Space shape recognition', emerging: 'identifies a circle when shown a planet illustration with teacher prompting', proficient: 'independently names circle, crescent, and star shapes in space contexts and matches planets to their outlines', advanced: 'names all basic shapes in space scenes, describes shape features like the moon is a crescent because only part is lit up, and identifies shapes in both space and non-space contexts' },
      { skill: 'Counting space objects', emerging: 'counts to 3 stars or planets with one-to-one correspondence using physical pointing', proficient: 'counts to 7 space objects reliably, identifies the matching numeral, and uses space context words like five stars', advanced: 'counts to 10+, compares two groups of space objects, and uses comparison vocabulary like there are more stars than planets in this picture' },
      { skill: 'Spatial vocabulary with space context', emerging: 'points up when asked where the rocket goes with teacher modeling', proficient: 'uses three or more positional words like up, above, and next to when describing space scenes', advanced: 'uses positional words in complete sentences like the moon is above the rocket and below the stars, and applies spatial vocabulary to non-space contexts' },
    ],
  },

  // ── Weather ────────────────────────────────────────────────────────
  {
    name: 'weather',
    uniqueGradeAngle: 'Preschool is the perfect stage for weather worksheets because three- and four-year-olds experience weather as the single most impactful environmental force in their daily lives \u2014 weather determines what they wear, whether they play outside, how the sky looks, and how they feel, making it the most personally relevant science theme available at any age. Unlike abstract science topics, weather is something every preschooler has direct, daily, sensory experience with: they have felt rain on their skin, seen lightning flash, heard thunder rumble, watched snow fall, and squinted in sunshine. This universal sensory familiarity means weather worksheets build academic skills on a foundation of lived experience that is richer, more consistent, and more emotionally resonant than any theme that requires special trips or equipment to encounter. Weather also provides the most natural daily data collection opportunity of any theme, introducing preschoolers to the foundational scientific habit of systematic observation through the simple act of looking out the window each morning and recording what they see.',
    developmentalMilestones: [
      { milestone: 'Daily observation and data recording habits (preschoolers are developing the ability to notice, remember, and report what they see)', howWeAddress: 'weather worksheets paired with a daily weather chart create the first authentic data collection experience most children encounter, building the observation-recording cycle that underpins all later scientific inquiry' },
      { milestone: 'Cause-and-effect reasoning through weather consequences (preschoolers are beginning to understand that one event causes another)', howWeAddress: 'weather worksheets that connect rain to puddles, sun to warmth, and snow to cold build concrete cause-and-effect understanding through phenomena children have personally experienced' },
      { milestone: 'Clothing and preparation matching (preschoolers are developing practical life skills and categorical reasoning)', howWeAddress: 'weather-to-clothing matching worksheets combine academic sorting skills with genuine practical knowledge children use every morning when getting dressed' },
    ],
    differentiationNotes: 'For struggling preschoolers, focus on three high-contrast weather types (sunny, rainy, snowy) and pair every worksheet with a window observation so children can compare the illustration to the actual sky outside; use real props like an umbrella, sunglasses, and mittens placed on the table during worksheet time. For advanced preschoolers, introduce a four-season weather pattern discussion where children predict what weather comes next, extend matching activities to multi-attribute challenges like finding clothes that are both warm AND waterproof, and encourage children to use complete weather description sentences like it is cloudy today and it might rain because the clouds are dark.',
    parentTakeaway: 'Weather worksheets offer preschool parents the most effortless daily learning reinforcement of any theme because weather is literally unavoidable \u2014 every single morning provides a fresh, free, zero-preparation opportunity to connect worksheet learning to reality. After completing a weather matching or sorting worksheet, simply ask your child what the weather is doing right now and what clothes they should wear because of it. This daily weather conversation takes thirty seconds and reinforces observation skills, cause-and-effect reasoning, and vocabulary simultaneously. Keep a simple weather chart on the refrigerator where your child places a sun, cloud, or raindrop sticker each morning, and by the end of the month they will have completed their first real data collection project \u2014 an achievement that builds scientific thinking habits starting at age three.',
    classroomIntegration: 'Weather worksheets integrate into preschool programming as the most natural daily routine enhancement available because weather observation requires zero special materials, zero field trips, and zero preparation \u2014 just a window. Establish a morning weather circle where one child checks the window and reports the weather before the class completes a weather worksheet together. Use weather coloring pages as arrival activities, incorporate sorting worksheets into a dress-up dramatic play center where children match real clothing items to weather cards, and connect counting activities to a classroom weather graph that tracks sunny, cloudy, and rainy days across the month. Sensory weather stations with spray bottles for rain, a fan for wind, and ice cubes for cold extend worksheet concepts into tactile exploration. The cross-curricular connections to science (weather patterns, seasons), math (graphing, counting, sorting), literacy (weather vocabulary, descriptive language), and social-emotional learning (coping with weather-related changes to plans) make weather the most naturally integrated daily theme for preschool instruction.',
    assessmentRubric: [
      { skill: 'Weather identification and vocabulary', emerging: 'names two weather types like sunny and rainy from illustrations with teacher prompting', proficient: 'independently names four weather types and describes one observable feature of each like rain means water falls from clouds', advanced: 'names five or more weather types, describes features, and predicts consequences like if it snows the ground will be white and we need boots' },
      { skill: 'Weather-clothing matching', emerging: 'matches one clothing item to a weather type with teacher guidance like umbrella goes with rain', proficient: 'independently matches three or more clothing items to correct weather types and explains one choice', advanced: 'matches all items correctly, explains reasoning for each, and identifies items appropriate for multiple weather types like a jacket works for both wind and light rain' },
      { skill: 'Weather observation and recording', emerging: 'looks at the sky and points to the matching weather card when given two choices by teacher', proficient: 'independently selects the correct weather card from four options and places it on the classroom chart', advanced: 'selects weather card, describes current weather using two or more descriptive words, and compares today to yesterday using vocabulary like yesterday was sunny but today is cloudy' },
    ],
  },

  // ── Seasons ────────────────────────────────────────────────────────
  {
    name: 'seasons',
    uniqueGradeAngle: 'Preschool is the foundational stage for seasons worksheets because three- and four-year-olds are building their first understanding of cyclical time \u2014 the concept that the world changes in a predictable, repeating pattern that comes back around to where it started. This is one of the most profound cognitive achievements of early childhood, and seasons provide the most vivid, multi-sensory, personally experienced demonstration of cyclical change available in any educational theme. Unlike linear sequences where events have a beginning and an end, the seasonal cycle has no endpoint, and grasping this concept at age three or four builds the mental architecture for understanding all later cyclical patterns including weekly routines, monthly calendars, the water cycle, and mathematical patterns. Seasons worksheets also uniquely integrate every other nature-based theme (weather, plants, animals, clothing) into a unified temporal framework, showing preschoolers that these are not isolated subjects but interconnected parts of one grand recurring pattern.',
    developmentalMilestones: [
      { milestone: 'Cyclical time comprehension (preschoolers are transitioning from understanding only before and after to grasping repeating patterns)', howWeAddress: 'seasons worksheets that arrange spring, summer, fall, and winter in a circle rather than a line introduce the revolutionary concept that time patterns repeat, building the cognitive foundation for all later cyclical reasoning' },
      { milestone: 'Multi-attribute change observation (preschoolers are developing the ability to notice that multiple things change simultaneously)', howWeAddress: 'seasonal comparison worksheets show that trees, weather, clothing, and activities ALL change together across seasons, training children to observe interconnected changes rather than isolated details' },
      { milestone: 'Temporal vocabulary and sequencing (preschoolers are building language for talking about time)', howWeAddress: 'seasons worksheets introduce essential temporal vocabulary like next, after, before, and again that children need for narrative comprehension and for describing their own experiences in sequence' },
    ],
    differentiationNotes: 'For struggling preschoolers, focus on two high-contrast seasons (summer and winter) before introducing spring and fall, use real seasonal objects on the table (a leaf, a mitten, a flower, sunglasses) to anchor each season in tactile experience, and present seasons in a linear sequence before attempting to introduce the circular cycle concept. For advanced preschoolers, introduce the concept that seasons look different in different places, challenge children to sort a mixed pile of seasonal items into four groups and explain each choice, and ask children to predict what will happen next in a seasonal sequence and describe their reasoning using temporal vocabulary like after fall comes winter because it gets colder.',
    parentTakeaway: 'Seasons worksheets give preschool parents a year-long learning journey that naturally renews itself every three months with fresh real-world connections. The most powerful thing you can do is connect every season worksheet to what is happening right now outside your window \u2014 point out the changing leaves in autumn, the bare branches in winter, the first flowers in spring, and the long sunny days in summer. Take a photo of the same tree or the same view from your yard once each season and compare them together, creating a personal visual record that makes the abstract concept of cyclical change concrete and unforgettable. This one-tree-four-seasons project costs nothing, takes two minutes per season, and teaches your child more about patterns, change, and scientific observation than any single activity available at the preschool level.',
    classroomIntegration: 'Seasons worksheets serve as the overarching temporal framework for the entire preschool year, connecting every other thematic unit to its place in the annual cycle. Create a four-panel seasons display wall that evolves in real time as the year progresses, with children adding seasonal artwork and observations to the current panel each week. Use seasons coloring pages as arrival activities during seasonal transition weeks, incorporate sorting worksheets into a seasonal clothing dramatic play center, and connect sequencing activities to a classroom calendar where children track which season they are currently experiencing. A classroom tree observation project where children draw the same visible tree once per month throughout the year provides the most powerful longitudinal science observation experience available in preschool and directly parallels the seasonal change concepts practiced in worksheets. Movement activities where children act out seasonal changes (shivering in winter, splashing in summer, raking in fall, planting in spring) bridge worksheet learning to embodied understanding.',
    assessmentRubric: [
      { skill: 'Season identification and characteristics', emerging: 'names two seasons like summer and winter from illustrations with teacher prompting', proficient: 'independently names all four seasons and describes one characteristic of each like winter is cold and has snow', advanced: 'names all four seasons, describes multiple characteristics of each, and identifies which season it currently is with supporting evidence like it is spring because the flowers are blooming outside' },
      { skill: 'Seasonal sorting and classification', emerging: 'sorts items into two seasonal groups like summer things and winter things with teacher modeling', proficient: 'independently sorts items into four seasonal groups with minimal errors and names each group', advanced: 'sorts into four groups, explains sorting rationale for each item, and identifies items that could belong to multiple seasons with reasoning like a jacket works in fall and spring because both are cool but not freezing' },
      { skill: 'Seasonal sequence understanding', emerging: 'identifies what comes next in a two-season alternating pattern like summer then winter with picture support', proficient: 'orders all four seasons correctly and uses the word next or after to describe the sequence', advanced: 'orders all four seasons, explains that seasons repeat in a cycle, and predicts what season comes after the current one using temporal vocabulary and real-world observations' },
    ],
  },

  // ── Spring ─────────────────────────────────────────────────────────
  {
    name: 'spring',
    uniqueGradeAngle: 'Preschool is the ideal stage for spring worksheets because three- and four-year-olds are in the peak period of growth awareness \u2014 they are acutely tuned to things getting bigger, emerging, and changing because they themselves are growing and changing more rapidly than at any other life stage, and spring is the season that mirrors their own developmental experience most perfectly. Seeds sprouting, flowers blooming, baby animals being born, caterpillars becoming butterflies, and rain turning brown earth green all demonstrate the concept of growth and transformation that resonates with preschoolers at an almost personal level. No other seasonal theme provides this many simultaneous examples of visible, rapid, real-time change that children can watch happen day by day, making spring worksheets the most powerful vehicle for teaching observation-over-time skills during the developmental window when children are first capable of tracking gradual change.',
    developmentalMilestones: [
      { milestone: 'Growth sequence comprehension (preschoolers are developing the ability to understand that things change gradually through a series of steps)', howWeAddress: 'spring worksheets featuring seed-to-flower and caterpillar-to-butterfly sequences provide the most vivid, personally observable examples of sequential growth, building the temporal reasoning that supports mathematical sequencing and narrative comprehension' },
      { milestone: 'Sensory vocabulary expansion through the richest seasonal sensory palette (preschoolers are rapidly building descriptive language)', howWeAddress: 'spring introduces the largest number of new sensory experiences of any season with rain sounds, flower smells, mud textures, bird songs, and warm breezes, providing unmatched opportunities for sensory vocabulary development' },
      { milestone: 'Counting through emerging abundance (preschoolers are building cardinality with sets that grow)', howWeAddress: 'spring scenes where flowers multiply, baby animals appear, and butterflies gather provide naturally growing counting sets that teach children quantity can increase over time' },
    ],
    differentiationNotes: 'For struggling preschoolers, focus on three immediately recognizable spring elements (flower, butterfly, rain) and use real spring objects like a potted seedling, flower petals, and a spray bottle for rain simulation alongside every worksheet; reduce growth sequences to two steps (seed then flower) before introducing three-step sequences. For advanced preschoolers, introduce a classroom seed-growing observation journal where children draw their plant daily alongside completing spring worksheets, extend counting to spring garden scenes with ten or more items, and challenge children to describe spring changes using before-and-after vocabulary like before spring the trees had no leaves but now they are growing green leaves.',
    parentTakeaway: 'Spring worksheets give preschool parents the most exciting real-time learning laboratory of any seasonal theme because spring changes happen fast enough for three- and four-year-olds to notice day by day. Plant a seed in a cup on the windowsill the same week your child starts spring worksheets, and let them water it and watch it grow alongside their paper activities \u2014 this parallel between growing a real seed and sequencing seed-to-flower on a worksheet creates the most powerful paper-to-reality connection available in early childhood education. Take spring walks specifically to look for signs of change: new buds on trees, worms after rain, birds building nests, and flowers pushing through soil. Every discovery reinforces the observation and counting skills your child practiced on their worksheets and builds the scientific habit of looking for evidence of change.',
    classroomIntegration: 'Spring worksheets anchor the most activity-rich thematic unit of the preschool year because spring provides more hands-on, real-time learning opportunities than any other season. Start a classroom seed-growing station where children plant seeds in cups and observe growth daily, creating a living parallel to the growth sequences they practice on worksheets. Use spring coloring pages as morning arrival activities, incorporate counting worksheets into a small-group math rotation where children count flower petals and plastic butterflies, and connect sequencing activities to a classroom butterfly life cycle display with real caterpillars if possible. A spring nature walk rotation provides weekly observation data that children compare to previous weeks, building the longitudinal observation skills that underpin scientific thinking. Mud play sensory bins, flower arranging fine motor stations, and bird song listening activities extend spring worksheet concepts into multi-sensory exploration across every learning domain.',
    assessmentRubric: [
      { skill: 'Spring identification and vocabulary', emerging: 'names two spring elements like flower and rain from illustrations with teacher prompting', proficient: 'independently names four or more spring elements and describes one change associated with spring like flowers grow from seeds', advanced: 'names multiple elements, describes several spring changes, and connects them causally like rain makes the flowers grow and then butterflies come to the flowers' },
      { skill: 'Growth sequence ordering', emerging: 'identifies first and last in a two-step growth sequence like seed then flower with picture support', proficient: 'correctly orders a three-step growth sequence like seed, sprout, flower and uses the word then or next to describe the order', advanced: 'orders three or more steps, explains why each step comes in that order, and predicts what might happen next in the sequence' },
      { skill: 'Counting spring objects', emerging: 'counts to 3 spring items like flowers or butterflies with one-to-one correspondence using physical pointing', proficient: 'counts to 7 spring items reliably, identifies the matching numeral, and uses spring context words like five butterflies', advanced: 'counts to 10+, compares two spring groups, and describes changes in quantity like there are more flowers this week than last week because they keep growing' },
    ],
  },

  // ── Summer ─────────────────────────────────────────────────────────
  {
    name: 'summer',
    uniqueGradeAngle: 'Preschool is the prime stage for summer worksheets because three- and four-year-olds experience summer as the most sensory-saturated season of their young lives \u2014 the heat of sun on skin, the splash of water play, the feel of sand between toes, the taste of cold treats, and the sound of outdoor play create a multi-sensory memory bank that no other season can match in richness or intensity. Summer is also the season when preschoolers spend the most time outdoors, meaning summer worksheets can be directly paired with outdoor experiences more frequently and more naturally than any other seasonal theme. The extended daylight hours and warm temperatures create more waking hours of potential learning reinforcement than any other season, and the abundance of outdoor sensory experiences means summer worksheets build academic skills on the richest experiential foundation of the entire year.',
    developmentalMilestones: [
      { milestone: 'Multi-sensory vocabulary through the most sensory-intense season (preschoolers are building the descriptive language that supports later writing)', howWeAddress: 'summer worksheets naturally introduce the broadest sensory vocabulary of any season with temperature words like hot and cool, texture words like sandy and wet, taste words like sweet and cold, and sound words like splash and buzz, building a rich descriptive vocabulary base' },
      { milestone: 'Counting through outdoor abundance (preschoolers are developing cardinality with large, visible, naturally occurring sets)', howWeAddress: 'summer scenes with beaches, gardens, and parks provide the most object-rich counting environments of any season, with shells, flowers, insects, and fruits creating naturally large counting sets that push children to practice higher numbers' },
      { milestone: 'Water play and measurement concepts (preschoolers are developing understanding of full, empty, more, and less through liquid play)', howWeAddress: 'summer water activities provide the most natural measurement vocabulary introduction because children can see, feel, and control liquid levels in cups, buckets, and pools, making concepts like full, empty, more, and less tangibly real' },
    ],
    differentiationNotes: 'For struggling preschoolers, focus on three immediately engaging summer elements (sun, water, ice cream) and pair every worksheet with a real sensory experience like a cup of water for pouring play, a piece of ice to hold, or sand in a tray for finger tracing; reduce counting to small sets of three and use large, bright illustrations with minimal background complexity. For advanced preschoolers, introduce summer activity planning as a sequencing exercise (first put on sunscreen, then go outside, then play in water), extend counting to busy beach or garden scenes with twelve or more items, and encourage children to describe summer experiences using three or more sensory words in a single sentence like the sand is hot and gritty and the water is cool and splashy.',
    parentTakeaway: 'Summer worksheets give preschool parents the most natural pairing of any seasonal theme with daily life because everything about summer invites hands-on, multi-sensory engagement that reinforces worksheet learning without any extra effort. After completing a summer counting or matching worksheet, simply continue the same activity outside \u2014 count real shells at the beach, sort real fruits at a farmers market, match real insects in the garden, or measure water in cups during backyard play. The extended daylight and warm weather mean you have more waking hours available for casual learning reinforcement than any other time of year. Keep worksheet sessions short (eight to ten minutes) and always follow with outdoor sensory play that mirrors the worksheet content, because the combination of paper learning and physical experience creates the strongest possible memory pathways for three- and four-year-olds.',
    classroomIntegration: 'Summer worksheets power a preschool thematic unit that capitalizes on extended outdoor time and the natural abundance of sensory learning materials available during warm months. Set up an outdoor water table counting station where children count cups of water poured, shells collected, and plastic sea creatures sorted. Use summer coloring pages as indoor cooling-down arrival activities, incorporate counting worksheets into a small-group math rotation using real summer objects like seashells, plastic fruits, and sand toys, and connect sorting activities to a summer sensory exploration bin filled with sand, water beads, and plastic summer items. Outdoor nature walks focused on summer-specific observations (insects buzzing, flowers blooming, birds singing) provide real-world counting and vocabulary practice. A classroom lemonade stand dramatic play center integrates counting, sorting, and social interaction while reinforcing summer vocabulary through role-play engagement.',
    assessmentRubric: [
      { skill: 'Summer identification and sensory vocabulary', emerging: 'names two summer elements like sun and water from illustrations with teacher prompting', proficient: 'independently names four or more summer elements and describes one using a sensory word like the sun is hot', advanced: 'names multiple elements, describes each using two or more sensory words, and compares summer to another season like summer is hot and sunny but winter is cold and snowy' },
      { skill: 'Counting summer objects', emerging: 'counts to 3 summer items like shells or flowers with one-to-one correspondence using physical pointing', proficient: 'counts to 7 summer items reliably, identifies the matching numeral, and sorts counted objects into groups', advanced: 'counts to 10+, compares two summer groups, and uses comparison vocabulary like there are more shells than starfish on this beach' },
      { skill: 'Summer activity sequencing', emerging: 'identifies first and last in a two-step summer activity like put on hat then go outside with teacher guidance', proficient: 'orders a three-step summer sequence correctly and uses the word first, then, or last to describe the order', advanced: 'orders three or more steps, explains reasoning for the order, and adds a step of their own like after we swim we need to dry off with a towel' },
    ],
  },
];

// ── Injection ────────────────────────────────────────────────────────────

let successCount = 0;

for (const theme of themes) {
  const filePath = path.join(BASE, theme.name, 'en.ts');
  let content = fs.readFileSync(filePath, 'utf8');

  // Detect line endings
  const nl = content.includes('\r\n') ? '\r\n' : '\n';

  // Build injection block
  const injection = buildInjection(theme, nl);

  // Pattern: end of faq array ], then close preschool }, then 'kindergarten':
  // Uses a regex that handles both \n and \r\n
  const pattern = /(      \],)\r?\n(    \},)\r?\n(    'kindergarten':)/;

  if (!pattern.test(content)) {
    console.error(`ERROR: Injection pattern not found in ${theme.name}/en.ts`);
    process.exit(1);
  }

  // Check if already injected
  if (content.includes("uniqueGradeAngle: '") && content.indexOf("uniqueGradeAngle: '") < content.indexOf("'kindergarten':")) {
    console.log(`SKIP: ${theme.name}/en.ts already has uniqueGradeAngle in preschool section`);
    continue;
  }

  content = content.replace(pattern, `$1${nl}${injection}${nl}$2${nl}$3`);

  fs.writeFileSync(filePath, content, 'utf8');
  successCount++;
  console.log(`OK: Injected 6 preschool fields into ${theme.name}/en.ts`);
}

console.log(`\nDone! ${successCount} of ${themes.length} themes enriched.`);
