{
  "permissions": {
    "allow": [
      "Bash(curl -s http://localhost:3001/api/admin/images/update?type=images -w \"\\nStatus: %{http_code}\\n\")",
      "Bash(curl -s http://localhost:3001/api/admin/borders/update?type=borders -w \"\\nStatus: %{http_code}\\n\")",
      "Bash(curl -s http://localhost:3001/api/admin/backgrounds/update?type=backgrounds -w \"\\nStatus: %{http_code}\\n\")",
      "Bash(curl -s http://localhost:3001/api/admin/train-templates/update?type=train -w \"\\nStatus: %{http_code}\\n\")",
      "Bash(curl -s http://localhost:3001/api/admin/worksheet-templates/update?type=worksheet -w \"\\nStatus: %{http_code}\\n\")",
      "Bash(curl -s -o /dev/null -w \"%{http_code}\" http://localhost:3001/api/admin/images/update?type=images)",
      "Bash(curl:*)",
      "Bash(npm install:*)",
      "Bash(cmd /c:*)",
      "Bash(for letter in E I K M W V)",
      "Bash(do echo \"=== $letter ===\")",
      "Bash(npm run dev:*)",
      "Bash(npx prisma generate:*)",
      "Bash(dir:*)",
      "Bash(npx prisma db push:*)",
      "Bash(docker-compose up:*)",
      "Read(//c/Users/rkgen/Pictures/Screenshots/**)",
      "Bash(npx prisma studio:*)",
      "Bash(node:*)",
      "Bash(del clear-homepage.js)",
      "Bash(for port in 3000 3001 3002 3003)",
      "Bash(do netstat -ano)",
      "Bash(awk:*)",
      "Bash(xargs:*)",
      "Bash(done)",
      "Bash(del temp-samples.json)",
      "Bash(npx prisma migrate:*)",
      "Bash(netstat:*)",
      "Bash(findstr:*)",
      "Bash(git add:*)",
      "Bash(git commit -m \"$(cat <<''EOF''\nImplement fully dynamic homepage with professional SSR pattern\n\nMajor Changes:\n- Homepage content (hero, features, pricing, samples) now fully editable via content manager\n- Eliminated SSR deadlock by using direct library import instead of HTTP fetch\n- WorksheetSamples component receives data via props from parent\n- Added homepage_content database table with Prisma migration\n- Enhanced API to return categories, difficulties, and modal labels\n- Complete multilingual support for all 11 languages\n\nTechnical Improvements:\n- Server component fetches data directly from homepageContentManager library\n- No duplicate HTTP requests or network roundtrips during SSR\n- Clean data flow: parent fetches, children receive via props\n- Production-ready architecture suitable for Hetzner deployment\n\nFiles Modified:\n- frontend/app/[locale]/page.tsx: Direct library import, passes props to children\n- frontend/components/WorksheetSamples.tsx: Accepts initialContent prop\n- frontend/app/api/homepage/content/route.ts: Returns full content structure\n- frontend/lib/homepage-content-manager.ts: Complete translations for all sections\n- frontend/prisma/schema.prisma: Added homepage_content table\n- frontend/public/homepage-content-manager-v3-fixed.html: Latest content manager UI\n\nðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(git push:*)",
      "Bash(timeout 30 npx prisma generate)",
      "Bash(taskkill:*)",
      "Bash(if [ -d \"C:\\Users\\rkgen\\lessoncraftstudio\\frontend\\lib\\validations\" ])",
      "Bash(then echo \"exists\")",
      "Bash(else echo \"does not exist\")",
      "Bash(fi)",
      "Bash(npx prisma db seed:*)",
      "Bash(timeout:*)",
      "Bash(npx ts-node:*)",
      "Bash(git checkout:*)",
      "Bash(del /F /Q \"C:\\Users\\rkgen\\lessoncraftstudio\\api\\node_modules\\.prisma\\client\\query_engine-windows.dll.node\")",
      "Bash(cat:*)",
      "Bash(git rm:*)",
      "Bash(git commit -m \"$(cat <<''EOF''\nAdd comprehensive admin user control system with JWT authentication\n\nMajor Features Implemented:\n- User Control Dashboard: Centralized management interface for users, subscriptions, and payments\n- Search & Filter: Full-text search across users with tier and status filtering\n- User Details: Complete user profiles with subscription, payment history, and active sessions\n- Quick Actions: Upgrade, suspend, refund, and grant lifetime access functionality\n- Session Management: Monitor active sessions for account sharing prevention\n- CSV Export: Export user data for reporting and analysis\n\nAdmin Content Management:\n- Blog Categories: CRUD operations for blog post categories\n- Blog Tags: Tag management with usage statistics\n- Worksheet Samples: Sample worksheet management and organization\n- Subscriber Management: MRR, LTV, and subscriber analytics\n\nAuthentication System Enhancements:\n- Migrated from NextAuth to pure JWT-based authentication\n- Device fingerprinting for enhanced security\n- Session management with device tracking\n- Multi-session support with active session monitoring\n- Secure password reset and email verification\n\nDatabase Schema Updates:\n- Enhanced User model with suspension and admin capabilities\n- ActivityLog tracking for user actions\n- Session model with device and location tracking\n- Payment model with refund support\n- Subscription model with cancellation tracking\n\nSecurity Improvements:\n- Server-side authentication middleware (withAdmin wrapper)\n- Client-side auth context with token management\n- API error handling and validation\n- Rate limiting and request validation\n- Secure token storage and refresh mechanisms\n\nTechnical Infrastructure:\n- AuthProvider and DeviceFingerprintProvider for global state\n- Server-side auth utilities for API route protection\n- Client-side auth hooks for protected pages\n- Comprehensive API error handling\n- TypeScript validation schemas\n\nFiles Created: 29 new files\nFiles Modified: 20 files\nFiles Deleted: 1 file (NextAuth route)\n\nðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(powershell:*)",
      "Bash(tasklist)",
      "Bash(find:*)",
      "Bash(test:*)",
      "Bash(git commit:*)",
      "Bash(if [ -d \"C:\\Users\\rkgen\\lessoncraftstudio\\frontend\\app\\api\\usage\" ])",
      "Bash(then rmdir \"C:\\Users\\rkgen\\lessoncraftstudio\\frontend\\app\\api\\usage\")",
      "Bash(else echo \"Directory already deleted\")",
      "Bash(for port in 3000 3001)",
      "Bash(npx geoip-lite-update:*)",
      "Bash(for port in 3000 3001 3002)",
      "Bash(where psql)",
      "Bash(for port in 3000 3001 5432)",
      "Bash(do echo \"=== Port $port ===\")",
      "Bash(if exist .next rmdir /s /q .next)",
      "Bash(for port in 3000 3001 3002 3003 3004)",
      "Bash(move:*)",
      "Bash(for port in 3000 3001 3002 3003 3004 3005)",
      "Bash(echo \"UPDATE \"\"User\"\" SET \"\"stripeCustomerId\"\" = NULL WHERE email = ''''oliviaprincess@gmail.com'''';\")",
      "Bash(npx prisma db execute:*)",
      "Bash(del C:Usersrkgenlessoncraftstudiofrontendclear-stripe-customer.js)",
      "Bash(if exist frontend.next rmdir /s /q frontend.next)",
      "Bash(del C:Usersrkgenlessoncraftstudiofrontendcheck-user-sub.js)",
      "Bash(ssh:*)",
      "Bash(npx tsc:*)",
      "Bash(npm run build:*)",
      "Bash(for file in \"frontend/app/api/admin/worksheet-templates/upload/route.ts\" \"frontend/app/api/admin/train-templates/upload/route.ts\" \"frontend/app/api/admin/images/upload/route.ts\" \"frontend/app/api/admin/borders/upload/route.ts\")",
      "Bash(do sed -i '/^\\/\\/ Increase body size limit/,/^};$/d' \"$file\")",
      "Bash(del add-dynamic-export.js)",
      "Bash(del fix-dynamic-placement.js)",
      "Bash(sshpass -p 'JfmiPF_QW4_Nhm' ssh -o StrictHostKeyChecking=no root@65.108.5.250 \"cd /opt/lessoncraftstudio/frontend && PGPASSWORD=LcS2025SecureDBPass psql -U lcs_user -d lessoncraftstudio_prod -c \"\"SELECT t.name as theme, COUNT(i.id) as image_count FROM image_themes t LEFT JOIN image_library_items i ON t.id = i.theme_id WHERE t.type = ''images'' GROUP BY t.name ORDER BY t.name;\"\"\")",
      "Bash(git restore:*)",
      "Bash(sshpass -p 'JfmiPF_QW4_Nhm' ssh -o StrictHostKeyChecking=no root@65.108.5.250 \"cd /opt/lessoncraftstudio/frontend && node fix-image-paths.js\")",
      "Bash(ping:*)",
      "Bash(sshpass:*)"
    ],
    "deny": [],
    "ask": []
  }
}
