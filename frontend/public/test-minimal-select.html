<!DOCTYPE html>
<html>
<head>
    <title>Minimal Select Test</title>
</head>
<body>
    <h1>Minimal Select Population Test</h1>

    <h2>Test 1: Static HTML Select</h2>
    <select id="static">
        <option value="none">None</option>
        <option value="spring">Spring</option>
        <option value="math">Math</option>
    </select>

    <h2>Test 2: Dynamic with innerHTML +=</h2>
    <select id="dynamic1">
        <option value="none">None</option>
    </select>

    <h2>Test 3: Dynamic with createElement</h2>
    <select id="dynamic2">
        <option value="none">None</option>
    </select>

    <h2>Test 4: Exact Addition App Method</h2>
    <select id="dynamic3">
        <option value="none">None</option>
    </select>

    <button onclick="runTests()">Run All Tests</button>

    <pre id="log"></pre>

    <script>
        function log(msg) {
            document.getElementById('log').innerText += msg + '\n';
        }

        function runTests() {
            log('Starting tests...\n');

            // Test 2: innerHTML +=
            const select1 = document.getElementById('dynamic1');
            select1.innerHTML = '<option value="none">None</option>';
            select1.innerHTML += '<option value="spring">Spring</option>';
            select1.innerHTML += '<option value="math">Math</option>';
            log('Test 2: innerHTML += method');
            log('  Options: ' + select1.options.length);
            log('  HTML: ' + select1.innerHTML);

            // Test 3: createElement
            const select2 = document.getElementById('dynamic2');
            select2.innerHTML = '';
            const opt1 = document.createElement('option');
            opt1.value = 'none';
            opt1.textContent = 'None';
            select2.appendChild(opt1);
            const opt2 = document.createElement('option');
            opt2.value = 'spring';
            opt2.textContent = 'Spring';
            select2.appendChild(opt2);
            const opt3 = document.createElement('option');
            opt3.value = 'math';
            opt3.textContent = 'Math';
            select2.appendChild(opt3);
            log('\nTest 3: createElement method');
            log('  Options: ' + select2.options.length);

            // Test 4: Exact Addition app method
            const select3 = document.getElementById('dynamic3');
            fetch('/api/borders/themes')
                .then(res => res.json())
                .then(themes => {
                    select3.innerHTML = '<option value="none">None</option>';
                    themes.forEach(theme => {
                        const themeValue = theme.value;
                        const displayName = theme.displayName.charAt(0).toUpperCase() + theme.displayName.slice(1);
                        select3.innerHTML += `<option value="${themeValue}">${displayName}</option>`;
                    });
                    log('\nTest 4: Exact Addition method with API');
                    log('  Options: ' + select3.options.length);
                    log('  Values: ' + Array.from(select3.options).map(o => o.value).join(', '));
                })
                .catch(err => log('Test 4 error: ' + err));
        }

        // Auto-run on load
        window.addEventListener('DOMContentLoaded', runTests);
    </script>
</body>
</html>