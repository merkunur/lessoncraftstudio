/**
 * SEO Part 64: Enrich preschool grade for pirates, robots, school, shapes, sports
 * Adds 6 grade-level enrichment fields to gradeContent.preschool for each theme.
 * Fields: uniqueGradeAngle, developmentalMilestones, differentiationNotes,
 *         parentTakeaway, classroomIntegration, assessmentRubric
 */
const fs = require('fs');
const path = require('path');

const BASE = path.join(__dirname, '..', 'frontend', 'content', 'themes');

// Escape single quotes for TS single-quoted strings
function esc(s) {
  return s.replace(/'/g, "\\'");
}

function buildInjection(data, nl) {
  const lines = [];
  lines.push(`      uniqueGradeAngle: '${esc(data.uniqueGradeAngle)}',`);
  lines.push(`      developmentalMilestones: [`);
  for (const m of data.developmentalMilestones) {
    lines.push(`        { milestone: '${esc(m.milestone)}', howWeAddress: '${esc(m.howWeAddress)}' },`);
  }
  lines.push(`      ],`);
  lines.push(`      differentiationNotes: '${esc(data.differentiationNotes)}',`);
  lines.push(`      parentTakeaway: '${esc(data.parentTakeaway)}',`);
  lines.push(`      classroomIntegration: '${esc(data.classroomIntegration)}',`);
  lines.push(`      assessmentRubric: [`);
  for (const r of data.assessmentRubric) {
    lines.push(`        { skill: '${esc(r.skill)}', emerging: '${esc(r.emerging)}', proficient: '${esc(r.proficient)}', advanced: '${esc(r.advanced)}' },`);
  }
  lines.push(`      ],`);
  return lines.join(nl);
}

// ── Theme content ────────────────────────────────────────────────────────

const themes = [
  // ── Pirates ──────────────────────────────────────────────────────────
  {
    name: 'pirates',
    uniqueGradeAngle: 'Preschool is the most imaginatively adventurous stage for pirate worksheets because three- and four-year-olds are in the golden age of pretend play where treasure maps are real navigation tools, cardboard boxes become ships, and every stick is a sword \u2014 pirate worksheets channel this boundless imaginative energy into structured learning about counting treasure, following map directions, sequencing adventure stories, and building vocabulary through the most thrilling narrative context available to young learners. Pirate worksheets are uniquely powerful at the preschool level because they combine spatial reasoning (reading maps, following directional clues), counting and sorting (gold coins, gems, treasure chest contents), vocabulary expansion (ship, anchor, compass, island, treasure, captain, crew, sail), and narrative sequencing (the adventure story from setting sail to finding treasure) into one irresistibly exciting context that makes every worksheet feel like a game rather than an assignment. The social dimension of pirate play aligns perfectly with preschool developmental needs because pirate adventures require crews, shared missions, and collaborative problem-solving \u2014 teaching cooperation, turn-taking, and shared storytelling through the most naturally motivating group-play scenario available.',
    developmentalMilestones: [
      { milestone: 'Treasure counting and sorting as foundational math (preschoolers are developing one-to-one correspondence and classification through objects they find exciting)', howWeAddress: 'pirate worksheets where children count gold coins, sort gems by color, and compare treasure quantities build counting and classification skills through the most intrinsically motivating objects imaginable because every child cares deeply about how much treasure they have' },
      { milestone: 'Map reading and spatial vocabulary development (preschoolers are developing directional language and spatial reasoning)', howWeAddress: 'pirate treasure map worksheets where children follow directional clues like go past the palm tree, turn left at the rock, and stop at the X build spatial vocabulary and directional reasoning that directly support later map skills, geometry concepts, and reading comprehension of spatial descriptions' },
      { milestone: 'Adventure narrative sequencing and storytelling (preschoolers are developing the ability to understand and retell events in order)', howWeAddress: 'pirate story worksheets where children sequence events from boarding the ship to sailing across the ocean to discovering the island to digging up the treasure build the narrative comprehension and sequential reasoning that are the strongest predictors of later reading success' },
    ],
    differentiationNotes: 'For struggling preschoolers, focus on three core pirate vocabulary items (ship, treasure, map) and use physical props like a cardboard telescope, a simple hand-drawn map, and plastic coins to make every worksheet tangible; reduce counting to sets of three or fewer gold coins and simplify map directions to one step at a time (go to the tree) before introducing multi-step routes. For advanced preschoolers, introduce multi-step treasure maps with three or more directional clues, challenge children to create their own treasure maps with landmarks and X-marks-the-spot, extend counting to ten or more treasure items sorted by multiple attributes (gold coins versus silver coins versus gems), and encourage adventure storytelling where children invent and narrate their own pirate quests using sequential vocabulary like first, then, next, and finally.',
    parentTakeaway: 'Pirate worksheets give preschool parents the most adventure-fueled learning tool because your child already wants to be a pirate \u2014 every cardboard box is a potential ship and every backyard is an uncharted island, and pirate worksheets transform this irresistible imaginative drive into counting, spatial reasoning, and storytelling practice that feels like pure play. The key strategy is to create a treasure hunt at home: hide a few small items, draw a simple map, and let your child follow the clues. This single activity practices map reading, directional vocabulary (go left, walk past the chair, look under the table), counting (how many treasures did you find), and narrative sequencing (tell me the story of your adventure). When your child can count treasure items to ten, follow a three-step directional map, and retell their pirate adventure in order from start to finish, they have mastered counting, spatial reasoning, and narrative sequencing through the most exciting context possible. The beauty of pirate play at this age is that your child genuinely believes the adventure is real, and this emotional investment makes every learning moment unforgettable.',
    classroomIntegration: 'Pirate worksheets anchor the most dramatically immersive thematic unit in preschool because the entire classroom can transform into a pirate adventure with minimal props \u2014 a cardboard ship in the dramatic play area, a treasure chest filled with countable items, and hand-drawn maps posted on the walls create an environment where every learning station connects to the pirate narrative. Use pirate coloring pages as morning arrival activities, incorporate counting worksheets into a small-group math rotation where children count and sort real coins, gems, and shells from a treasure chest, and connect map worksheets to a classroom treasure hunt where children follow directional clues to find hidden prizes. A pirate vocabulary wall with illustrated words like ship, anchor, compass, island, treasure, map, captain, and crew builds theme-specific language that children use throughout dramatic play. A weekly adventure story circle where the class collaboratively narrates a pirate quest with each child adding one event builds oral language, sequencing, and cooperative storytelling skills. The pirate theme naturally integrates across domains \u2014 counting treasure for math, map reading for spatial skills, adventure stories for literacy, and ship-building with blocks for engineering.',
    assessmentRubric: [
      { skill: 'Pirate treasure counting and sorting', emerging: 'counts to 3 treasure items like gold coins with one-to-one correspondence using physical pointing', proficient: 'counts to 7 treasure items reliably, sorts items into two categories like coins and gems, and compares groups using more and fewer', advanced: 'counts to 10+, sorts by multiple attributes like color and type simultaneously, and uses treasure contexts in simple addition like five gold coins and three silver coins is eight coins altogether' },
      { skill: 'Pirate map and spatial vocabulary', emerging: 'identifies one location on a simple picture map with teacher prompting like where is the tree', proficient: 'follows a two-step directional instruction on a treasure map and uses spatial words like next to, behind, and under when describing locations', advanced: 'follows three or more directional steps on a map, creates a simple map with landmarks and an X, and gives spatial directions to a classmate using complete sentences' },
      { skill: 'Pirate adventure sequencing', emerging: 'identifies one event from a pirate story illustration with teacher prompting', proficient: 'orders three pirate adventure events in correct sequence and uses first, then, and last to describe the story', advanced: 'sequences four or more events, retells a complete pirate adventure independently with character names and locations, and creates original adventure stories with a beginning, middle, and end' },
    ],
  },

  // ── Robots ───────────────────────────────────────────────────────────
  {
    name: 'robots',
    uniqueGradeAngle: 'Preschool is the most mechanically fascinated stage for robot worksheets because three- and four-year-olds are captivated by things that move, light up, and make sounds \u2014 robots represent the ultimate fascinating object because they combine all of these elements into a character that children can imagine talking to, building, and commanding. Robot worksheets are uniquely powerful at the preschool level because they combine shape recognition (robots are built from circles, squares, rectangles, and triangles), counting (how many buttons, how many gears), pattern making (building robots from repeating shape sequences), and early engineering thinking (what parts does a robot need to work) into one visually striking, imagination-fueling context. The construction dimension of robots provides the most intuitive introduction to engineering concepts for preschoolers because building a robot from shapes on a worksheet is a design challenge that teaches spatial reasoning, part-whole relationships, and creative problem-solving through an activity that feels like play rather than instruction.',
    developmentalMilestones: [
      { milestone: 'Shape identification through robot construction (preschoolers are learning to recognize and name basic geometric shapes)', howWeAddress: 'robot worksheets where children identify the circles, squares, rectangles, and triangles that form a robot\u2019s body build shape recognition through the most engaging visual context available because every robot part is a shape and building a robot means combining shapes purposefully' },
      { milestone: 'Counting robot parts and pattern recognition (preschoolers are developing one-to-one correspondence and the ability to identify repeating sequences)', howWeAddress: 'robot worksheets where children count buttons, gears, eyes, and arms and identify patterns in robot designs like circle-square-circle-square build counting fluency and pattern thinking through objects that fascinate children intrinsically' },
      { milestone: 'Early engineering and design thinking (preschoolers are developing the ability to plan, build, and evaluate constructions)', howWeAddress: 'robot building worksheets where children select shapes to assemble a robot, decide where to place eyes, arms, and buttons, and explain their design choices introduce foundational engineering concepts like planning, iteration, and purpose-driven construction at the most developmentally appropriate level' },
    ],
    differentiationNotes: 'For struggling preschoolers, focus on three basic shapes (circle, square, rectangle) and use physical shape manipulatives alongside worksheets so children can build a robot with real blocks before drawing or coloring one; reduce counting to robot parts in sets of three or fewer and simplify pattern work to two-element shape patterns. For advanced preschoolers, introduce five or more shapes including triangles and ovals, challenge children to design their own robot by selecting and arranging shapes on a blank template, extend counting to ten or more robot parts across multiple robots, and encourage descriptive language where children explain what their robot can do and why they chose specific shapes for specific body parts.',
    parentTakeaway: 'Robot worksheets give preschool parents the most engineering-minded learning tool because every robot your child builds from shapes on a worksheet is an exercise in spatial reasoning, design thinking, and creative problem-solving that lays the foundation for all later STEM learning. The key strategy is to build robots together using household materials: empty boxes become robot bodies, bottle caps become buttons, paper towel tubes become arms \u2014 and suddenly your child is practicing the same shape identification, counting, and spatial arrangement skills from worksheets in three dimensions. Ask your child to describe their robot: how many eyes does it have, what shape is its body, what can it do \u2014 this narration builds vocabulary, counting practice, and expressive language simultaneously. When your child can name the shapes in a robot illustration, count its parts accurately, and explain their own robot design choices, they have mastered shape recognition, counting, and early engineering vocabulary through the most imagination-capturing context available.',
    classroomIntegration: 'Robot worksheets anchor the most constructively creative thematic unit in preschool because every worksheet concept translates directly into a hands-on building activity \u2014 shape identification becomes robot construction with blocks, counting becomes an inventory of robot parts, and pattern recognition becomes a design challenge. Create a robot building station with recyclable materials (boxes, tubes, caps, foil) where children construct three-dimensional robots inspired by their worksheet designs. Use robot coloring pages as morning arrival activities, incorporate shape identification worksheets into a small-group math rotation where children sort and count shape manipulatives while referencing robot illustrations, and connect pattern worksheets to a robot pattern-building activity using shape stamps or stickers. A robot gallery where children display their creations with a written name tag and description encourages pride and descriptive vocabulary. A weekly robot challenge where children are given specific shapes to combine into a robot with particular features (a robot with three circles and two rectangles) builds constraint-based creative thinking.',
    assessmentRubric: [
      { skill: 'Robot shape identification', emerging: 'names one or two shapes like circle and square when pointed to on a robot illustration with teacher prompting', proficient: 'independently names four basic shapes in robot illustrations, identifies which shapes form which body parts, and finds the same shapes in the classroom environment', advanced: 'names five or more shapes including triangles and ovals, describes shape attributes like the rectangle has four sides and is longer than a square, and creates a robot using specified shapes on a blank template' },
      { skill: 'Counting robot parts', emerging: 'counts to 3 robot parts with one-to-one correspondence using physical pointing', proficient: 'counts to 7 robot parts reliably, counts parts across multiple categories like eyes, buttons, and arms, and compares counts using more and fewer', advanced: 'counts to 10+ parts, creates simple addition problems using robot contexts like two arms plus two legs is four parts, and counts parts across multiple robots to find totals' },
      { skill: 'Robot design and engineering vocabulary', emerging: 'points to one robot feature and names it with teacher prompting like those are the eyes', proficient: 'names four or more robot features, explains what each part does, and describes their own robot design using simple sentences', advanced: 'designs a robot with intentional feature choices, explains design reasoning like I gave it big eyes so it can see far, and uses engineering vocabulary like build, design, parts, and function in context' },
    ],
  },

  // ── School ───────────────────────────────────────────────────────────
  {
    name: 'school',
    uniqueGradeAngle: 'Preschool is the most school-discovery stage for school-themed worksheets because three- and four-year-olds are often experiencing a structured learning environment for the very first time \u2014 everything about school is new, exciting, and worthy of exploration, from the classroom layout and daily schedule to the social dynamics of having classmates and a teacher, making school worksheets the most immediately relevant and personally meaningful theme available because children are literally living the content every day. School worksheets are uniquely powerful at the preschool level because they teach through meta-learning \u2014 worksheets about school supplies build vocabulary for the objects children use daily, worksheets about classroom routines reinforce the schedule children follow, and worksheets about school rules introduce the social expectations that make group learning possible, all through the most experientially authentic context available. The social-emotional dimension is especially critical at the preschool level because many children are navigating separation from parents, learning to share and take turns, and building their first friendships \u2014 school worksheets that address these experiences normalize the feelings and build the vocabulary children need to express their emotions.',
    developmentalMilestones: [
      { milestone: 'School supply identification and vocabulary (preschoolers are learning to name and use the tools of the classroom for the first time)', howWeAddress: 'school worksheets where children identify crayons, scissors, glue, books, backpacks, pencils, and paper build the functional vocabulary that allows children to communicate their needs in the classroom, request materials independently, and follow instructions that reference specific supplies' },
      { milestone: 'Classroom routine understanding and schedule sequencing (preschoolers are developing the ability to anticipate and follow a structured daily schedule)', howWeAddress: 'school routine worksheets where children sequence activities like circle time, snack time, outdoor play, and story time build temporal reasoning, reduce anxiety about transitions, and help children internalize the predictable structure that supports all classroom learning' },
      { milestone: 'Social skills and classroom behavior awareness (preschoolers are learning the social expectations of group learning environments)', howWeAddress: 'school worksheets that illustrate sharing, taking turns, raising hands, listening, and helping friends introduce the behavioral vocabulary and social awareness that make cooperative learning possible, teaching children that school is a community with shared rules and mutual respect' },
    ],
    differentiationNotes: 'For struggling preschoolers, focus on five immediately recognizable school items (crayon, book, backpack, scissors, glue) and use the actual classroom supplies as references while completing worksheets \u2014 hold up the real crayon when learning the word crayon; simplify routine sequencing to two events (circle time then snack time) and use photo cards of actual classroom activities rather than illustrations. For advanced preschoolers, introduce extended classroom vocabulary including less common items like stapler, tape, ruler, and globe, challenge children to sequence a full school day with five or more activities and explain why the order matters, extend social skill worksheets into role-playing scenarios where children practice resolving conflicts and expressing feelings using complete sentences, and encourage school-themed writing where children draw and label their favorite classroom activity.',
    parentTakeaway: 'School worksheets give preschool parents the most anxiety-reducing and transition-supporting learning tool because starting school is one of the biggest changes in a young child\u2019s life, and worksheets that normalize school routines, name school supplies, and practice social skills give children the vocabulary and confidence to navigate this new world successfully. The key strategy is to connect worksheets to your child\u2019s actual school day: ask what happened at circle time today, can you show me which supply this is, and who did you play with \u2014 these questions reinforce the vocabulary and sequencing skills from worksheets while showing your child that you care about their school life. When your child can name their school supplies, describe their daily schedule in order, and articulate classroom rules like we share and we take turns, they have mastered the foundational knowledge that makes them confident, independent school participants rather than anxious newcomers. For children who are nervous about school, school worksheets completed at home with a parent provide a safe, familiar space to process and practice school concepts before encountering them in the classroom.',
    classroomIntegration: 'School worksheets anchor the most meta-cognitively authentic thematic unit in preschool because the classroom itself is both the subject and the setting \u2014 every supply named on a worksheet is sitting on a shelf, every routine illustrated is happening daily, and every social skill practiced is immediately applicable. Use school supply identification worksheets during the first weeks as an orientation tool, incorporate routine sequencing worksheets into the daily schedule display where children match illustrated activities to the visual timeline, and connect social skill worksheets to real classroom situations as they arise \u2014 when a sharing conflict occurs, reference the worksheet about taking turns. A classroom supply scavenger hunt where children find and name items from their worksheets builds vocabulary through physical interaction. A daily schedule review where children point to each activity on the visual timeline and say what comes next reinforces the sequencing skills from routine worksheets. A classroom jobs chart where children rotate through responsibilities like line leader, supply helper, and calendar helper connects the school theme to real participation and ownership.',
    assessmentRubric: [
      { skill: 'School supply identification and vocabulary', emerging: 'names two or three common school supplies like crayon and book from real objects with teacher prompting', proficient: 'independently names eight or more school supplies, describes what each is used for, and retrieves the correct supply when asked by name', advanced: 'names 12+ school supplies, categorizes them by function like writing tools versus cutting tools versus art supplies, and uses supply vocabulary in complete sentences like I need the glue stick to paste my picture on the paper' },
      { skill: 'School routine sequencing', emerging: 'identifies one daily activity from a picture card with teacher prompting like that is snack time', proficient: 'orders four daily activities in correct sequence and uses temporal words like first, then, next, and after to describe the schedule', advanced: 'sequences a full school day with five or more activities, explains why certain activities come in a specific order, and anticipates schedule changes using reasoning like we have library today because it is Tuesday' },
      { skill: 'Classroom social skills', emerging: 'demonstrates one school behavior like sitting at circle time with physical teacher guidance', proficient: 'independently demonstrates three or more classroom behaviors like sharing, taking turns, and raising a hand, and names the behavior when prompted', advanced: 'models positive classroom behaviors unprompted, uses social vocabulary to resolve minor conflicts like can I have a turn when you are done, and explains classroom rules using reasoning like we walk inside so nobody gets hurt' },
    ],
  },

  // ── Shapes ───────────────────────────────────────────────────────────
  {
    name: 'shapes',
    uniqueGradeAngle: 'Preschool is the most geometrically awakening stage for shape worksheets because three- and four-year-olds are in the critical period of visual-spatial development where they are transitioning from seeing the world as an undifferentiated whole to recognizing that everything around them is composed of identifiable geometric forms \u2014 the rectangular door, the circular clock, the triangular roof, the square window \u2014 and shape worksheets accelerate this perceptual breakthrough by giving children the vocabulary and visual discrimination skills to name what they see. Shape worksheets are uniquely powerful at the preschool level because they build the geometric foundation that all later mathematics depends upon \u2014 spatial reasoning, pattern recognition, measurement concepts, and eventually geometry all begin with the ability to identify, name, compare, and combine basic shapes. The environmental dimension makes shapes the most universally reinforceable theme in preschool because shapes are literally everywhere \u2014 in the classroom, at home, outdoors, in books, and in food \u2014 meaning every moment of every day offers shape identification practice without any special materials or preparation.',
    developmentalMilestones: [
      { milestone: 'Basic shape identification and naming (preschoolers are developing the ability to visually discriminate and name geometric forms)', howWeAddress: 'shape worksheets where children identify circles, squares, triangles, and rectangles build the foundational geometric vocabulary that supports all later spatial reasoning, and the visual discrimination required to distinguish a square from a rectangle develops the perceptual precision that supports letter recognition and reading readiness' },
      { milestone: 'Shape attribute awareness and comparison (preschoolers are developing the ability to describe objects using measurable attributes)', howWeAddress: 'shape worksheets where children compare shapes by number of sides, number of corners, size, and roundness versus straightness build the attribute-based reasoning that underlies all measurement and classification, teaching children that shapes have specific, describable properties rather than being arbitrary labels' },
      { milestone: 'Shape composition and spatial reasoning (preschoolers are developing the ability to combine shapes to create new forms and pictures)', howWeAddress: 'shape composition worksheets where children combine triangles to make a house, circles and rectangles to make a train, or multiple shapes to create a picture build the spatial reasoning and part-whole thinking that directly support geometry, engineering, and creative problem-solving' },
    ],
    differentiationNotes: 'For struggling preschoolers, focus on three shapes (circle, square, triangle) before introducing rectangle and oval; use physical shape manipulatives (wooden blocks, foam shapes, cookie cutters) alongside every worksheet so children can feel the edges, count the corners, and trace the sides with their fingers before identifying shapes on paper; reduce sorting to two categories at a time (circles versus squares). For advanced preschoolers, introduce five or more shapes including rectangles, ovals, diamonds, and hexagons, challenge children to find shapes in the classroom environment and describe their attributes using sides and corners vocabulary, extend shape activities to composition tasks where children build pictures from multiple shapes, and encourage shape pattern creation using three-element sequences like circle-square-triangle-circle-square-triangle.',
    parentTakeaway: 'Shape worksheets give preschool parents the most environmentally omnipresent learning tool because shapes are literally everywhere and your child encounters them hundreds of times every day without realizing it \u2014 and the moment you start pointing them out, you transform every walk, every meal, and every room in your house into a geometry lesson that costs nothing and takes no preparation. The key strategy is a shape hunt: walk through your home or neighborhood and challenge your child to find circles (clocks, wheels, plates), squares (windows, tiles, crackers), triangles (roof peaks, pizza slices, hangers), and rectangles (doors, books, phones). When your child starts spontaneously naming shapes they see \u2014 look, that sign is a triangle \u2014 they have internalized geometric vocabulary so deeply that it has become an automatic perceptual lens. This shape awareness is not just an isolated skill \u2014 it is the foundation of all spatial reasoning, which predicts success in mathematics, science, engineering, and even reading (because letter recognition requires distinguishing the geometric features that make a b different from a d).',
    classroomIntegration: 'Shape worksheets anchor the most environmentally integrated thematic unit in preschool because the classroom itself is a shape museum \u2014 every surface, object, and architectural feature is a geometric form waiting to be named. Create a shape-rich environment by labeling classroom shapes with tags (the rectangular door, the circular clock face, the square window) and conducting a classroom shape walk where children find and name shapes throughout the room. Use shape coloring pages as morning arrival activities, incorporate identification worksheets into a daily small-group math rotation with shape manipulatives that children sort, trace, and combine, and connect composition worksheets to a shape art station where children create pictures by gluing pre-cut shapes onto paper. A shape of the week focus allows deep exploration of one shape\u2019s attributes before moving to the next, with children finding that shape in books, in the classroom, and at home. A shape pattern station where children extend and create patterns using shape stamps or stickers builds algebraic thinking through geometric contexts. Shape sorting trays where children categorize shapes by number of sides, presence of corners, or size reinforce attribute-based reasoning.',
    assessmentRubric: [
      { skill: 'Shape identification and naming', emerging: 'names one or two shapes like circle and square from illustrations with teacher prompting', proficient: 'independently names four basic shapes \u2014 circle, square, triangle, rectangle \u2014 in illustrations, manipulatives, and the classroom environment', advanced: 'names five or more shapes including oval, diamond, or hexagon, identifies shapes in complex pictures where shapes overlap or are rotated, and describes shapes using attribute vocabulary like a triangle has three sides and three corners' },
      { skill: 'Shape attribute comparison', emerging: 'identifies one attribute like round versus pointy with teacher modeling', proficient: 'compares two shapes using two or more attributes like the square has four sides and four corners but the triangle has three sides and three corners', advanced: 'describes multiple shapes using sides, corners, and size vocabulary, identifies what makes two shapes the same or different, and explains why a rectangle is not a square using attribute reasoning' },
      { skill: 'Shape composition and spatial reasoning', emerging: 'places one shape on a template to complete a simple picture with teacher guidance', proficient: 'combines three or more shapes to create a recognizable picture like a house from a triangle and square, and names the shapes used', advanced: 'creates original pictures from multiple shapes, describes their composition using spatial vocabulary like I put the triangle on top of the square to make a roof, and extends shape patterns with three or more elements' },
    ],
  },

  // ── Sports ───────────────────────────────────────────────────────────
  {
    name: 'sports',
    uniqueGradeAngle: 'Preschool is the most physically exuberant stage for sports worksheets because three- and four-year-olds are in the peak period of gross motor development \u2014 they are learning to run without falling, kick without missing, throw with direction, and catch with two hands \u2014 and sports worksheets provide the vocabulary, rules awareness, and conceptual framework that transform chaotic playground energy into purposeful physical engagement with named activities, equipment, and goals. Sports worksheets are uniquely powerful at the preschool level because they combine counting (how many balls, how many goals, how many players), vocabulary expansion (ball, goal, net, bat, racket, helmet, field, court), classification (team sports versus individual sports, ball sports versus non-ball sports), and health awareness (exercise makes our bodies and minds strong) into one physically energizing context that connects directly to activities children do every single day. The social dimension of sports aligns perfectly with preschool developmental needs because sports introduce rules, turn-taking, teamwork, and sportsmanship \u2014 the exact social skills that preschoolers are actively developing through their daily interactions.',
    developmentalMilestones: [
      { milestone: 'Sports vocabulary and equipment identification (preschoolers are expanding their vocabulary to include activity-specific objects and locations)', howWeAddress: 'sports worksheets where children identify and name balls, bats, goals, nets, helmets, and fields build the activity vocabulary that allows children to communicate during physical play, request equipment by name, and understand instructions during organized movement activities' },
      { milestone: 'Counting and sorting with sports equipment (preschoolers are developing one-to-one correspondence and classification skills through objects they use during active play)', howWeAddress: 'sports counting worksheets where children count balls, players, and equipment pieces, and sorting worksheets where children classify items by sport type or equipment category build math foundations through the most physically engaging, personally relevant contexts' },
      { milestone: 'Health awareness and body-movement connection (preschoolers are developing an understanding that physical activity has positive effects on their bodies and feelings)', howWeAddress: 'sports worksheets that connect specific activities to body benefits \u2014 running makes your legs strong, swimming makes your whole body move, stretching helps you stay flexible \u2014 build the earliest health literacy vocabulary and the conceptual understanding that exercise is purposefully beneficial rather than merely fun' },
    ],
    differentiationNotes: 'For struggling preschoolers, focus on four universally recognizable sports (soccer, basketball, running, swimming) and three common equipment items (ball, goal, net), and pair worksheets with real or toy equipment so children can hold a ball while learning its name; reduce counting to sets of three or fewer and simplify sorting to two categories (ball sports versus non-ball sports). For advanced preschoolers, introduce six or more sports including individual activities like gymnastics, cycling, and skating alongside team sports, challenge children to explain the rules of a familiar sport using sequential vocabulary (first you kick the ball, then you try to get it in the goal), extend counting to ten or more equipment items in a sports scene, and encourage comparative discussions where children describe differences between sports (basketball uses your hands but soccer uses your feet).',
    parentTakeaway: 'Sports worksheets give preschool parents the most physically active learning tool because every sport your child tries \u2014 kicking a ball in the yard, splashing at the pool, running at the park, or riding a tricycle \u2014 is a vocabulary, counting, and health-awareness lesson that burns energy and builds skills simultaneously. The key strategy is to name what your child is already doing: when they kick a ball, say you are playing soccer \u2014 you kicked the ball toward the goal; when they run, say you are sprinting \u2014 that makes your leg muscles stronger. This narration transforms everyday physical play into explicit learning that connects to worksheet vocabulary. Count together during sports activities: how many times can you bounce the ball, how many laps around the yard, how many jumps in a row. When your child can name five sports, identify the equipment for each, count their own physical achievements, and explain that exercise makes their body strong, they have mastered sports vocabulary, counting, and health awareness through the most naturally energetic context possible.',
    classroomIntegration: 'Sports worksheets anchor the most physically active thematic unit in preschool because every worksheet concept directly connects to the movement activities that are already an essential part of the daily schedule. Connect sports worksheets to outdoor play by introducing a new sport vocabulary word before going outside and practicing it during recess \u2014 this week we are learning about soccer, and at outdoor time we will practice kicking the ball toward the goal. Use sports coloring pages as morning arrival activities, incorporate counting worksheets into a small-group math rotation where children count real balls, cones, and equipment from the gym closet, and connect classification worksheets to an equipment sorting activity where children organize sports items by type. A sports of the week focus where children learn vocabulary, try the activity during outdoor time, and complete related worksheets in the classroom builds deep thematic understanding through multi-modal engagement. A classroom movement break where children do a sports-inspired exercise (jumping jacks, running in place, stretching) integrates physical activity into academic time while reinforcing vocabulary. A sports day celebration where children rotate through modified sport stations provides a culminating assessment of vocabulary, rules understanding, and physical participation.',
    assessmentRubric: [
      { skill: 'Sports vocabulary and equipment identification', emerging: 'names one or two sports like soccer and swimming from illustrations with teacher prompting', proficient: 'independently names five or more sports, identifies their primary equipment, and describes what each sport involves using simple sentences', advanced: 'names eight or more sports, categorizes them as team versus individual and ball versus non-ball, and describes sports using multiple details like in basketball you bounce the ball and throw it into a high net called a hoop' },
      { skill: 'Counting with sports contexts', emerging: 'counts to 3 sports items like balls with one-to-one correspondence using physical pointing', proficient: 'counts to 7 sports-related items reliably, sorts equipment into two categories, and compares groups using more and fewer', advanced: 'counts to 10+, creates simple addition problems using sports contexts like three soccer balls plus two basketballs is five balls, and counts in real physical activity contexts like how many jumps or kicks' },
      { skill: 'Health awareness and body-movement vocabulary', emerging: 'identifies one physical activity as exercise with teacher prompting like running is exercise', proficient: 'names three or more exercises, identifies which body parts each activity strengthens, and states that exercise is good for the body', advanced: 'explains multiple benefits of exercise using complete sentences like swimming makes your arms and legs strong and is good for your heart, connects specific sports to specific body benefits, and describes how exercise makes them feel using emotional vocabulary like happy, energetic, and strong' },
    ],
  },
];

// ── Injection ────────────────────────────────────────────────────────────

let successCount = 0;

for (const theme of themes) {
  const filePath = path.join(BASE, theme.name, 'en.ts');
  let content = fs.readFileSync(filePath, 'utf8');

  // Detect line endings
  const nl = content.includes('\r\n') ? '\r\n' : '\n';

  // Build injection block
  const injection = buildInjection(theme, nl);

  // Pattern: end of faq array ], then close preschool }, then 'kindergarten':
  // Uses a regex that handles both \n and \r\n
  const pattern = /(      \],)\r?\n(    \},)\r?\n(    'kindergarten':)/;

  if (!pattern.test(content)) {
    console.error(`ERROR: Injection pattern not found in ${theme.name}/en.ts`);
    process.exit(1);
  }

  // Check if already injected
  if (content.includes("uniqueGradeAngle: '") && content.indexOf("uniqueGradeAngle: '") < content.indexOf("'kindergarten':")) {
    console.log(`SKIP: ${theme.name}/en.ts already has uniqueGradeAngle in preschool section`);
    continue;
  }

  content = content.replace(pattern, `$1${nl}${injection}${nl}$2${nl}$3`);

  fs.writeFileSync(filePath, content, 'utf8');
  successCount++;
  console.log(`OK: Injected 6 preschool fields into ${theme.name}/en.ts`);
}

console.log(`\nDone! ${successCount} of ${themes.length} themes enriched.`);
