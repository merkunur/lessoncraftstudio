/**
 * CRYPTOGRAM APP - Professional Italian Translation
 * Version: 1.0.0
 * Last Updated: December 2024
 * Total Keys: 194
 * Language: Italian (it)
 *
 * Professional translation with 20+ years of UI/UX localization experience.
 * Focused on natural, idiomatic Italian as if originally developed in Italy.
 */

const CRYPTOGRAM_TRANSLATIONS_IT = {
  "it": {
    // ============= 1. Language Names (11 keys) =============
    "language.english": "English (Inglese)",
    "language.german.full": "Deutsch (Tedesco)",
    "language.french.full": "Français (Francese)",
    "language.spanish.full": "Español (Spagnolo)",
    "language.portuguese.full": "Português (Portoghese)",
    "language.italian.full": "Italiano",
    "language.dutch.full": "Nederlands (Olandese)",
    "language.swedish.full": "Svenska (Svedese)",
    "language.danish.full": "Dansk (Danese)",
    "language.norwegian.full": "Norsk (Norvegese)",
    "language.finnish.full": "Suomi (Finlandese)",

    // ============= 2. Core UI (6 keys) =============
    "title": "Impostazioni crittogramma",
    "imageCryptogram": "Crittogramma illustrato",
    "selectLanguage": "Seleziona lingua",
    "language": "Lingua:",
    "pageSize": "Formato pagina:",
    "pageSetup": "Imposta pagina",

    // ============= 3. Puzzle Rules (7 keys) =============
    "cryptogram.puzzle.rules": "Regole del puzzle",
    "cryptogram.phrases.label": "Frasi (una per riga):",
    "cryptogram.phrases.placeholder": "Nel mezzo del cammin...",
    "cryptogram.letters.reveal": "Lettere da rivelare:",
    "cryptogram.max.lines": "Righe massime per puzzle:",
    "cryptogram.auto.assign": "Assegna immagini automaticamente",
    "cryptogram.language.description": "I nomi e le immagini saranno visualizzati nella lingua selezionata.",

    // ============= 4. Image Assignment (9 keys) =============
    "cryptogram.image.assignment": "Assegnazione immagini",
    "cryptogram.image.theme": "Tema immagini:",
    "cryptogram.select.letter": "Seleziona una lettera per assegnarle un'immagine:",
    "cryptogram.search.label": "Cerca immagini:",
    "cryptogram.search.placeholder": "es: mela, auto",
    "cryptogram.available.images": "Immagini disponibili (clicca per assegnare):",
    "cryptogram.select.letter.above": "Seleziona una lettera sopra.",
    "cryptogram.assigned.images": "Immagini assegnate:",
    "cryptogram.msg.type.search": "Digita per cercare tra tutte le immagini.",

    // ============= 5. Upload Section (4 keys) =============
    "cryptogram.upload.title": "Carica immagini personali",
    "cryptogram.upload.select": "Seleziona immagine/i da caricare:",
    "cryptogram.uploaded.label": "Le tue immagini caricate:",
    "cryptogram.uploaded.placeholder": "Le tue immagini caricate appariranno qui.",

    // ============= 6. Page Setup (19 keys) =============
    "cryptogram.page.setup": "Imposta pagina",
    "page.size.letter.portrait": "Letter Verticale (8,5×11\")",
    "page.size.letter.landscape": "Letter Orizzontale (11×8,5\")",
    "page.size.a4.portrait": "A4 Verticale (210×297mm)",
    "page.size.a4.landscape": "A4 Orizzontale (297×210mm)",
    "page.size.square": "Quadrato (1200×1200)",
    "page.size.custom": "Personalizzato",
    "cryptogram.width.label": "Larghezza (px):",
    "cryptogram.height.label": "Altezza (px):",
    "cryptogram.page.color": "Colore pagina:",
    "cryptogram.apply.size.color": "Applica dimensioni e colore",
    "cryptogram.background.title": "Sfondo",
    "cryptogram.background.theme": "Tema sfondo:",
    "cryptogram.background.message": "Seleziona un tema per gli sfondi.",
    "cryptogram.background.opacity": "Opacità sfondo:",
    "cryptogram.border.title": "Bordo",
    "cryptogram.border.theme": "Tema bordo:",
    "cryptogram.border.message": "Seleziona un tema per i bordi.",
    "cryptogram.border.opacity": "Opacità bordo:",

    // ============= 7. Text Tools (15 keys) =============
    "cryptogram.text.tools": "Strumenti di testo",
    "cryptogram.text.add.new": "Aggiungi nuovo testo",
    "cryptogram.text.content.label": "Contenuto:",
    "cryptogram.text.placeholder": "Ciao!",
    "cryptogram.text.add.button": "Aggiungi testo",
    "cryptogram.text.properties": "Proprietà del testo selezionato",
    "cryptogram.text.color": "Colore:",
    "cryptogram.text.size": "Dimensione:",
    "cryptogram.text.font": "Carattere:",
    "cryptogram.text.outline.color": "Colore contorno:",
    "cryptogram.text.outline.width": "Contorno (0-10):",
    "cryptogram.text.default": "Nuovo testo",
    "cryptogram.page.title": "Generatore di crittogrammi illustrati",
    "cryptogram.msg.text.added": "Testo aggiunto al foglio.",
    "cryptogram.msg.text.updated": "Proprietà del testo aggiornate.",

    // ============= 8. Font Options (7 keys) =============
    "font.lexend": "Lexend Deca",
    "font.baloo": "Baloo 2",
    "font.nunito": "Nunito",
    "font.quicksand": "Quicksand",
    "font.fredoka": "Fredoka",
    "font.arial": "Arial",
    "font.verdana": "Verdana",

    // ============= 9. Toolbar Actions (20 keys) =============
    "toolbar.layers": "Livelli",
    "toolbar.bring.forward": "Porta avanti",
    "toolbar.send.backward": "Porta indietro",
    "toolbar.align": "Allinea",
    "toolbar.align.selected": "Allinea selezione:",
    "toolbar.align.left": "Allinea a sinistra",
    "toolbar.center.h": "Centra orizzontalmente",
    "toolbar.align.right": "Allinea a destra",
    "toolbar.align.top": "Allinea in alto",
    "toolbar.center.v": "Centra verticalmente",
    "toolbar.align.bottom": "Allinea in basso",
    "toolbar.align.to.page": "Allinea alla pagina:",
    "toolbar.center.page.h": "Centra orizzontalmente nella pagina",
    "toolbar.center.page.v": "Centra verticalmente nella pagina",
    "toolbar.delete": "Elimina selezione",
    "toolbar.msg.aligned": "Oggetti allineati.",
    "toolbar.msg.layer.changed": "Ordine dei livelli modificato.",
    "toolbar.msg.deleted": "Oggetti selezionati eliminati.",
    "toolbar.msg.select.first": "Per favore, seleziona prima un oggetto.",
    "toolbar.msg.nothing.selected": "Nessun oggetto selezionato.",

    // ============= 10. Action Buttons (10 keys) =============
    "cryptogram.generate": "Genera",
    "cryptogram.download": "Scarica",
    "cryptogram.download.worksheet.jpeg": "Scheda esercizi (JPEG)",
    "cryptogram.download.answer.jpeg": "Scheda soluzioni (JPEG)",
    "cryptogram.download.worksheet.pdf": "Scheda esercizi (PDF)",
    "cryptogram.download.answer.pdf": "Scheda soluzioni (PDF)",
    "common.grayscale": "Scala di grigi",
    "cryptogram.clear.all": "Cancella tutto",
    "cryptogram.msg.generate.complete": "Crittogramma generato con successo!",
    "cryptogram.msg.cleared": "Tutto il contenuto è stato cancellato.",

    // ============= 11. Tab Labels (2 keys) =============
    "cryptogram.tab.worksheet": "Scheda esercizi",
    "cryptogram.tab.answer": "Scheda soluzioni",

    // ============= 12. Generation Messages (6 keys) =============
    "cryptogram.msg.generating": "Generazione dati del puzzle...",
    "cryptogram.msg.worksheet.generated": "Scheda esercizi generata con successo!",
    "cryptogram.msg.error": "Errore: {error}",
    "cryptogram.msg.enter.phrase": "Per favore, inserisci almeno una frase.",
    "cryptogram.msg.missing.images": "Mancano immagini per le lettere: {letters}. Per favore, assegnale o usa l'assegnazione automatica.",
    "cryptogram.msg.generate.first": "Per favore, genera prima del contenuto.",

    // ============= 13. Theme Loading Messages (6 keys) =============
    "cryptogram.themes.all": "Tutti i temi",
    "cryptogram.msg.themes.error": "Impossibile caricare i temi.",
    "cryptogram.msg.loading.default": "Caricamento tema predefinito...",
    "cryptogram.msg.loading.theme": "Caricamento {theme}...",
    "cryptogram.msg.theme.failed": "Errore nel caricamento del tema \"{theme}\"",
    "cryptogram.msg.theme.loaded": "Tema caricato con successo.",

    // ============= 14. Auto-Assign Messages (6 keys) =============
    "cryptogram.msg.fetching.images": "Recupero di tutte le immagini per l'assegnazione automatica...",
    "cryptogram.msg.fetch.failed": "Errore nel recupero della lista immagini dal server.",
    "cryptogram.msg.no.images.server": "Assegnazione automatica impossibile. Nessuna immagine trovata sul server.",
    "cryptogram.msg.auto.assigned": "Le immagini sono state assegnate automaticamente.",
    "cryptogram.msg.select.letter.first": "Per favore, seleziona prima una lettera.",
    "cryptogram.msg.auto.assigning": "Assegnazione automatica delle immagini alle lettere...",

    // ============= 15. Search Messages (5 keys) =============
    "cryptogram.msg.searching": "Ricerca in corso...",
    "cryptogram.msg.search.failed": "Errore nella ricerca di \"{query}\"",
    "cryptogram.msg.no.images": "Nessuna immagine trovata{query}",
    "cryptogram.msg.uploads.available": "{count} immagine/i personalizzata/e disponibile/i.",
    "cryptogram.msg.search.complete": "Ricerca completata.",

    // ============= 16. Clear & Download Messages (15 keys) =============
    "cryptogram.msg.form.cleared": "Modulo reimpostato.",
    "cryptogram.msg.canvas.unavailable": "Foglio non disponibile.",
    "cryptogram.msg.preparing.file": "Preparazione {fileName}...",
    "cryptogram.msg.jpeg.initiated": "Download JPEG avviato!",
    "cryptogram.msg.jpeg.error": "Errore nella preparazione del JPEG: {error}",
    "cryptogram.watermark.main": "VERSIONE GRATUITA - LessonCraftStudio.com",
    "cryptogram.watermark.text": "VERSIONE GRATUITA",
    "cryptogram.msg.preparing.pdf": "Preparazione PDF...",
    "cryptogram.msg.pdf.downloaded": "PDF scaricato!",
    "cryptogram.msg.pdf.error": "Errore nella creazione del PDF.",
    "cryptogram.msg.generate.worksheet.first": "Per favore, genera prima una scheda esercizi.",
    "cryptogram.msg.preparing.jpeg": "Preparazione JPEG...",
    "cryptogram.msg.jpeg.error.simple": "Errore nella preparazione del JPEG.",
    "cryptogram.msg.pdf.error.detailed": "Errore nella creazione del PDF: {error}",
    "cryptogram.msg.download.ready": "Download pronto.",

    // ============= 17. Asset Loading Messages (5 keys) =============
    "cryptogram.asset.select": "Seleziona un tema per vedere {type}.",
    "cryptogram.asset.loading": "Caricamento {type} di {theme}...",
    "cryptogram.asset.none": "Nessun {type} in questo tema.",
    "cryptogram.asset.error": "Errore nel caricamento di {type}.",
    "cryptogram.asset.loaded": "{type} caricato/i con successo.",

    // ============= 18. Common Terms (3 keys) =============
    "common.none": "Nessuno",
    "common.loading": "Caricamento...",
    "common.error": "Errore",

    // ============= 19. Placeholders (5 keys) =============
    "placeholder.search": "Cerca...",
    "placeholder.enter.text": "Inserisci il testo qui",
    "placeholder.custom.width": "Larghezza",
    "placeholder.custom.height": "Altezza",
    "placeholder.reveal.count": "0",

    // ============= 20. Page Title (1 key) =============
    "cryptogram.page.title": "Generatore di crittogrammi illustrati",

    // ============= 21. Error Messages (32 keys) =============
    "error.invalid.dimensions": "Dimensioni non valide. Per favore, controlla larghezza e altezza.",
    "error.no.theme.selected": "Per favore, seleziona prima un tema.",
    "error.no.images.theme": "Nessuna immagine disponibile nel tema selezionato.",
    "error.upload.failed": "Caricamento fallito. Per favore, riprova.",
    "error.file.too.large": "File troppo grande. La dimensione massima è 5MB.",
    "error.invalid.file.type": "Tipo di file non valido. Per favore, carica solo file immagine.",
    "error.canvas.creation": "Errore nella creazione del foglio.",
    "error.export.failed": "Esportazione fallita. Per favore, riprova.",
    "error.network": "Errore di rete. Per favore, controlla la connessione.",
    "error.theme.empty": "Il tema selezionato non contiene immagini.",
    "error.puzzle.generation": "Impossibile generare il puzzle. Per favore, prova con frasi diverse.",
    "error.insufficient.images": "Immagini insufficienti per tutte le lettere. Per favore, aggiungi più immagini o riduci le lettere uniche.",
    "error.no.intersections": "Impossibile trovare abbastanza intersezioni per le parole. Prova con immagini diverse.",
    "error.invalid.phrase": "Frase non valida. Per favore, inserisci un testo valido.",
    "error.letter.assignment": "Errore nell'assegnazione dell'immagine alla lettera.",
    "error.image.loading": "Errore nel caricamento dell'immagine.",
    "error.border.loading": "Errore nel caricamento del bordo.",
    "error.background.loading": "Errore nel caricamento dello sfondo.",
    "error.text.empty": "Per favore, inserisci del contenuto testuale.",
    "error.object.selection": "Per favore, seleziona un oggetto da modificare.",
    "error.alignment": "Errore nell'allineamento degli oggetti.",
    "error.layer.operation": "Errore nel cambio dell'ordine dei livelli.",
    "error.delete.operation": "Errore nell'eliminazione degli oggetti.",
    "error.color.invalid": "Valore colore non valido.",
    "error.size.invalid": "Valore dimensione non valido.",
    "error.outline.invalid": "Larghezza contorno non valida.",
    "error.opacity.invalid": "Valore opacità non valido.",
    "error.theme.not.found": "Tema non trovato.",
    "error.api.connection": "Impossibile connettersi al server.",
    "error.session.expired": "Sessione scaduta. Per favore, ricarica la pagina.",
    "error.browser.unsupported": "Il tuo browser non è supportato. Per favore, usa un browser moderno.",
    "error.feature.unavailable": "Questa funzione non è disponibile nella versione gratuita."
  }
};

// ==========================================
// HELPER FUNCTIONS FOR ITALIAN TRANSLATION
// ==========================================

/**
 * Get Italian translation for a key
 * @param {string} key - Translation key
 * @param {object} params - Parameters for interpolation
 * @returns {string} Translated text in Italian
 */
function getItalianCryptogramTranslation(key, params = {}) {
  const translation = CRYPTOGRAM_TRANSLATIONS_IT.it[key] ||
                     CRYPTOGRAM_TRANSLATIONS_IT.en?.[key] ||
                     key;

  return formatItalianCryptogramTranslation(translation, params);
}

/**
 * Format Italian translation with parameters
 * @param {string} text - Text with placeholders
 * @param {object} params - Parameters to replace
 * @returns {string} Formatted text
 */
function formatItalianCryptogramTranslation(text, params) {
  let formattedText = text;
  for (const [key, value] of Object.entries(params)) {
    formattedText = formattedText.replace(new RegExp(`\\{${key}\\}`, 'g'), value);
  }
  return formattedText;
}

/**
 * Validate Italian translations
 * @returns {object} Validation result
 */
function validateItalianCryptogramTranslations() {
  const keys = Object.keys(CRYPTOGRAM_TRANSLATIONS_IT.it);
  const totalExpected = 194;

  return {
    valid: keys.length === totalExpected,
    coverage: `${((keys.length / totalExpected) * 100).toFixed(1)}%`,
    missing: totalExpected - keys.length,
    total: keys.length,
    expected: totalExpected
  };
}

/**
 * Italian alphabet for cryptogram
 * Includes standard letters plus Italian accented characters
 */
const ITALIAN_CRYPTOGRAM_ALPHABET = 'ABCDEFGHIJKLMNOPQRSTUVWXYZÀÈÉÌÍÎÒÓÙÚ';

/**
 * Get Italian-specific cryptogram settings
 */
function getItalianCryptogramSettings() {
  return {
    alphabet: ITALIAN_CRYPTOGRAM_ALPHABET,
    defaultRevealCount: 2,
    maxLinesPerPuzzle: 8,
    supportedFonts: [
      'Arial',
      'Verdana',
      'Lexend Deca',
      'Baloo 2',
      'Nunito',
      'Quicksand',
      'Fredoka'
    ],
    paperSizes: {
      'a4': 'A4 (Standard in Italia)',
      'letter': 'Letter (Formato americano)',
      'square': 'Quadrato'
    }
  };
}

// Export for use in other modules
if (typeof module !== 'undefined' && module.exports) {
  module.exports = {
    CRYPTOGRAM_TRANSLATIONS_IT,
    getItalianCryptogramTranslation,
    formatItalianCryptogramTranslation,
    validateItalianCryptogramTranslations,
    ITALIAN_CRYPTOGRAM_ALPHABET,
    getItalianCryptogramSettings
  };
}

// Make available globally in browser
if (typeof window !== 'undefined') {
  window.CRYPTOGRAM_TRANSLATIONS_IT = CRYPTOGRAM_TRANSLATIONS_IT;
  window.getItalianCryptogramTranslation = getItalianCryptogramTranslation;
  window.formatItalianCryptogramTranslation = formatItalianCryptogramTranslation;
  window.validateItalianCryptogramTranslations = validateItalianCryptogramTranslations;
  window.ITALIAN_CRYPTOGRAM_ALPHABET = ITALIAN_CRYPTOGRAM_ALPHABET;
  window.getItalianCryptogramSettings = getItalianCryptogramSettings;
}