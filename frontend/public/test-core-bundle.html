<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Core Bundle Web Components</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f0f2f5;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        h1 {
            text-align: center;
            color: #1c1c1e;
            margin-bottom: 2rem;
        }
        
        .component-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }
        
        .component-card {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .component-card h3 {
            margin: 0 0 1rem 0;
            color: #1c1c1e;
            font-size: 1.25rem;
        }
        
        .component-card p {
            color: #666;
            margin-bottom: 1rem;
        }
        
        .test-button {
            background: #007aff;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
        }
        
        .test-button:hover {
            background: #005ecb;
        }
        
        .component-container {
            width: 100%;
            min-height: 600px;
            margin-top: 1rem;
            border: 1px solid #dce1e6;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .active-component {
            display: block;
        }
        
        .hidden {
            display: none;
        }
        
        .controls {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .controls select {
            padding: 0.5rem;
            font-size: 1rem;
            border: 1px solid #dce1e6;
            border-radius: 6px;
            margin: 0 1rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Core Bundle Web Components Test</h1>
        
        <div class="controls">
            <label for="componentSelect">Select Component to Test:</label>
            <select id="componentSelect">
                <option value="">Choose a component...</option>
                <option value="image-addition">Image Addition</option>
                <option value="alphabet-train">Alphabet Train</option>
                <option value="coloring">Coloring Page</option>
                <option value="math-worksheet">Math Worksheet</option>
                <option value="word-scramble">Word Scramble</option>
                <option value="find-and-count">Find and Count</option>
                <option value="matching-app">Matching App</option>
                <option value="drawing-lines">Drawing Lines</option>
                <option value="picture-bingo">Picture Bingo</option>
                <option value="sudoku">Sudoku</option>
            </select>
        </div>
        
        <div id="componentContainer" class="component-container hidden">
            <!-- Web components will be loaded here -->
        </div>
        
        <div class="component-grid" id="componentGrid">
            <div class="component-card">
                <h3>Image Addition</h3>
                <p>Create math worksheets with images for visual addition problems.</p>
                <button class="test-button" onclick="loadComponent('image-addition')">Test Component</button>
            </div>
            
            <div class="component-card">
                <h3>Alphabet Train</h3>
                <p>Generate alphabet train worksheets with customizable letters and images.</p>
                <button class="test-button" onclick="loadComponent('alphabet-train')">Test Component</button>
            </div>
            
            <div class="component-card">
                <h3>Coloring Page</h3>
                <p>Create printable coloring pages from selected images.</p>
                <button class="test-button" onclick="loadComponent('coloring')">Test Component</button>
            </div>
            
            <div class="component-card">
                <h3>Math Worksheet</h3>
                <p>Generate math problems for addition, subtraction, multiplication, and division.</p>
                <button class="test-button" onclick="loadComponent('math-worksheet')">Test Component</button>
            </div>
            
            <div class="component-card">
                <h3>Word Scramble</h3>
                <p>Create word scramble puzzles with images as hints.</p>
                <button class="test-button" onclick="loadComponent('word-scramble')">Test Component</button>
            </div>
            
            <div class="component-card">
                <h3>Find and Count</h3>
                <p>Generate worksheets for counting and finding objects.</p>
                <button class="test-button" onclick="loadComponent('find-and-count')">Test Component</button>
            </div>
            
            <div class="component-card">
                <h3>Matching App</h3>
                <p>Create matching exercises with images and text.</p>
                <button class="test-button" onclick="loadComponent('matching-app')">Test Component</button>
            </div>
            
            <div class="component-card">
                <h3>Drawing Lines</h3>
                <p>Practice worksheets for drawing straight, curved, and zigzag lines.</p>
                <button class="test-button" onclick="loadComponent('drawing-lines')">Test Component</button>
            </div>
            
            <div class="component-card">
                <h3>Picture Bingo</h3>
                <p>Generate bingo cards with pictures for interactive learning.</p>
                <button class="test-button" onclick="loadComponent('picture-bingo')">Test Component</button>
            </div>
            
            <div class="component-card">
                <h3>Sudoku</h3>
                <p>Create sudoku puzzles with different grid sizes and difficulty levels.</p>
                <button class="test-button" onclick="loadComponent('sudoku')">Test Component</button>
            </div>
        </div>
    </div>

    <script>
        const componentContainer = document.getElementById('componentContainer');
        const componentGrid = document.getElementById('componentGrid');
        const componentSelect = document.getElementById('componentSelect');
        let currentComponent = null;

        componentSelect.addEventListener('change', (e) => {
            if (e.target.value) {
                loadComponent(e.target.value);
            } else {
                hideComponent();
            }
        });

        function loadComponent(componentName) {
            // Clear existing component
            if (currentComponent) {
                componentContainer.removeChild(currentComponent);
            }

            // Show container and hide grid
            componentContainer.classList.remove('hidden');
            componentGrid.classList.add('hidden');
            componentSelect.value = componentName;

            // Load the component script
            const script = document.createElement('script');
            script.type = 'module';
            script.src = `./web-components/${componentName}/index.js`;
            
            script.onload = () => {
                // Create the web component
                currentComponent = document.createElement(`lcs-${componentName}`);
                currentComponent.setAttribute('subscription', 'full'); // Test with full subscription
                currentComponent.setAttribute('locale', 'en');
                
                // Add sample images for components that need them
                const sampleImages = JSON.stringify([
                    { id: 'apple', displayName: 'Apple', url: '/images/apple.png' },
                    { id: 'banana', displayName: 'Banana', url: '/images/banana.png' },
                    { id: 'cat', displayName: 'Cat', url: '/images/cat.png' },
                    { id: 'dog', displayName: 'Dog', url: '/images/dog.png' },
                    { id: 'car', displayName: 'Car', url: '/images/car.png' },
                    { id: 'house', displayName: 'House', url: '/images/house.png' },
                    { id: 'star', displayName: 'Star', url: '/images/star.png' },
                    { id: 'heart', displayName: 'Heart', url: '/images/heart.png' }
                ]);
                
                currentComponent.setAttribute('images', sampleImages);
                
                componentContainer.appendChild(currentComponent);
            };
            
            script.onerror = () => {
                alert(`Failed to load ${componentName} component`);
            };
            
            document.head.appendChild(script);
        }

        function hideComponent() {
            if (currentComponent) {
                componentContainer.removeChild(currentComponent);
                currentComponent = null;
            }
            componentContainer.classList.add('hidden');
            componentGrid.classList.remove('hidden');
            componentSelect.value = '';
        }

        // Add back button functionality
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                hideComponent();
            }
        });
    </script>
</body>
</html>