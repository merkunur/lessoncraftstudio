/**
 * SEO Part 71: Enrich kindergarten grade for insects, jobs, music, nature, numbers
 * Adds 6 grade-level enrichment fields to gradeContent.kindergarten for each theme.
 * Fields: uniqueGradeAngle, developmentalMilestones, differentiationNotes,
 *         parentTakeaway, classroomIntegration, assessmentRubric
 */
const fs = require('fs');
const path = require('path');

const BASE = path.join(__dirname, '..', 'frontend', 'content', 'themes');

// Escape single quotes for TS single-quoted strings
function esc(s) {
  return s.replace(/'/g, "\\'");
}

function buildInjection(data, nl) {
  const lines = [];
  lines.push(`      uniqueGradeAngle: '${esc(data.uniqueGradeAngle)}',`);
  lines.push(`      developmentalMilestones: [`);
  for (const m of data.developmentalMilestones) {
    lines.push(`        { milestone: '${esc(m.milestone)}', howWeAddress: '${esc(m.howWeAddress)}' },`);
  }
  lines.push(`      ],`);
  lines.push(`      differentiationNotes: '${esc(data.differentiationNotes)}',`);
  lines.push(`      parentTakeaway: '${esc(data.parentTakeaway)}',`);
  lines.push(`      classroomIntegration: '${esc(data.classroomIntegration)}',`);
  lines.push(`      assessmentRubric: [`);
  for (const r of data.assessmentRubric) {
    lines.push(`        { skill: '${esc(r.skill)}', emerging: '${esc(r.emerging)}', proficient: '${esc(r.proficient)}', advanced: '${esc(r.advanced)}' },`);
  }
  lines.push(`      ],`);
  return lines.join(nl);
}

// ── Theme content ────────────────────────────────────────────────────────

const themes = [
  // ── Insects ──────────────────────────────────────────────────────────
  {
    name: 'insects',
    uniqueGradeAngle: 'Kindergarten is the most entomologically investigative stage for insect worksheets because five- and six-year-olds are developing the classification skills, observational precision, and scientific vocabulary to move beyond simple fascination with bugs into genuine entomological understanding \u2014 they can count legs to confirm an organism is an insect (six legs, three body parts), distinguish insects from other small creatures like spiders and worms using observable features, and understand that insects undergo life cycle transformations that follow predictable patterns. Insect worksheets are uniquely powerful at the kindergarten level because children can now engage with scientific classification using defining features (sorting organisms into insects versus non-insects by counting legs and identifying body segments), life cycle sequencing across multiple species (comparing the butterfly metamorphosis to the ladybug life cycle to the ant colony cycle), habitat and ecological role understanding (learning that different insects live in different places and serve different functions like pollination, decomposition, and food chain roles), and measurement and data collection through insect observation (measuring insect sizes, counting spots, recording observations in simple charts). The live observation dimension is especially significant at the kindergarten level because insects are everywhere \u2014 in playgrounds, gardens, windowsills, and under logs \u2014 making insect worksheets the only science topic where kindergarteners can immediately verify their learning through real-world observation without any special equipment or field trips.',
    developmentalMilestones: [
      { milestone: 'Scientific classification of insects versus non-insects (kindergarteners are developing the feature-based reasoning to define categories by observable characteristics)', howWeAddress: 'insect worksheets where children count legs, identify three body parts (head, thorax, abdomen), and sort organisms into insects versus non-insects (a spider has eight legs so it is not an insect, a beetle has six legs so it is) build the scientific classification skills that teach children to define categories by evidence rather than by appearance or feeling' },
      { milestone: 'Insect life cycles and transformation sequencing (kindergarteners are developing the sequential reasoning to understand that organisms change through predictable stages)', howWeAddress: 'insect worksheets where children sequence the butterfly metamorphosis (egg, caterpillar, chrysalis, butterfly), compare it to other insect life cycles, and predict what comes next in a sequence build the life science understanding and sequential reasoning that connect biological change to ordered, predictable processes' },
      { milestone: 'Insect habitats, roles, and observation-based data collection (kindergarteners are developing the ecological awareness and recording skills to document what they observe)', howWeAddress: 'insect worksheets where children match insects to their habitats, identify ecological roles like pollination and decomposition, measure and compare insect sizes, and record observations in simple tally charts build the ecological literacy and scientific data skills that form the foundation of environmental science' },
    ],
    differentiationNotes: 'For struggling kindergarteners, focus on five familiar insects (butterfly, ladybug, ant, bee, grasshopper) with large clear photographs, simplify classification to one rule (count the legs \u2014 six means insect), reduce life cycle sequencing to the butterfly with four clear stages using picture cards, and use plastic insect models alongside worksheets for concrete manipulation and counting. For advanced kindergarteners, introduce twelve or more insects including less familiar species like praying mantis, dragonfly, and walking stick, challenge children to classify using multiple features simultaneously (six legs AND three body parts AND antennae), compare life cycles across three or more species identifying complete versus incomplete metamorphosis at a basic level, introduce the concept of insect adaptations (camouflage, mimicry, warning colors), and encourage an insect field guide project where children observe, draw, measure, and describe real insects found on the school grounds.',
    parentTakeaway: 'Insect worksheets give kindergarten parents the most immediately observable science learning tool because insects are literally everywhere your child goes \u2014 and a kindergartener who has learned insect classification, life cycles, and habitats on worksheets transforms every backyard visit, park walk, and garden outing into a live science investigation where they can identify real insects, count legs to confirm classification, and observe behaviors they have studied on paper. The key strategy is to connect worksheet learning to real insect encounters: after classification worksheets, find a bug together and count its legs (is it an insect or not), after life cycle worksheets, watch caterpillars in the garden and discuss what stage they are in, after habitat worksheets, look under rocks and logs and discuss why insects live there. When your child can identify ten insects by name, classify organisms as insects or non-insects by counting legs and body parts, sequence the butterfly life cycle in four stages, and describe an insect\u2019s habitat and role using scientific vocabulary, they have built the classification, life science, and observation skills that insect worksheets teach through the most directly observable science topic available.',
    classroomIntegration: 'Insect worksheets anchor the most observationally rich life science unit in kindergarten because insects are abundant, safe to observe, and provide perfect specimens for teaching classification, life cycles, habitats, and data collection \u2014 all core kindergarten science standards. Create a classroom insect observation station with magnifying glasses, plastic insect models, and a rotating display of safe live specimens like caterpillars in a butterfly habitat or an ant farm. Use classification worksheets during science centers where children sort plastic insects by features, incorporate life cycle sequencing worksheets alongside a live butterfly-raising project where children observe real metamorphosis and compare it to worksheet stages. Connect observation worksheets to outdoor insect hunts where children tally insects found on the playground and record data in simple charts. An insect body parts poster with labeled head, thorax, and abdomen becomes a reference for classification activities. An insect of the week display where children observe, draw, and describe a new species builds sustained entomological knowledge. A class insect field guide where each child contributes a page with an illustration, habitat description, and classification data creates a collaborative science reference.',
    assessmentRubric: [
      { skill: 'Insect classification and identification', emerging: 'names three or four insects and identifies them as bugs with teacher prompting', proficient: 'names ten or more insects, classifies organisms as insects or non-insects by counting legs and identifying three body parts, and explains the defining features of insects', advanced: 'classifies using multiple features simultaneously, identifies insects that use camouflage or mimicry, compares insects to other arthropods like spiders and crustaceans, and creates classification keys for insects observed in the field' },
      { skill: 'Insect life cycles and sequencing', emerging: 'places two or three butterfly life cycle stages in order with picture support and teacher guidance', proficient: 'sequences the complete butterfly metamorphosis in four stages, compares it to at least one other insect life cycle, and explains what happens at each stage', advanced: 'compares complete versus incomplete metamorphosis across species, predicts life cycle stages for unfamiliar insects based on patterns, and explains why metamorphosis is advantageous using basic scientific reasoning' },
      { skill: 'Insect observation and data collection', emerging: 'draws one insect from observation and names one feature like color with teacher support', proficient: 'records observations of three or more insects including size, color, habitat, and behavior, uses tally charts to count insects found, and describes insect roles like pollination in simple terms', advanced: 'creates detailed observation records with measurements and multiple features, interprets insect tally data to identify patterns, and explains ecological roles of insects using vocabulary like pollinator, decomposer, and food chain' },
    ],
  },

  // ── Jobs ─────────────────────────────────────────────────────────────
  {
    name: 'jobs',
    uniqueGradeAngle: 'Kindergarten is the most community-connected stage for jobs worksheets because five- and six-year-olds are developing the social understanding, sequential reasoning, and vocabulary to grasp that communities function through interconnected roles \u2014 they can understand that a farmer grows food that a truck driver delivers to a store where a cashier sells it to families, creating a chain of jobs that depend on each other. Jobs worksheets are uniquely powerful at the kindergarten level because children can now engage with job classification by workplace and function (sorting helpers into categories like health, safety, education, and food), tool-to-job matching with reasoning (explaining why a doctor needs a stethoscope and why a firefighter needs a hose rather than just memorizing associations), multi-step job processes and supply chains (understanding that getting bread to the table requires a farmer, a miller, a baker, a truck driver, and a store worker), and career vocabulary that builds both social studies knowledge and academic language (profession, occupation, workplace, responsibility, community). The interdependence dimension is especially significant at the kindergarten level because understanding that no single person can provide everything a community needs \u2014 and that every job matters \u2014 builds both social awareness and respect for all types of work.',
    developmentalMilestones: [
      { milestone: 'Job classification and community understanding (kindergarteners are developing the social cognition to understand that communities are organized systems of specialized roles)', howWeAddress: 'jobs worksheets where children sort community helpers into categories (health workers, safety workers, educators, food providers), identify where each worker does their job, and explain how different jobs serve the community build the social studies understanding that connects individual roles to community functioning' },
      { milestone: 'Tool-job matching and workplace reasoning (kindergarteners are developing the causal reasoning to explain why specific tools are needed for specific jobs)', howWeAddress: 'jobs worksheets where children match tools to professions, explain why each tool is necessary for the job (a firefighter needs a hose because water puts out fire), and identify multiple tools for a single profession build the cause-and-effect reasoning and workplace vocabulary that deepen understanding beyond simple memorization' },
      { milestone: 'Supply chains and job interdependence (kindergarteners are developing the sequential and systems thinking to understand multi-step processes involving multiple workers)', howWeAddress: 'jobs worksheets where children sequence the steps from farm to table, identify all the workers involved in getting a product to consumers, and explain why each step matters build the systems thinking and sequential reasoning that connect individual jobs to larger community processes' },
    ],
    differentiationNotes: 'For struggling kindergarteners, focus on eight familiar community helpers (doctor, teacher, firefighter, police officer, farmer, mail carrier, chef, bus driver) with clear uniform photographs, simplify tool matching to one tool per job with picture cards, reduce supply chain work to three-step sequences with visual supports, and use community helper figurines alongside worksheets for dramatic play reinforcement. For advanced kindergarteners, introduce fifteen or more professions including less visible roles like electrician, veterinarian, architect, and software developer, challenge children to explain job interdependence by tracing a product through five or more workers, extend writing to descriptive paragraphs about what a specific worker does and why it matters, introduce the concept of education and training (some jobs require many years of school), and encourage a career investigation project where children interview a family member about their job and present findings to the class.',
    parentTakeaway: 'Jobs worksheets give kindergarten parents the most socially connecting learning tool because your kindergartener encounters community helpers every day \u2014 and building vocabulary, classification, and reasoning skills around real jobs transforms routine interactions into learning moments while teaching your child to appreciate the work that keeps communities running. The key strategy is to narrate the helpers you encounter: at the doctor\u2019s office, discuss the tools and their purposes; when you see a construction worker, talk about what they are building and what tools they use; at the grocery store, trace where the food came from and who helped get it there; when the mail carrier arrives, discuss the journey a letter takes. When your child can name fifteen community helpers and explain what each does, match tools to professions with reasoning, trace a product from origin to consumer identifying each worker involved, and explain why every job matters to the community, they have built the social studies knowledge, vocabulary, and systems thinking that jobs worksheets teach through the most personally relevant social context in their world.',
    classroomIntegration: 'Jobs worksheets anchor the most socially engaging social studies unit in kindergarten because community helpers connect directly to children\u2019s daily experiences and provide rich context for teaching classification, vocabulary, sequencing, and interdependence. Create a community helpers dramatic play area that rotates through different workplaces (doctor\u2019s office one week, restaurant the next, post office after that) with corresponding worksheets and props. Use classification worksheets during social studies centers where children sort helper figurines by workplace type, incorporate tool-matching worksheets into a hands-on station where children examine real or toy tools and match them to professions. Connect supply chain sequencing worksheets to a classroom simulation where children act out each step of getting bread from farm to table. A community helpers vocabulary wall with photographs, job titles, tools, and workplace descriptions builds content-area language. A guest speaker series where real community helpers visit the classroom and children complete interview worksheets builds real-world connections. A class community book where each child illustrates and describes a different community helper with their tools, workplace, and contribution creates a collaborative social studies reference.',
    assessmentRubric: [
      { skill: 'Job classification and community knowledge', emerging: 'names four or five community helpers and identifies one thing each does with teacher prompting', proficient: 'names fifteen or more community helpers, classifies them by category (health, safety, education, food), explains what each does and where they work, and describes how jobs serve the community', advanced: 'compares job categories across different community types, explains how jobs have changed over time, and identifies jobs that serve multiple community functions' },
      { skill: 'Tool-job matching and workplace reasoning', emerging: 'matches two or three tools to jobs using pictures with teacher guidance', proficient: 'matches tools to ten or more professions, explains why each tool is needed using cause-and-effect reasoning, and identifies multiple tools for complex jobs', advanced: 'explains how tools reflect the purpose of each job, compares tools across similar professions, and describes how tools have evolved to make jobs safer or more efficient' },
      { skill: 'Supply chains and job interdependence', emerging: 'sequences two or three steps in a simple process like farmer grows food and store sells food with teacher support', proficient: 'sequences five or more steps in a supply chain identifying the worker at each step, explains why each step is necessary, and describes how removing one worker would affect the whole chain', advanced: 'traces multiple supply chains for different products, compares simple and complex production processes, and explains job interdependence using systems thinking vocabulary' },
    ],
  },

  // ── Music ────────────────────────────────────────────────────────────
  {
    name: 'music',
    uniqueGradeAngle: 'Kindergarten is the most musically literate stage for music worksheets because five- and six-year-olds are developing the pattern recognition, classification skills, and rhythmic precision to engage with music as an organized system rather than simply a joyful noise \u2014 they can identify instrument families (percussion, string, wind), understand that rhythm follows patterns that can be written down and repeated, and connect musical concepts like loud and soft, fast and slow, and high and low to the vocabulary of dynamics, tempo, and pitch. Music worksheets are uniquely powerful at the kindergarten level because children can now engage with instrument classification by sound production method (understanding why drums are percussion and violins are strings based on how they make sound), rhythmic pattern creation and reading (extending and creating AB, ABB, and ABC patterns using musical notation symbols), music vocabulary and literacy connections (learning terms like rhythm, melody, tempo, and dynamics that build both music knowledge and academic vocabulary), and listening skills and auditory discrimination (distinguishing instruments by sound, comparing musical qualities, and describing what they hear using precise vocabulary). The cross-curricular dimension is especially significant at the kindergarten level because music patterns directly parallel math patterns, music vocabulary builds language skills, and the discipline of keeping a beat builds the self-regulation and focus that supports all academic learning.',
    developmentalMilestones: [
      { milestone: 'Instrument classification and sound science (kindergarteners are developing the categorical reasoning to organize instruments by how they produce sound)', howWeAddress: 'music worksheets where children sort instruments into families (percussion, strings, wind, brass), explain how each family produces sound (percussion is hit or shaken, strings are plucked or bowed, wind instruments use breath), and compare instruments within and across families build the classification thinking and sound science understanding that connect music to physics' },
      { milestone: 'Rhythmic patterns and musical math (kindergarteners are developing the pattern recognition and sequential thinking that connect music directly to mathematical reasoning)', howWeAddress: 'music worksheets where children identify, extend, and create rhythmic patterns using instrument symbols, clap or tap patterns before recording them, and recognize that music follows predictable repeating structures build the pattern recognition and sequential reasoning that serve both music literacy and algebraic thinking' },
      { milestone: 'Music vocabulary and listening skills (kindergarteners are developing the precise vocabulary and auditory discrimination to describe music using academic language)', howWeAddress: 'music worksheets where children learn and apply terms like rhythm, melody, tempo, dynamics, and pitch, compare musical pieces as fast or slow and loud or soft, and describe instruments and music using specific vocabulary build the listening comprehension and descriptive language skills that support all academic subjects' },
    ],
    differentiationNotes: 'For struggling kindergarteners, focus on six easily recognizable instruments (drum, guitar, piano, trumpet, violin, flute) from three families, simplify classification to percussion versus not-percussion, reduce pattern work to simple AB patterns with two instrument types, and use actual instrument sounds (played live or from recordings) alongside worksheets so children connect pictures to real sounds. For advanced kindergarteners, introduce twelve or more instruments across all four families with specific names and playing techniques, challenge children to create and notate their own four-beat rhythmic patterns using invented notation, extend vocabulary to include terms like orchestra, ensemble, and composition, introduce the concept of reading simple musical notation (quarter notes and rests), and encourage a class composition project where children create a group musical piece with assigned instrument parts and a written score.',
    parentTakeaway: 'Music worksheets give kindergarten parents the most joyfully cross-curricular learning tool because music activates pattern recognition, vocabulary, listening skills, and self-regulation simultaneously \u2014 and your kindergartener is at the perfect age to transition from simply enjoying music to understanding how it works, which deepens both their musical appreciation and their academic skills. The key strategy is to make music listening active and analytical: when hearing a song, ask your child to identify instruments they recognize (is that a drum or a guitar), clap along to the beat and discuss whether it is fast or slow, listen for patterns that repeat, and compare two songs using vocabulary like louder, softer, faster, and slower. When your child can name ten instruments and classify them by family, identify and extend rhythmic patterns, use music vocabulary like rhythm, tempo, and dynamics correctly, and describe music using precise comparative language, they have built the classification, pattern recognition, vocabulary, and listening skills that music worksheets teach through the most universally beloved art form.',
    classroomIntegration: 'Music worksheets anchor the most cross-curricular arts integration unit in kindergarten because music connects directly to math (patterns, counting, fractions through rhythm), literacy (vocabulary, listening comprehension, following directions), and science (sound production, vibration, volume). Create a classroom music center with simple instruments (drums, shakers, xylophones, triangles) alongside classification and pattern worksheets where children can hear and feel what they study on paper. Use instrument classification worksheets during science centers connected to sound experiments where children explore how hitting, plucking, and blowing produce different sounds. Incorporate rhythmic pattern worksheets into math centers where children clap patterns before recording them with symbols. Connect music vocabulary worksheets to daily listening activities where children hear short musical pieces and describe them using the terms they have learned. A classroom instrument wall with labeled photographs grouped by family provides visual reference. A composer of the week listening station with response worksheets builds cultural literacy. A class concert where children perform the patterns they created on worksheets brings the learning full circle from paper to performance.',
    assessmentRubric: [
      { skill: 'Instrument classification and sound understanding', emerging: 'names three or four instruments and groups them as loud or quiet with teacher prompting', proficient: 'names ten or more instruments, classifies them into three or more families based on sound production, and explains how each family makes sound', advanced: 'compares instruments within families by size, pitch, and material, explains the physics of sound production at a basic level, and classifies unfamiliar instruments into the correct family using reasoning' },
      { skill: 'Rhythmic pattern recognition and creation', emerging: 'identifies a simple AB pattern with two instrument types and continues it for one repetition with teacher support', proficient: 'identifies, extends, and creates AB, ABB, and ABC patterns using instrument symbols, claps patterns accurately, and recognizes when a pattern breaks', advanced: 'creates original four-beat patterns with three or more elements, translates clapped rhythms into written symbol patterns, and identifies patterns in actual music they hear' },
      { skill: 'Music vocabulary and listening description', emerging: 'uses two or three words like loud and fast to describe music with teacher modeling', proficient: 'uses five or more music vocabulary terms (rhythm, tempo, dynamics, melody, pitch) correctly, compares two musical pieces using specific language, and describes instruments using sound vocabulary', advanced: 'writes detailed multi-sentence music descriptions using precise vocabulary, compares and contrasts musical pieces across multiple qualities, and uses music terms in original sentences that demonstrate deep understanding' },
    ],
  },

  // ── Nature ───────────────────────────────────────────────────────────
  {
    name: 'nature',
    uniqueGradeAngle: 'Kindergarten is the most ecologically integrative stage for nature worksheets because five- and six-year-olds are developing the systems thinking, observation skills, and scientific vocabulary to understand nature not as a collection of pretty scenery but as interconnected ecosystems where living and non-living things depend on each other \u2014 they can trace simple food chains (a plant feeds a caterpillar that feeds a bird), understand that animals need specific habitats that provide food, water, and shelter, and observe seasonal changes with enough detail to connect cause and effect (shorter days cause leaves to change color and fall). Nature worksheets are uniquely powerful at the kindergarten level because children can now engage with habitat science and ecosystem relationships (matching animals and plants to their habitats and explaining why each organism lives where it does), food chains and ecological interdependence (sequencing who eats whom and understanding that removing one link affects the whole chain), weather, seasons, and environmental change (tracking weather patterns, observing seasonal transformations, and connecting weather to plant and animal behavior), and conservation and environmental responsibility (understanding that human actions affect natural ecosystems and that everyone can help protect nature). The whole-systems dimension is especially significant at the kindergarten level because unlike single-ecosystem themes like forest or ocean, nature worksheets present the entire natural world as an interconnected system \u2014 teaching kindergarteners the foundational ecological truth that everything in nature is connected to everything else.',
    developmentalMilestones: [
      { milestone: 'Habitat science and ecosystem understanding (kindergarteners are developing the reasoning to explain why specific organisms live in specific environments)', howWeAddress: 'nature worksheets where children match animals and plants to habitats (pond, meadow, forest, desert), explain what each habitat provides (food, water, shelter), and compare habitats by their characteristics build the ecological reasoning that connects organisms to their environments and helps children understand that habitats are not interchangeable' },
      { milestone: 'Food chains and ecological interdependence (kindergarteners are developing the sequential and causal reasoning to understand that organisms depend on each other for survival)', howWeAddress: 'nature worksheets where children build simple food chains linking plants to herbivores to predators, predict what happens when one link is removed, and identify producers and consumers at a basic level build the systems thinking and cause-and-effect reasoning that form the foundation of all environmental science' },
      { milestone: 'Seasonal observation and conservation awareness (kindergarteners are developing the temporal awareness and environmental ethic to notice nature changing and to understand human responsibility for protecting it)', howWeAddress: 'nature worksheets where children describe seasonal changes in plants, animals, and weather, connect weather patterns to organism behavior like hibernation and migration, and identify ways humans can help protect natural environments build the observation skills, temporal reasoning, and conservation values that support lifelong environmental stewardship' },
    ],
    differentiationNotes: 'For struggling kindergarteners, focus on three familiar habitats (pond, forest, garden) with five animals each using clear photographs, simplify food chains to two links (plant feeds animal), reduce seasonal observation to two contrasting seasons (summer and winter) with picture comparison, and use nature diorama kits alongside worksheets for three-dimensional habitat exploration. For advanced kindergarteners, introduce five or more habitats including desert, arctic, and wetland with ten or more organisms each, challenge children to build food chains with four or more links and explain what happens when each link is removed, extend seasonal work to all four seasons with detailed cause-and-effect explanations, introduce the concept of endangered species and habitat destruction, and encourage a nature journal project where children observe and document a specific outdoor location weekly, recording seasonal changes with illustrations, measurements, and descriptive writing.',
    parentTakeaway: 'Nature worksheets give kindergarten parents the most holistically educational outdoor learning tool because nature is the original classroom \u2014 and your kindergartener is at the perfect age to transition from simply playing outside to observing, questioning, and understanding the natural systems that surround them. The key strategy is to make outdoor time scientifically intentional: on a walk, ask your child to identify which habitat you are passing through (is this more like a forest or a meadow), look for food chain evidence (a bird eating a worm, a caterpillar eating a leaf), observe seasonal changes together (the leaves are turning colors because the days are getting shorter), and discuss how people can help protect nature (picking up litter, not disturbing animal homes). When your child can name five habitats and explain what makes each unique, build a simple food chain with three or more links, describe seasonal changes with cause-and-effect reasoning, and identify two or more ways humans can protect natural environments, they have built the ecological literacy, observation skills, and conservation ethic that nature worksheets teach through the most universally accessible science laboratory \u2014 the outdoors.',
    classroomIntegration: 'Nature worksheets anchor the most comprehensively scientific unit in kindergarten because nature encompasses all life science, earth science, and environmental science standards within one integrated theme. Create a classroom nature observation station with seasonal items (leaves in fall, seedlings in spring, snow measurement tools in winter) alongside habitat and seasonal change worksheets. Use habitat matching worksheets during science centers with animal figurines and habitat dioramas, incorporate food chain worksheets into a hands-on activity where children build chains with picture cards and physically remove links to observe the effect. Connect weather observation worksheets to a daily weather chart where children record temperature, sky conditions, and precipitation. A nature vocabulary wall organized by habitat with labeled photographs builds content-area language. A seasonal change documentation project where children photograph or draw the same outdoor view monthly tracks real-world changes alongside worksheet learning. A class nature encyclopedia where each child contributes a page about a different habitat, animal, or seasonal phenomenon creates a collaborative science reference integrating all nature concepts.',
    assessmentRubric: [
      { skill: 'Habitat science and ecosystem knowledge', emerging: 'names one or two habitats and places two or three animals in the correct habitat with teacher prompting', proficient: 'names five or more habitats, matches ten or more organisms to correct habitats, explains what each habitat provides for its inhabitants, and compares two habitats by their characteristics', advanced: 'explains why specific organisms cannot survive in different habitats, compares ecosystems by their food webs and climate, and describes how habitat changes affect the organisms that live there' },
      { skill: 'Food chains and ecological reasoning', emerging: 'connects a plant to an animal that eats it with teacher guidance', proficient: 'builds food chains with three or more links, identifies producers and consumers, and predicts what happens when one link is removed', advanced: 'constructs multiple food chains within one habitat showing interconnections, explains the difference between producers, consumers, and decomposers, and describes how energy flows through an ecosystem at a basic level' },
      { skill: 'Seasonal observation and conservation', emerging: 'names two seasons and describes one difference between them like hot and cold with teacher support', proficient: 'describes all four seasons with specific changes in weather, plants, and animal behavior, connects seasonal changes to cause-and-effect relationships, and names two or more ways humans can protect nature', advanced: 'explains the scientific causes of seasonal changes at a basic level, predicts how seasonal changes affect specific organisms using reasoning, designs a conservation plan for a local habitat, and writes detailed seasonal observation reports' },
    ],
  },

  // ── Numbers ──────────────────────────────────────────────────────────
  {
    name: 'numbers',
    uniqueGradeAngle: 'Kindergarten is the most numerically transformative stage for number worksheets because five- and six-year-olds are making the critical leap from counting as a recitation skill to number sense as a reasoning tool \u2014 they are learning that numbers can be composed and decomposed (seven is five and two, or three and four), that addition and subtraction are operations that change quantities in predictable ways, and that the number system has structure and patterns that make it learnable rather than an endless list of facts to memorize. Number worksheets are uniquely powerful at the kindergarten level because children can now engage with addition and subtraction within twenty using visual models and emerging mental strategies (not just counting all but counting on and counting back), place value introduction through the concept of tens and ones (understanding that thirteen is one group of ten and three ones), number comparison using greater than, less than, and equal vocabulary and symbols, and number patterns including skip counting by twos, fives, and tens that reveal the structure of the number system. The fluency dimension is especially significant at the kindergarten level because kindergarten is when children develop automatic recognition of small quantities (subitizing) and basic fact fluency within ten \u2014 skills that are the strongest predictor of mathematical success in elementary school and beyond.',
    developmentalMilestones: [
      { milestone: 'Addition and subtraction with understanding (kindergarteners are developing the operational reasoning to understand addition as combining and subtraction as taking away or comparing)', howWeAddress: 'number worksheets where children solve addition and subtraction problems within twenty using visual counters, number lines, and ten frames, compose and decompose numbers into different pairs (eight is five plus three, or six plus two), and write number sentences with plus, minus, and equals signs build the operational fluency and conceptual understanding that form the foundation of all future arithmetic' },
      { milestone: 'Number comparison and place value awareness (kindergarteners are developing the magnitude reasoning to understand that numbers have size and position relative to each other)', howWeAddress: 'number worksheets where children compare numbers using greater than, less than, and equal symbols, order numbers on a number line, and begin to understand that teen numbers are composed of one ten and some ones build the number sense and place value foundation that supports all multi-digit arithmetic' },
      { milestone: 'Number patterns and skip counting (kindergarteners are developing the pattern recognition to see structure within the number system)', howWeAddress: 'number worksheets where children skip count by twos, fives, and tens, identify and extend number patterns on hundred charts, and recognize odd and even numbers build the algebraic thinking and structural awareness that reveal mathematics as a system of patterns rather than a collection of random facts' },
    ],
    differentiationNotes: 'For struggling kindergarteners, focus on numbers within ten with concrete manipulatives (counters, cubes, fingers), simplify addition and subtraction to within five using visual models only, reduce comparison to two numbers at a time using physical objects for direct comparison, and provide number lines and ten frames as constant visual supports on every worksheet. For advanced kindergarteners, extend operations to addition and subtraction within thirty or beyond, challenge children to find all the ways to compose a number (all pairs that make ten), introduce simple word problems requiring children to determine the operation, extend place value to understanding two-digit numbers through the tens, and encourage a number pattern investigation project where children explore and document patterns they discover on a hundred chart, explaining their findings in writing.',
    parentTakeaway: 'Number worksheets give kindergarten parents the most mathematically foundational learning tool because kindergarten is when your child\u2019s number sense either solidifies into confident understanding or hardens into anxious memorization \u2014 and the difference depends on whether numbers are experienced as meaningful quantities or as symbols to be recited. The key strategy is to make numbers about quantity, not just counting: when your child counts to twenty, ask them to show you what fourteen looks like with objects (building quantity awareness), play the make-ten game where you show seven fingers and ask how many more to make ten (building composition skills), compare groups of objects and ask which has more and how many more (building comparison and subtraction simultaneously), and look for number patterns everywhere \u2014 house numbers that count by two, clock numbers that count by five. When your child can add and subtract within ten with confidence, compose and decompose numbers into different pairs, compare numbers using greater than and less than vocabulary, and identify skip counting patterns by twos, fives, and tens, they have built the number sense, operational fluency, and pattern recognition that number worksheets develop through the most mathematically essential skill set in all of early education.',
    classroomIntegration: 'Number worksheets are the mathematical backbone of the entire kindergarten curriculum because number sense connects to every subject and every daily routine. Use ten frames and number lines as permanent visual references alongside every worksheet. Incorporate addition and subtraction worksheets into daily math centers with manipulatives (unifix cubes, counters, base-ten blocks), connect number comparison worksheets to a daily attendance routine where children compare today\u2019s count to yesterday\u2019s. Use skip counting worksheets alongside physical counting activities (hopping by twos, clapping by fives). A classroom number line from zero to one hundred that children reference throughout the day builds constant number awareness. A daily number talk where children share different strategies for solving the same problem develops flexible thinking. A math journal where children record their solutions with drawings and number sentences builds mathematical communication. A hundred chart investigation wall where children mark patterns they discover creates ongoing algebraic exploration. A weekly math game center where children play dice and card games that practice addition and subtraction facts builds fluency through play.',
    assessmentRubric: [
      { skill: 'Addition and subtraction fluency', emerging: 'solves addition within five using counting all with manipulatives and teacher support', proficient: 'solves addition and subtraction within ten with fluency using visual models or mental strategies, composes and decomposes numbers into two or more pairs, and writes correct number sentences with plus, minus, and equals signs', advanced: 'solves addition and subtraction within twenty using counting on and other mental strategies, finds all pairs that compose a given number within ten, and solves simple word problems determining the correct operation independently' },
      { skill: 'Number comparison and place value', emerging: 'compares two groups of objects as more or less using visual estimation with teacher guidance', proficient: 'compares numbers within twenty using greater than, less than, and equal symbols correctly, orders five or more numbers from least to greatest, and explains that teen numbers have one ten and some ones', advanced: 'compares and orders numbers beyond twenty, explains place value for two-digit numbers using tens and ones language, and uses comparison reasoning to solve problems like what number is three more than fifteen' },
      { skill: 'Number patterns and skip counting', emerging: 'counts by ones to twenty and identifies the next number in a simple sequence with teacher support', proficient: 'skip counts by twos, fives, and tens to one hundred, identifies and extends simple number patterns, and recognizes odd and even numbers within twenty', advanced: 'identifies complex patterns on a hundred chart and explains the rules, skip counts starting from any number not just zero, and creates original number patterns with written explanations of the rule' },
    ],
  },
];

// ── Injection ────────────────────────────────────────────────────────────

let successCount = 0;

for (const theme of themes) {
  const filePath = path.join(BASE, theme.name, 'en.ts');
  let content = fs.readFileSync(filePath, 'utf8');

  // Detect line endings
  const nl = content.includes('\r\n') ? '\r\n' : '\n';

  // Build injection block
  const injection = buildInjection(theme, nl);

  // Pattern: end of faq array ], then close kindergarten }, then 'first-grade':
  const pattern = /(      \],)\r?\n(    \},)\r?\n(    'first-grade':)/;

  if (!pattern.test(content)) {
    console.error(`ERROR: Injection pattern not found in ${theme.name}/en.ts`);
    process.exit(1);
  }

  // Check if already injected - look for uniqueGradeAngle between 'kindergarten': and 'first-grade':
  const kIdx = content.indexOf("'kindergarten':");
  const fgIdx = content.indexOf("'first-grade':");
  if (kIdx !== -1 && fgIdx !== -1) {
    const kindergartenSection = content.substring(kIdx, fgIdx);
    if (kindergartenSection.includes("uniqueGradeAngle:")) {
      console.log(`SKIP: ${theme.name}/en.ts already has uniqueGradeAngle in kindergarten section`);
      continue;
    }
  }

  content = content.replace(pattern, `$1${nl}${injection}${nl}$2${nl}$3`);

  fs.writeFileSync(filePath, content, 'utf8');
  successCount++;
  console.log(`OK: Injected 6 kindergarten fields into ${theme.name}/en.ts`);
}

console.log(`\nDone! ${successCount} of ${themes.length} themes enriched.`);
